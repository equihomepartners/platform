<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equihome TLS - Traffic Light System</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            /* Equihome brand color palette */
            --primary-color: #003366; /* Deep blue */
            --secondary-color: #0099cc; /* Bright blue */
            --accent-color: #00cc66; /* Green for success/positive */
            --warning-color: #ff9900; /* Orange for warning */
            --danger-color: #ff3333; /* Red for danger/negative */
            --light-color: #ffffff; /* Light background */
            --dark-color: #001a33; /* Dark background */
            --text-light: #ffffff; /* Light text */
            --text-dark: #001a33; /* Dark text */
            --text-muted: #5c6b7a; /* Muted text */
            --border-color: #e6e6e6; /* Border color */
            --shadow-color: rgba(0, 51, 102, 0.15); /* Shadow color */

            /* Typography */
            font-family: 'Poppins', 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.5;
            font-weight: 400;
            color: var(--text-dark);
            background-color: var(--light-color);
            font-synthesis: none;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            margin: 0;
            display: flex;
            place-items: center;
            min-width: 320px;
            min-height: 100vh;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100%;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .sidebar {
            width: 250px;
            background: linear-gradient(135deg, var(--dark-color), var(--primary-color));
            color: var(--text-light);
            padding: 1rem 0;
            overflow-y: auto;
            transition: all 0.3s ease;
            box-shadow: 2px 0 10px var(--shadow-color);
            z-index: 900;
        }

        .sidebar-header {
            padding: 0 1.5rem 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 1rem;
        }

        .sidebar-header h3 {
            font-size: 1rem;
            font-weight: 500;
            margin: 0;
            color: var(--secondary-color);
        }

        .nav-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .nav-item {
            margin-bottom: 0.25rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .nav-link:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background-color: var(--accent-color);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .nav-link:hover:before {
            transform: translateX(0);
        }

        .nav-link.active {
            background: linear-gradient(90deg, rgba(0, 153, 204, 0.2), transparent);
            color: var(--text-light);
            font-weight: 500;
            box-shadow: inset 0 0 10px rgba(0, 153, 204, 0.1);
        }

        .nav-link.active:before {
            transform: translateX(0);
        }

        .nav-icon {
            margin-right: 0.75rem;
            width: 20px;
            text-align: center;
        }

        .nav-section {
            margin-top: 1.5rem;
            padding: 0 1.5rem 0.5rem;
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-muted);
            letter-spacing: 1px;
            font-weight: 600;
        }

        .content-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background-color: #f5f7fa;
            position: relative;
        }

        .page-content {
            display: none;
            flex: 1;
            flex-direction: row;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .page-content.active {
            display: flex;
            opacity: 1;
        }

        .dashboard-header {
            padding: 1.5rem;
            background-color: white;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px var(--shadow-color);
        }

        .dashboard-header h2 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .dashboard-header h2 i {
            color: var(--secondary-color);
        }

        .dashboard-content {
            padding: 0 1.5rem 1.5rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            overflow-y: auto;
            height: calc(100% - 80px);
        }

        /* System Status Styles */
        .system-status {
            grid-column: 1 / -1;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            background-color: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px var(--shadow-color);
            align-items: center;
        }

        .status-indicator {
            flex: 1;
            min-width: 250px;
            display: flex;
            flex-direction: column;
            padding: 0.75rem;
            border-radius: 6px;
            background-color: rgba(0, 0, 0, 0.02);
        }

        .status-icon {
            margin-right: 0.5rem;
            font-size: 0.8rem;
        }

        .status-icon.active {
            color: var(--accent-color);
        }

        .status-icon.warning {
            color: var(--warning-color);
        }

        .status-icon.inactive {
            color: var(--danger-color);
        }

        .status-text {
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .status-details {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
            margin-left: 1.5rem;
        }

        .refresh-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-left: auto;
            padding: 0 1rem;
        }

        .refresh-btn {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .last-updated {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Chart Container Styles */
        .chart-container {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            height: auto;
            min-height: 300px;
            display: flex;
            flex-direction: column;
        }

        .chart-container.full-width {
            grid-column: 1 / -1;
        }

        .chart-container:hover {
            box-shadow: 0 8px 24px var(--shadow-color);
            transform: translateY(-2px);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }

        .chart-header h3 {
            margin: 0;
            font-size: 1.1rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chart-header h3 i {
            color: var(--secondary-color);
        }

        .chart-controls {
            display: flex;
            gap: 0.5rem;
        }

        .chart-control-btn {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-muted);
        }

        .chart-control-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .chart-filter {
            padding: 0.25rem 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
            font-size: 0.85rem;
            color: var(--text-dark);
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .legend-color.green {
            background-color: var(--accent-color);
        }

        .legend-color.orange {
            background-color: var(--warning-color);
        }

        .legend-color.red {
            background-color: var(--danger-color);
        }

        .data-source-info {
            margin-top: auto;
            padding-top: 1rem;
            font-size: 0.85rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Data Table Styles */
        .data-table-container {
            grid-column: 1 / -1;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            background-color: #f8f9fa;
        }

        .table-header h3 {
            margin: 0;
            font-size: 1.1rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .table-header h3 i {
            color: var(--secondary-color);
        }

        .table-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .search-container {
            position: relative;
        }

        .search-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        .data-table-search {
            padding: 0.5rem 0.5rem 0.5rem 2rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
            width: 250px;
        }

        .filter-container {
            display: flex;
            gap: 0.5rem;
        }

        .data-table-filter {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
        }

        .export-container {
            display: flex;
            gap: 0.5rem;
        }

        .export-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .export-btn:hover {
            background-color: var(--secondary-color);
        }

        .export-format {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
        }

        .data-table-wrapper {
            padding: 0;
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th, .data-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--primary-color);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .data-table th.sortable {
            cursor: pointer;
        }

        .data-table th.sortable i {
            margin-left: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .data-table tbody tr:hover {
            background-color: rgba(0, 153, 204, 0.05);
        }

        .data-table td.positive {
            color: var(--accent-color);
            font-weight: 500;
        }

        .data-table td.negative {
            color: var(--danger-color);
            font-weight: 500;
        }

        .data-table td.neutral {
            color: var(--warning-color);
            font-weight: 500;
        }

        .zone-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-align: center;
            color: white;
        }

        .zone-badge.green {
            background: linear-gradient(135deg, var(--accent-color), #00aa55);
        }

        .zone-badge.orange {
            background: linear-gradient(135deg, var(--warning-color), #ff6600);
        }

        .zone-badge.red {
            background: linear-gradient(135deg, var(--danger-color), #cc0000);
        }

        .action-btn {
            background-color: transparent;
            border: none;
            color: var(--secondary-color);
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background-color: rgba(0, 153, 204, 0.1);
            color: var(--primary-color);
        }

        .pagination {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-color);
            background-color: #f8f9fa;
        }

        .pagination-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            background-color: white;
            border-radius: 4px;
            margin: 0 0.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-btn.active {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-ellipsis {
            margin: 0 0.25rem;
        }

        .pagination-info {
            margin-left: auto;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .data-unavailable {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
            color: var(--text-muted);
        }

        .data-unavailable i {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        .data-unavailable h4 {
            margin: 0 0 0.5rem 0;
            color: var(--text-dark);
        }

        .data-unavailable p {
            margin: 0 0 1.5rem 0;
            max-width: 400px;
        }

        .retry-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .retry-btn:hover {
            background-color: var(--secondary-color);
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            color: white;
        }

        .status-badge.active {
            background-color: var(--accent-color);
        }

        .status-badge.inactive {
            background-color: var(--text-muted);
        }

        .status-badge.pending {
            background-color: var(--warning-color);
        }

        /* ML Models Page Styles */
        .model-overview-container {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .model-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        .model-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px var(--shadow-color);
        }

        .model-card.active {
            border-color: var(--accent-color);
            box-shadow: 0 4px 16px rgba(0, 204, 102, 0.2);
        }

        .model-card-header {
            padding: 1.25rem;
            background-color: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .model-card-header h3 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .model-card-header h3 i {
            color: var(--secondary-color);
        }

        .model-status {
            font-size: 0.8rem;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-weight: 500;
        }

        .model-status.active {
            background-color: var(--accent-color);
            color: white;
        }

        .model-status.inactive {
            background-color: var(--text-muted);
            color: white;
        }

        .model-status.pending {
            background-color: var(--warning-color);
            color: white;
        }

        .model-card-body {
            padding: 1.25rem;
            flex: 1;
        }

        .model-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .model-metric {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .metric-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .metric-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .metric-value.positive {
            color: var(--accent-color);
        }

        .metric-value.negative {
            color: var(--danger-color);
        }

        .metric-value.neutral {
            color: var(--warning-color);
        }

        .model-description {
            font-size: 0.9rem;
            color: var(--text-dark);
            line-height: 1.5;
        }

        .model-card-footer {
            padding: 1rem 1.25rem;
            background-color: #f8f9fa;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
        }

        .model-btn {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 0.5rem 0.75rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .model-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .model-btn.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .model-details-container {
            grid-column: 1 / -1;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .model-details-header {
            padding: 1.25rem;
            background-color: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .model-details-header h3 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .model-details-header h3 i {
            color: var(--secondary-color);
        }

        .model-details-actions {
            display: flex;
            gap: 0.75rem;
        }

        .model-details-btn {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 0.5rem 0.75rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .model-details-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .model-details-content {
            padding: 1.5rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
        }

        .model-details-section {
            margin-bottom: 1.5rem;
        }

        .model-details-section h4 {
            margin: 0 0 1rem 0;
            font-size: 1rem;
            color: var(--primary-color);
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .model-params {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .model-param {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            background-color: #f8f9fa;
            border-radius: 4px;
        }

        .param-name {
            font-family: monospace;
            font-size: 0.9rem;
            color: var(--primary-color);
        }

        .param-value {
            font-family: monospace;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .feature-importance-chart, .training-history-chart {
            height: 300px;
        }

        .confusion-matrix {
            overflow-x: auto;
        }

        .confusion-matrix-table {
            width: 100%;
            border-collapse: collapse;
        }

        .confusion-matrix-table th, .confusion-matrix-table td {
            padding: 0.75rem;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .confusion-matrix-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--primary-color);
        }

        .matrix-correct {
            background-color: rgba(0, 204, 102, 0.2);
            color: var(--accent-color);
            font-weight: 600;
        }

        .matrix-incorrect {
            background-color: rgba(255, 51, 51, 0.1);
            color: var(--danger-color);
        }

        .api-code-block {
            background-color: #f8f9fa;
            border-radius: 4px;
            padding: 1rem;
            overflow-x: auto;
        }

        .api-code-block pre {
            margin: 0;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .model-pipeline-container {
            grid-column: 1 / -1;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .pipeline-header {
            padding: 1.25rem;
            background-color: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
        }

        .pipeline-header h3 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .pipeline-header h3 i {
            color: var(--secondary-color);
        }

        .pipeline-diagram {
            padding: 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            overflow-x: auto;
        }

        .pipeline-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 150px;
        }

        .pipeline-stage-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .pipeline-stage-content {
            text-align: center;
        }

        .pipeline-stage-content h4 {
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
            color: var(--primary-color);
        }

        .pipeline-stage-content p {
            margin: 0 0 0.75rem 0;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .pipeline-connector {
            height: 2px;
            background-color: var(--border-color);
            flex-grow: 1;
            margin: 0 1rem;
            position: relative;
            top: -30px;
        }

        .pipeline-status {
            font-size: 0.8rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 500;
        }

        .pipeline-status.active {
            background-color: var(--accent-color);
            color: white;
        }

        .pipeline-status.warning {
            background-color: var(--warning-color);
            color: white;
        }

        .pipeline-status.inactive {
            background-color: var(--danger-color);
            color: white;
        }

        /* Settings Page Styles */
        .settings-dashboard {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .settings-section {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem;
            background-color: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-header h3 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .settings-header h3 i {
            color: var(--secondary-color);
        }

        .settings-save-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .settings-save-btn:hover {
            background-color: var(--secondary-color);
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            padding: 1.5rem;
        }

        .settings-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.25rem;
            border: 1px solid var(--border-color);
        }

        .settings-card h4 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1rem;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .settings-control {
            margin-bottom: 1rem;
        }

        .settings-control:last-child {
            margin-bottom: 0;
        }

        .settings-control label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-dark);
        }

        .settings-select, .settings-input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
            background-color: white;
        }

        .settings-input[readonly] {
            background-color: #f1f1f1;
            cursor: not-allowed;
        }

        .range-with-value {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .settings-range {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: #ddd;
            outline: none;
            border-radius: 3px;
        }

        .settings-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--accent-color);
            cursor: pointer;
        }

        .range-value {
            min-width: 40px;
            text-align: right;
            font-weight: 500;
        }

        .checkbox-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-control label {
            margin-bottom: 0;
        }

        .settings-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .color-picker-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .settings-color {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .color-text-input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: monospace;
            text-transform: uppercase;
        }

        .password-input {
            position: relative;
            display: flex;
        }

        .password-input input {
            flex: 1;
            padding-right: 40px;
        }

        .toggle-password {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 40px;
            background: transparent;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
        }

        .toggle-password:hover {
            color: var(--primary-color);
        }

        .settings-btn {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 0.5rem 0.75rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .settings-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .button-group {
            display: flex;
            gap: 0.5rem;
        }

        .about-container {
            padding: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .about-logo {
            flex: 0 0 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .about-logo h2 {
            margin: 1rem 0 0.5rem;
            color: var(--primary-color);
        }

        .version-info {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .about-details {
            flex: 1;
            min-width: 300px;
        }

        .about-details p {
            margin-top: 0;
            line-height: 1.6;
            color: var(--text-dark);
        }

        .about-links {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .about-link {
            color: var(--secondary-color);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .about-link:hover {
            color: var(--primary-color);
            text-decoration: underline;
        }

        /* Notification System Styles */
        #notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 350px;
        }

        .notification {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            animation: slideInRight 0.3s ease-out forwards;
            border-left: 4px solid var(--primary-color);
        }

        .notification.success {
            border-left-color: var(--accent-color);
        }

        .notification.success i {
            color: var(--accent-color);
        }

        .notification.error {
            border-left-color: var(--danger-color);
        }

        .notification.error i {
            color: var(--danger-color);
        }

        .notification.warning {
            border-left-color: var(--warning-color);
        }

        .notification.warning i {
            color: var(--warning-color);
        }

        .notification i {
            font-size: 1.25rem;
            color: var(--primary-color);
        }

        .notification span {
            flex: 1;
            font-size: 0.9rem;
        }

        .close-notification {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            width: 24px;
            height: 24px;
        }

        .close-notification:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--text-dark);
        }

        .notification-hiding {
            animation: slideOutRight 0.3s ease-in forwards;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* Modal System Styles */
        #modal-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-visible {
            opacity: 1;
        }

        .modal-content {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            overflow: hidden;
        }

        .modal-visible .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            padding: 1.25rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .close-modal {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--text-dark);
        }

        .modal-body {
            padding: 1.5rem;
            overflow-y: auto;
            max-height: calc(90vh - 130px);
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        .modal-btn {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .cancel-btn {
            background-color: white;
            border: 1px solid var(--border-color);
            color: var(--text-dark);
        }

        .cancel-btn:hover {
            background-color: #f1f1f1;
        }

        .save-btn {
            background-color: var(--accent-color);
            border: 1px solid var(--accent-color);
            color: white;
        }

        .save-btn:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        .modal-section {
            margin-bottom: 1.5rem;
        }

        .modal-section h4 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1rem;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .advanced-weights-modal {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        /* System Health Styles */
        .system-health-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .health-status-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .health-status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            background-color: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
        }

        .health-status-header h3 {
            margin: 0;
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .health-status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .health-status-badge.healthy {
            background-color: rgba(76, 175, 80, 0.15);
            color: #2e7d32;
        }

        .health-status-badge.warning {
            background-color: rgba(255, 152, 0, 0.15);
            color: #ef6c00;
        }

        .health-status-badge.error {
            background-color: rgba(244, 67, 54, 0.15);
            color: #d32f2f;
        }

        .health-status-body {
            padding: 1.25rem;
        }

        .health-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .health-metric:last-child {
            margin-bottom: 0;
        }

        .health-metric-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .health-metric-value {
            font-weight: 500;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .health-metric-value.warning {
            color: var(--warning-color);
        }

        .health-metric-value.error {
            color: var(--danger-color);
        }

        .progress-bar {
            width: 100px;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
            border-radius: 4px;
        }

        .refresh-btn {
            background-color: transparent;
            border: none;
            color: var(--text-muted);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .refresh-btn:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--primary-color);
        }

        .system-health-details {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .health-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            background-color: #f8f9fa;
        }

        .health-tab {
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 500;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .health-tab:hover {
            color: var(--primary-color);
        }

        .health-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .health-tab-content {
            display: none;
            padding: 1.5rem;
        }

        .health-tab-content.active {
            display: block;
        }

        .health-table-container {
            overflow-x: auto;
        }

        .health-table {
            width: 100%;
            border-collapse: collapse;
        }

        .health-table th {
            text-align: left;
            padding: 0.75rem 1rem;
            background-color: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-muted);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .health-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-dark);
        }

        .health-table tr:last-child td {
            border-bottom: none;
        }

        .service-name {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .service-name i {
            color: var(--secondary-color);
            font-size: 1.1rem;
        }

        .status-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
        }

        .status-badge.healthy {
            background-color: rgba(76, 175, 80, 0.15);
            color: #2e7d32;
        }

        .status-badge.warning {
            background-color: rgba(255, 152, 0, 0.15);
            color: #ef6c00;
        }

        .status-badge.error {
            background-color: rgba(244, 67, 54, 0.15);
            color: #d32f2f;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            width: 28px;
            height: 28px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            background-color: white;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .logs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logs-filters {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .logs-filter {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
        }

        .logs-search {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            min-width: 200px;
        }

        .logs-actions {
            display: flex;
            gap: 0.75rem;
        }

        .logs-action-btn {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .logs-action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .logs-container {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.5rem;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .log-entry {
            padding: 0.75rem;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            display: grid;
            grid-template-columns: 150px 120px 80px 1fr;
            gap: 1rem;
            align-items: center;
            background-color: white;
            border-left: 4px solid transparent;
        }

        .log-entry:last-child {
            margin-bottom: 0;
        }

        .log-entry.error {
            border-left-color: var(--danger-color);
        }

        .log-entry.warning {
            border-left-color: var(--warning-color);
        }

        .log-entry.info {
            border-left-color: var(--accent-color);
        }

        .log-time {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .log-service {
            font-weight: 500;
            font-size: 0.9rem;
        }

        .log-level {
            font-size: 0.8rem;
            font-weight: 500;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            text-align: center;
        }

        .log-level.error {
            background-color: rgba(244, 67, 54, 0.15);
            color: #d32f2f;
        }

        .log-level.warning {
            background-color: rgba(255, 152, 0, 0.15);
            color: #ef6c00;
        }

        .log-level.info {
            background-color: rgba(33, 150, 243, 0.15);
            color: #1976d2;
        }

        .log-message {
            font-size: 0.9rem;
        }

        .logs-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
        }

        .pagination-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 1px solid var(--border-color);
            background-color: white;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover:not([disabled]) {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .pagination-btn[disabled] {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-info {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .performance-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
        }

        .performance-chart-container {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .chart-header h4 {
            margin: 0;
            font-size: 1rem;
            color: var(--primary-color);
        }

        .chart-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .chart-timeframe {
            padding: 0.25rem 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.85rem;
        }

        .chart-action-btn {
            width: 28px;
            height: 28px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            background-color: white;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .chart-action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .chart-placeholder {
            padding: 1rem;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chart-mockup {
            width: 100%;
            height: 100%;
            border-radius: 4px;
            background-size: cover;
            background-position: center;
        }

        .cpu-chart {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MDAgMjAwIj48cGF0aCBkPSJNMCwxMDBTNTAsNzAgMTAwLDUwczEwMCw1MCAxNTAsNzBzMTAwLTIwIDE1MCwwczEwMCw1MCAxMDAsMzApIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDk5Y2MiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg==');
        }

        .memory-chart {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MDAgMjAwIj48cGF0aCBkPSJNMCwxNTBTNTAsMTIwIDEwMCwxMDBzMTAwLDMwIDE1MCw1MHMxMDAsLTEwIDE1MCwxMHMxMDAsMzAgMTAwLDEwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA5OWNjIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2Zz4=');
        }

        .api-chart {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MDAgMjAwIj48cGF0aCBkPSJNMCw4MFM1MCwxMjAgMTAwLDkwczEwMCw0MCAxNTAsMjBzMTAwLDYwIDE1MCw0MHMxMDAsLTIwIDEwMCwwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA5OWNjIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2Zz4=');
        }

        .request-chart {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MDAgMjAwIj48cGF0aCBkPSJNMCwxMjBTNTAsODAgMTAwLDExMHMxMDAsNDAgMTUwLDYwczEwMCwtMzAgMTUwLC0xMHMxMDAsNDAgMTAwLDIwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA5OWNjIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2Zz4=');
        }

        .alerts-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .alerts-summary {
            display: flex;
            gap: 1rem;
        }

        .alert-count {
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .alert-count.error {
            background-color: rgba(244, 67, 54, 0.15);
            color: #d32f2f;
        }

        .alert-count.warning {
            background-color: rgba(255, 152, 0, 0.15);
            color: #ef6c00;
        }

        .alert-count.info {
            background-color: rgba(33, 150, 243, 0.15);
            color: #1976d2;
        }

        .alerts-actions {
            display: flex;
            gap: 0.75rem;
        }

        .alerts-action-btn {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .alerts-action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .alerts-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .alert-entry {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .alert-entry.error .alert-icon {
            color: var(--danger-color);
        }

        .alert-entry.warning .alert-icon {
            color: var(--warning-color);
        }

        .alert-entry.info .alert-icon {
            color: var(--accent-color);
        }

        .alert-icon {
            font-size: 1.5rem;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
        }

        .alert-message {
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            color: var(--text-dark);
        }

        .alert-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .alert-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .alert-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            background-color: white;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .alert-action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        /* Service Details Modal Styles */
        .service-details {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .service-detail-item {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.75rem;
        }

        .service-detail-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .detail-label {
            width: 150px;
            font-weight: 500;
            color: var(--text-muted);
        }

        .detail-value {
            flex: 1;
            color: var(--text-dark);
        }

        /* Notification Settings Styles */
        .notification-settings {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .notification-setting {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .setting-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: white;
            border-bottom: 1px solid var(--border-color);
        }

        .setting-header h4 {
            margin: 0;
            font-size: 1rem;
            color: var(--primary-color);
        }

        .setting-options {
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .setting-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .setting-option label {
            font-size: 0.9rem;
            color: var(--text-dark);
        }

        /* Switch Toggle Styles */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--accent-color);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--accent-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* Expanded Chart Styles */
        .expanded-chart-container {
            width: 100%;
            height: 400px;
        }

        /* Pipeline Stage Details Styles */
        .pipeline-stage-details {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .stage-detail-item {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.75rem;
        }

        .stage-detail-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .stage-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .stage-action-btn {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .stage-action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        /* AI Layer Styles */
        .ai-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .ai-status-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .ai-status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            background-color: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
        }

        .ai-status-header h3 {
            margin: 0;
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .ai-status-body {
            padding: 1.25rem;
            flex: 1;
        }

        .ai-status-footer {
            padding: 1rem 1.25rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        .ai-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .ai-metric:last-child {
            margin-bottom: 0;
        }

        .ai-metric-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .ai-metric-value {
            font-weight: 500;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ai-metric-value.warning {
            color: var(--warning-color);
        }

        .ai-metric-value.error {
            color: var(--danger-color);
        }

        .ai-action-btn {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .ai-action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .zone-distribution-chart {
            width: 100%;
            height: 200px;
        }

        .ai-details {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .ai-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            background-color: #f8f9fa;
        }

        .ai-tab {
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 500;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .ai-tab:hover {
            color: var(--primary-color);
        }

        .ai-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .ai-tab-content {
            display: none;
            padding: 1.5rem;
        }

        .ai-tab-content.active {
            display: block;
        }

        /* Decision Making Tab Styles */
        .decision-making-header {
            margin-bottom: 1.5rem;
        }

        .decision-making-header h3 {
            margin-top: 0;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .decision-making-header p {
            margin: 0;
            color: var(--text-muted);
        }

        .decision-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 2rem;
        }

        .decision-step {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            width: 100%;
            max-width: 600px;
        }

        .decision-step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--accent-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            flex-shrink: 0;
        }

        .decision-step-content {
            flex: 1;
        }

        .decision-step-content h4 {
            margin-top: 0;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .decision-step-content p {
            margin: 0;
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        .decision-flow-arrow {
            margin: 0.75rem 0;
            color: var(--text-muted);
        }

        .decision-example {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.25rem;
        }

        .decision-example h4 {
            margin-top: 0;
            margin-bottom: 1rem;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .decision-example-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 1.5rem;
        }

        .decision-example-suburb {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
        }

        .decision-example-suburb h5 {
            margin-top: 0;
            margin-bottom: 1rem;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .decision-example-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .example-metric {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .metric-name {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .metric-value {
            font-weight: 500;
            color: var(--text-dark);
        }

        .decision-example-process {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .example-step {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .example-step-label {
            font-weight: 500;
            color: var(--primary-color);
        }

        .example-step-value {
            font-size: 0.9rem;
            color: var(--text-dark);
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 0.5rem;
        }

        /* Prompts Tab Styles */
        .prompts-header {
            margin-bottom: 1.5rem;
        }

        .prompts-header h3 {
            margin-top: 0;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .prompts-header p {
            margin: 0;
            color: var(--text-muted);
        }

        .prompt-template {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .prompt-template:last-child {
            margin-bottom: 1.5rem;
        }

        .prompt-template-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: white;
            border-bottom: 1px solid var(--border-color);
        }

        .prompt-template-header h4 {
            margin: 0;
            color: var(--primary-color);
        }

        .prompt-actions {
            display: flex;
            gap: 0.5rem;
        }

        .prompt-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            background-color: white;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .prompt-action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .prompt-template-content {
            padding: 1rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .prompt-template-content pre {
            margin: 0;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            color: var(--text-dark);
        }

        .prompt-actions-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        /* Parameters Tab Styles */
        .parameters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .parameters-header h3 {
            margin: 0;
            color: var(--primary-color);
        }

        .parameters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .parameter-card {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.25rem;
        }

        .parameter-card h4 {
            margin-top: 0;
            margin-bottom: 1rem;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .parameter-control {
            margin-bottom: 1rem;
        }

        .parameter-control:last-child {
            margin-bottom: 0;
        }

        .parameter-control label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        .parameter-select, .parameter-input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
            background-color: white;
        }

        .parameter-range {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: #ddd;
            outline: none;
            border-radius: 3px;
        }

        .parameter-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--accent-color);
            cursor: pointer;
        }

        .parameter-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* AI Logs Tab Styles */
        .ai-logs-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .log-operation {
            font-weight: 500;
            font-size: 0.9rem;
        }

        /* Prompt Edit Styles */
        .prompt-edit-container {
            width: 100%;
        }

        .prompt-edit-textarea {
            width: 100%;
            padding: 1rem;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            resize: vertical;
        }

        .new-prompt-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: 500;
            color: var(--text-dark);
        }

        /* Version History Styles */
        .version-history {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .version-entry {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
        }

        .version-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .version-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .version-number {
            font-weight: 500;
            color: var(--primary-color);
        }

        .version-date {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .version-author {
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        .version-changes {
            margin-bottom: 0.75rem;
        }

        .version-changes p {
            margin: 0;
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        .version-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }

        .version-action-btn {
            padding: 0.25rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: white;
            color: var(--text-dark);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .version-action-btn:hover {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .chart-container {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            height: 300px;
        }

        .chart-container:hover {
            box-shadow: 0 8px 24px var(--shadow-color);
            transform: translateY(-2px);
        }

        .chart-container h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .data-table-container {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            grid-column: 1 / -1;
        }

        .data-table-container h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .data-table-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .data-table-search {
            flex: 1;
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
        }

        .data-table-filter {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th, .data-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 500;
        }

        .data-table tbody tr:hover {
            background-color: rgba(0, 153, 204, 0.05);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1.5rem;
            background-color: var(--primary-color);
            color: var(--text-light);
            box-shadow: 0 2px 10px var(--shadow-color);
            position: relative;
            z-index: 1000;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo h1 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }

        .version-tag {
            font-size: 0.7rem;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            color: var(--text-light);
            padding: 0.1rem 0.4rem;
            border-radius: 10px;
            margin-left: 0.5rem;
            vertical-align: middle;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0, 153, 204, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 153, 204, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(0, 153, 204, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 153, 204, 0); }
        }

        .subtitle p {
            margin: 0;
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .search-container {
            display: flex;
            gap: 0.5rem;
        }

        .search-container input {
            padding: 0.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 200px;
        }

        .search-container button {
            padding: 0.5rem 1rem;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .search-container button:hover {
            background-color: #45a049;
        }

        .filter-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-container select {
            padding: 0.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .legend {
            display: flex;
            gap: 1.5rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .green {
            background-color: #4CAF50;
        }

        .orange {
            background-color: #FF9800;
        }

        .red {
            background-color: #F44336;
        }

        .map-container {
            flex: 2;
            height: 100%;
            position: relative;
            border-radius: 12px;
            margin: 1rem;
            box-shadow: 0 8px 24px var(--shadow-color);
            background-color: white;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .map-container:hover {
            box-shadow: 0 12px 28px var(--shadow-color);
            transform: translateY(-2px);
        }

        #map {
            width: 100%;
            height: 100%;
            border-radius: 8px;
        }

        .map-controls {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .map-control-btn {
            background-color: white;
            border: none;
            border-radius: 8px;
            padding: 0.6rem;
            box-shadow: 0 4px 8px var(--shadow-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            width: 36px;
            height: 36px;
        }

        .map-control-btn:hover {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px var(--shadow-color);
        }

        .map-control-btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        .suburb-details {
            flex: 1;
            padding: 1.5rem;
            background-color: white;
            overflow-y: auto;
            min-width: 300px;
            max-width: 400px;
            box-shadow: -2px 0 20px var(--shadow-color);
            color: var(--text-dark);
            margin: 1rem 1rem 1rem 0;
            border-radius: 12px;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .no-selection {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            color: var(--text-muted);
            text-align: center;
        }

        .no-selection i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--secondary-color);
            opacity: 0.5;
        }

        .no-selection h2 {
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .no-selection p {
            margin-top: 0;
            font-size: 0.9rem;
        }

        .suburb-header {
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 1rem;
        }

        .suburb-header h2 {
            margin: 0 0 0.5rem 0;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .zone-badge {
            display: inline-block;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            color: white;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            animation: badgePulse 2s infinite;
        }

        .zone-badge.green {
            background: linear-gradient(135deg, var(--accent-color), #00aa55);
        }

        .zone-badge.orange {
            background: linear-gradient(135deg, var(--warning-color), #ff6600);
        }

        .zone-badge.red {
            background: linear-gradient(135deg, var(--danger-color), #cc0000);
        }

        .zone-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
        }

        @keyframes badgePulse {
            0% { box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); }
            50% { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
            100% { box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); }
        }

        .metrics-container {
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 4px 12px rgba(0, 51, 102, 0.08);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .metrics-container:hover {
            box-shadow: 0 6px 16px rgba(0, 51, 102, 0.12);
            transform: translateY(-2px);
        }

        .metrics-container h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            color: var(--primary-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .metrics-container h3 i {
            color: var(--secondary-color);
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.8rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid var(--border-color);
        }

        .metric-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .metric-label {
            font-weight: 500;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .metric-value {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .positive {
            color: var(--accent-color);
        }

        .negative {
            color: var(--danger-color);
        }

        .ai-reasoning {
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(0, 153, 204, 0.08), rgba(0, 204, 102, 0.05));
            border-radius: 12px;
            position: relative;
            border: 1px solid rgba(0, 153, 204, 0.2);
            box-shadow: 0 4px 16px rgba(0, 51, 102, 0.08);
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ai-reasoning:hover {
            box-shadow: 0 8px 24px rgba(0, 51, 102, 0.12);
            transform: translateY(-2px);
        }

        .ai-reasoning::before {
            content: '\f075';
            font-family: 'Font Awesome 6 Free';
            position: absolute;
            top: -15px;
            left: 20px;
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
            padding: 0.6rem;
            border-radius: 50%;
            font-size: 0.9rem;
            box-shadow: 0 4px 8px rgba(0, 153, 204, 0.3);
            transition: all 0.3s ease;
        }

        .ai-reasoning:hover::before {
            transform: rotate(15deg);
        }

        .investment-recommendation {
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(0, 204, 102, 0.08), rgba(0, 153, 204, 0.05));
            border-radius: 12px;
            position: relative;
            border: 1px solid rgba(0, 204, 102, 0.2);
            box-shadow: 0 4px 16px rgba(0, 51, 102, 0.08);
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease-out 0.2s backwards;
        }

        .investment-recommendation:hover {
            box-shadow: 0 8px 24px rgba(0, 51, 102, 0.12);
            transform: translateY(-2px);
        }

        .investment-recommendation::before {
            content: '\f201';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: -15px;
            left: 20px;
            background: linear-gradient(135deg, var(--accent-color), var(--secondary-color));
            color: white;
            padding: 0.6rem;
            border-radius: 50%;
            font-size: 0.9rem;
            box-shadow: 0 4px 8px rgba(0, 204, 102, 0.3);
            transition: all 0.3s ease;
        }

        .investment-recommendation:hover::before {
            transform: rotate(-15deg);
        }

        .ai-reasoning h3, .investment-recommendation h3 {
            margin-top: 0;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
            color: var(--primary-color);
            font-weight: 600;
        }

        .ai-reasoning p, .investment-recommendation p {
            margin: 0;
            line-height: 1.6;
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        .model-info {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 16px rgba(0, 51, 102, 0.08);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease-out 0.4s backwards;
        }

        .model-info:hover {
            box-shadow: 0 8px 24px rgba(0, 51, 102, 0.12);
            transform: translateY(-2px);
        }

        .model-info h3 {
            margin-top: 0;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
            color: var(--primary-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .model-info h3 i {
            color: var(--secondary-color);
        }

        .model-status {
            font-size: 0.7rem;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            background-color: var(--text-muted);
            color: white;
            margin-left: 0.5rem;
            font-weight: 500;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .model-status.active {
            background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
            color: white;
            animation: statusPulse 2s infinite;
        }

        @keyframes statusPulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 204, 102, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(0, 204, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 204, 102, 0); }
        }

        .model-info p {
            margin: 0.5rem 0;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .model-info p:last-of-type {
            border-bottom: none;
        }

        .model-info p strong {
            color: var(--primary-color);
        }

        .business-alignment {
            text-transform: uppercase;
            font-size: 0.8rem;
            padding: 0.2rem 0.6rem;
            border-radius: 6px;
            background-color: #f0f0f0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .business-alignment.high {
            background: linear-gradient(90deg, var(--accent-color), #00aa55);
            color: white;
            animation: alignmentPulse 2s infinite;
        }

        .business-alignment.medium {
            background: linear-gradient(90deg, var(--warning-color), #ff6600);
            color: white;
        }

        .business-alignment.low {
            background: linear-gradient(90deg, var(--danger-color), #cc0000);
            color: white;
        }

        .business-alignment:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        @keyframes alignmentPulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 204, 102, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(0, 204, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 204, 102, 0); }
        }

        .other-models {
            margin-top: 1.5rem;
            font-size: 0.9rem;
            background: linear-gradient(135deg, rgba(0, 51, 102, 0.05), rgba(0, 153, 204, 0.05));
            padding: 1.25rem;
            border-radius: 12px;
            border: 1px solid rgba(0, 51, 102, 0.1);
            box-shadow: 0 4px 12px rgba(0, 51, 102, 0.05);
            transition: all 0.3s ease;
        }

        .other-models:hover {
            box-shadow: 0 6px 16px rgba(0, 51, 102, 0.08);
            transform: translateY(-2px);
        }

        .other-models p {
            margin-top: 0;
            margin-bottom: 0.75rem;
            color: var(--primary-color);
            font-weight: 500;
            font-size: 0.85rem;
            border-bottom: none;
        }

        .other-models ul {
            list-style: none;
            padding-left: 0;
            margin-top: 0.5rem;
            margin-bottom: 0;
        }

        .other-models li {
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
        }

        .disabled {
            color: var(--text-muted);
            font-style: italic;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10, 36, 99, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid var(--secondary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1.5s linear infinite;
            margin-bottom: 1.5rem;
        }

        .loading-overlay p {
            font-size: 1.1rem;
            font-weight: 500;
            margin-top: 0;
            text-align: center;
            max-width: 80%;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .stats-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background-color: white;
            padding: 1.25rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px var(--shadow-color);
            z-index: 500;
            max-width: 280px;
            border-top: 4px solid var(--secondary-color);
        }

        .cache-info {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed var(--border-color);
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .cache-actions {
            margin-top: 10px;
            text-align: center;
        }

        .refresh-cache-btn {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .refresh-cache-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        .refresh-cache-btn:active {
            transform: translateY(0);
        }

        .stats-panel h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            text-align: center;
            color: var(--primary-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .stats-panel h3 i {
            color: var(--secondary-color);
        }

        .stats-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }

        .stat-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .stat-label {
            font-weight: 500;
            color: var(--text-muted);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stat-label i {
            color: var(--secondary-color);
            font-size: 0.85rem;
        }

        .stat-value {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .suburb-details {
                max-width: none;
                width: 100%;
            }

            .header {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
            }

            .controls {
                width: 100%;
            }

            .search-container {
                width: 100%;
            }

            .search-container input {
                flex: 1;
            }

            .filter-container {
                width: 100%;
            }

            .filter-container select {
                flex: 1;
            }

            .legend {
                margin-top: 0.5rem;
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="logo">
                <h1>Equihome Traffic Light System <span class="version-tag">alpha v0.1</span></h1>
            </div>
            <div class="subtitle">
                <p>Traffic Light System - Sydney & Nearby Suburbs Zoning</p>
            </div>
            <div class="controls">
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Search suburbs..." />
                    <button id="search-button"><i class="fas fa-search"></i> Search</button>
                </div>
                <div class="filter-container">
                    <label><i class="fas fa-filter"></i> Filter:</label>
                    <select id="zone-filter">
                        <option value="all">All Zones</option>
                        <option value="green">Green Zone</option>
                        <option value="orange">Orange Zone</option>
                        <option value="red">Red Zone</option>
                    </select>
                </div>
            </div>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color green"></div>
                    <span>Green Zone</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color orange"></div>
                    <span>Orange Zone</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color red"></div>
                    <span>Red Zone</span>
                </div>
            </div>
        </header>
        <div class="main-content">
            <div class="sidebar">
                <div class="sidebar-header">
                    <h3>Navigation</h3>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="map-view">
                            <i class="nav-icon fas fa-map-marked-alt"></i> Map View
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="analytics">
                            <i class="nav-icon fas fa-chart-bar"></i> Analytics
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="data-tables">
                            <i class="nav-icon fas fa-table"></i> Data Tables
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="advanced-search">
                            <i class="nav-icon fas fa-search"></i> Advanced Search
                        </a>
                    </li>
                </ul>

                <div class="nav-section">System</div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="ml-models">
                            <i class="nav-icon fas fa-brain"></i> ML Models
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="ai-layer">
                            <i class="nav-icon fas fa-robot"></i> AI Layer
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="data-sources">
                            <i class="nav-icon fas fa-database"></i> Data Sources
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings">
                            <i class="nav-icon fas fa-cogs"></i> Settings
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="system-health">
                            <i class="nav-icon fas fa-heartbeat"></i> System Health
                        </a>
                    </li>
                </ul>
            </div>

            <div class="content-wrapper">
                <!-- Map View Page -->
                <div class="page-content active" id="map-view">
                    <div class="map-container">
                        <div id="map"></div>
                        <div class="map-controls">
                            <button class="map-control-btn" title="Zoom to Sydney" id="zoom-sydney">
                                <i class="fas fa-home"></i>
                            </button>
                            <button class="map-control-btn" title="Toggle Heatmap" id="toggle-heatmap">
                                <i class="fas fa-fire"></i>
                            </button>
                            <button class="map-control-btn" title="Toggle Satellite View" id="toggle-satellite">
                                <i class="fas fa-satellite"></i>
                            </button>
                        </div>
                        <div class="loading-overlay" id="loading-overlay">
                            <div class="loading-spinner"></div>
                            <p id="loading-message">Loading Sydney suburbs data...</p>
                        </div>
                        <div class="stats-panel" id="stats-panel">
                            <h3><i class="fas fa-chart-pie"></i> Zone Statistics</h3>
                            <div class="stats-content">
                                <div class="stat-item">
                                    <div class="stat-label"><i class="fas fa-check-circle"></i> Green Zones:</div>
                                    <div class="stat-value" id="green-count">0</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label"><i class="fas fa-exclamation-circle"></i> Orange Zones:</div>
                                    <div class="stat-value" id="orange-count">0</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label"><i class="fas fa-times-circle"></i> Red Zones:</div>
                                    <div class="stat-value" id="red-count">0</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label"><i class="fas fa-map-marker-alt"></i> Total Suburbs:</div>
                                    <div class="stat-value" id="total-count">0</div>
                                </div>
                                <div class="stat-item cache-info">
                                    <div class="stat-label"><i class="fas fa-clock"></i> Last Updated:</div>
                                    <div class="stat-value" id="cache-timestamp">-</div>
                                </div>
                                <div class="stat-item cache-info">
                                    <div class="stat-label"><i class="fas fa-sync-alt"></i> Update Frequency:</div>
                                    <div class="stat-value">Daily at 08:00 AM</div>
                                </div>
                                <div class="stat-item cache-actions">
                                    <button id="refresh-cache-btn" class="refresh-cache-btn">
                                        <i class="fas fa-sync-alt"></i> Refresh Cache
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="suburb-details" id="suburb-details">
                        <div class="no-selection">
                            <i class="fas fa-map-pin"></i>
                            <h2>Suburb Details</h2>
                            <p>Select a suburb on the map to view detailed analysis</p>
                        </div>
                    </div>
                </div>

                <!-- Analytics Page -->
                <div class="page-content" id="analytics">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-chart-bar"></i> Analytics Dashboard</h2>
                    </div>
                    <div class="dashboard-content">
                        <div class="system-status">
                            <div class="status-indicator">
                                <i class="fas fa-circle status-icon warning"></i>
                                <span class="status-text">ML Engine Status: <strong>Limited</strong></span>
                                <div class="status-details">Using cached prediction data. Real-time predictions unavailable.</div>
                            </div>
                            <div class="status-indicator">
                                <i class="fas fa-circle status-icon active"></i>
                                <span class="status-text">Data Pipeline Status: <strong>Active</strong></span>
                                <div class="status-details">Last data refresh: Today at 09:15 AM</div>
                            </div>
                            <div class="status-indicator">
                                <i class="fas fa-circle status-icon inactive"></i>
                                <span class="status-text">OpenAI Integration: <strong>Offline</strong></span>
                                <div class="status-details">Using fallback zoning algorithm. Check API quota.</div>
                            </div>
                        </div>

                        <div class="chart-container">
                            <div class="chart-header">
                                <h3><i class="fas fa-chart-pie"></i> Zone Distribution</h3>
                                <div class="chart-controls">
                                    <button class="chart-control-btn" title="Download Data"><i class="fas fa-download"></i></button>
                                    <button class="chart-control-btn" title="Refresh Data"><i class="fas fa-sync-alt"></i></button>
                                    <select class="chart-filter">
                                        <option value="all">All Regions</option>
                                        <option value="eastern">Eastern Suburbs</option>
                                        <option value="northern">Northern Suburbs</option>
                                        <option value="western">Western Suburbs</option>
                                        <option value="southern">Southern Suburbs</option>
                                    </select>
                                </div>
                            </div>
                            <canvas id="zone-distribution-chart"></canvas>
                            <div class="chart-legend">
                                <div class="legend-item"><span class="legend-color green"></span> Green Zone: <strong id="green-percent">28%</strong></div>
                                <div class="legend-item"><span class="legend-color orange"></span> Orange Zone: <strong id="orange-percent">42%</strong></div>
                                <div class="legend-item"><span class="legend-color red"></span> Red Zone: <strong id="red-percent">30%</strong></div>
                            </div>
                        </div>

                        <div class="chart-container">
                            <div class="chart-header">
                                <h3><i class="fas fa-chart-bar"></i> Key Metrics by Zone</h3>
                                <div class="chart-controls">
                                    <button class="chart-control-btn" title="Download Data"><i class="fas fa-download"></i></button>
                                    <button class="chart-control-btn" title="Refresh Data"><i class="fas fa-sync-alt"></i></button>
                                    <select class="chart-filter">
                                        <option value="all">All Metrics</option>
                                        <option value="growth">Growth</option>
                                        <option value="equity">Equity</option>
                                        <option value="volatility">Volatility</option>
                                        <option value="affordability">Affordability</option>
                                    </select>
                                </div>
                            </div>
                            <canvas id="metrics-by-zone-chart"></canvas>
                            <div class="data-source-info">
                                <i class="fas fa-info-circle"></i> Data Source: Equihome ML Model (XGBoost) | Last Updated: Today at 09:15 AM
                            </div>
                        </div>

                        <div class="chart-container">
                            <div class="chart-header">
                                <h3><i class="fas fa-chart-line"></i> Trend Analysis (12 Month)</h3>
                                <div class="chart-controls">
                                    <button class="chart-control-btn" title="Download Data"><i class="fas fa-download"></i></button>
                                    <button class="chart-control-btn" title="Refresh Data"><i class="fas fa-sync-alt"></i></button>
                                    <select class="chart-filter">
                                        <option value="growth">Growth Rate</option>
                                        <option value="equity">Equity</option>
                                        <option value="volatility">Volatility</option>
                                        <option value="affordability">Affordability</option>
                                    </select>
                                </div>
                            </div>
                            <canvas id="trend-analysis-chart"></canvas>
                            <div class="data-source-info">
                                <i class="fas fa-info-circle"></i> Data Source: Historical Property Data | Last Updated: Today at 09:15 AM
                            </div>
                        </div>

                        <div class="chart-container">
                            <div class="chart-header">
                                <h3><i class="fas fa-map"></i> Geographic Distribution</h3>
                                <div class="chart-controls">
                                    <button class="chart-control-btn" title="Download Data"><i class="fas fa-download"></i></button>
                                    <button class="chart-control-btn" title="Refresh Data"><i class="fas fa-sync-alt"></i></button>
                                    <select class="chart-filter">
                                        <option value="all">All Zones</option>
                                        <option value="green">Green Zones</option>
                                        <option value="orange">Orange Zones</option>
                                        <option value="red">Red Zones</option>
                                    </select>
                                </div>
                            </div>
                            <canvas id="geographic-distribution-chart"></canvas>
                            <div class="data-source-info">
                                <i class="fas fa-info-circle"></i> Data Source: Geospatial Analysis | Last Updated: Today at 09:15 AM
                            </div>
                        </div>

                        <div class="chart-container full-width">
                            <div class="chart-header">
                                <h3><i class="fas fa-table"></i> Performance Metrics Summary</h3>
                                <div class="chart-controls">
                                    <button class="chart-control-btn" title="Download Data"><i class="fas fa-download"></i></button>
                                    <button class="chart-control-btn" title="Refresh Data"><i class="fas fa-sync-alt"></i></button>
                                </div>
                            </div>
                            <div class="metrics-table-wrapper">
                                <table class="metrics-table">
                                    <thead>
                                        <tr>
                                            <th>Metric</th>
                                            <th>Green Zone</th>
                                            <th>Orange Zone</th>
                                            <th>Red Zone</th>
                                            <th>System Average</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Growth Rate (YoY)</td>
                                            <td class="positive">8.5%</td>
                                            <td class="positive">6.2%</td>
                                            <td class="negative">3.8%</td>
                                            <td>6.2%</td>
                                        </tr>
                                        <tr>
                                            <td>Equity</td>
                                            <td class="positive">65.0%</td>
                                            <td class="neutral">52.0%</td>
                                            <td class="negative">38.0%</td>
                                            <td>51.7%</td>
                                        </tr>
                                        <tr>
                                            <td>Volatility</td>
                                            <td class="positive">3.2%</td>
                                            <td class="neutral">5.5%</td>
                                            <td class="negative">7.8%</td>
                                            <td>5.5%</td>
                                        </tr>
                                        <tr>
                                            <td>Affordability</td>
                                            <td class="positive">75.0%</td>
                                            <td class="neutral">62.0%</td>
                                            <td class="negative">48.0%</td>
                                            <td>61.7%</td>
                                        </tr>
                                        <tr>
                                            <td>Infrastructure Rating</td>
                                            <td class="positive">8.5/10</td>
                                            <td class="neutral">6.8/10</td>
                                            <td class="negative">4.5/10</td>
                                            <td>6.6/10</td>
                                        </tr>
                                        <tr>
                                            <td>Model Confidence</td>
                                            <td class="positive">92%</td>
                                            <td class="positive">88%</td>
                                            <td class="neutral">78%</td>
                                            <td>86%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="data-source-info">
                                <i class="fas fa-info-circle"></i> Data Source: Equihome ML Model (XGBoost) | Last Updated: Today at 09:15 AM
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Tables Page -->
                <div class="page-content" id="data-tables">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-table"></i> Data Tables</h2>
                    </div>
                    <div class="dashboard-content">
                        <div class="system-status">
                            <div class="status-indicator">
                                <i class="fas fa-circle status-icon warning"></i>
                                <span class="status-text">Data Pipeline Status: <strong>Limited</strong></span>
                                <div class="status-details">Using cached data. Real-time updates unavailable.</div>
                            </div>
                            <div class="status-indicator">
                                <i class="fas fa-circle status-icon active"></i>
                                <span class="status-text">Database Connection: <strong>Active</strong></span>
                                <div class="status-details">Connected to Equihome TLS Database</div>
                            </div>
                            <div class="refresh-controls">
                                <button class="refresh-btn"><i class="fas fa-sync-alt"></i> Refresh Data</button>
                                <span class="last-updated">Last updated: Today at 09:15 AM</span>
                            </div>
                        </div>

                        <div class="data-table-container">
                            <div class="table-header">
                                <h3><i class="fas fa-map-marker-alt"></i> Suburb Data</h3>
                                <div class="table-controls">
                                    <div class="search-container">
                                        <i class="fas fa-search search-icon"></i>
                                        <input type="text" placeholder="Search suburbs..." class="data-table-search" id="suburb-search">
                                    </div>
                                    <div class="filter-container">
                                        <select class="data-table-filter" id="zone-table-filter">
                                            <option value="all">All Zones</option>
                                            <option value="green">Green Zone</option>
                                            <option value="orange">Orange Zone</option>
                                            <option value="red">Red Zone</option>
                                        </select>
                                        <select class="data-table-filter" id="region-table-filter">
                                            <option value="all">All Regions</option>
                                            <option value="eastern">Eastern Suburbs</option>
                                            <option value="northern">Northern Suburbs</option>
                                            <option value="western">Western Suburbs</option>
                                            <option value="southern">Southern Suburbs</option>
                                        </select>
                                    </div>
                                    <div class="export-container">
                                        <button class="export-btn"><i class="fas fa-download"></i> Export</button>
                                        <select class="export-format">
                                            <option value="csv">CSV</option>
                                            <option value="excel">Excel</option>
                                            <option value="json">JSON</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="data-table-wrapper">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th class="sortable">Suburb <i class="fas fa-sort"></i></th>
                                            <th class="sortable">Region <i class="fas fa-sort"></i></th>
                                            <th class="sortable">Zone <i class="fas fa-sort"></i></th>
                                            <th class="sortable">Growth <i class="fas fa-sort"></i></th>
                                            <th class="sortable">Equity <i class="fas fa-sort"></i></th>
                                            <th class="sortable">Volatility <i class="fas fa-sort"></i></th>
                                            <th class="sortable">Confidence <i class="fas fa-sort"></i></th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="suburb-data-table">
                                        <tr>
                                            <td>Bondi</td>
                                            <td>Eastern</td>
                                            <td><span class="zone-badge green">Green</span></td>
                                            <td class="positive">9.2%</td>
                                            <td>68.5%</td>
                                            <td class="positive">2.8%</td>
                                            <td>95%</td>
                                            <td>
                                                <button class="action-btn" title="View Details"><i class="fas fa-eye"></i></button>
                                                <button class="action-btn" title="View on Map"><i class="fas fa-map-marked-alt"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Mosman</td>
                                            <td>Northern</td>
                                            <td><span class="zone-badge green">Green</span></td>
                                            <td class="positive">8.7%</td>
                                            <td>72.1%</td>
                                            <td class="positive">3.1%</td>
                                            <td>94%</td>
                                            <td>
                                                <button class="action-btn" title="View Details"><i class="fas fa-eye"></i></button>
                                                <button class="action-btn" title="View on Map"><i class="fas fa-map-marked-alt"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Parramatta</td>
                                            <td>Western</td>
                                            <td><span class="zone-badge orange">Orange</span></td>
                                            <td class="positive">6.5%</td>
                                            <td>54.3%</td>
                                            <td class="neutral">5.2%</td>
                                            <td>88%</td>
                                            <td>
                                                <button class="action-btn" title="View Details"><i class="fas fa-eye"></i></button>
                                                <button class="action-btn" title="View on Map"><i class="fas fa-map-marked-alt"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Liverpool</td>
                                            <td>Western</td>
                                            <td><span class="zone-badge red">Red</span></td>
                                            <td class="negative">3.2%</td>
                                            <td>42.1%</td>
                                            <td class="negative">7.8%</td>
                                            <td>82%</td>
                                            <td>
                                                <button class="action-btn" title="View Details"><i class="fas fa-eye"></i></button>
                                                <button class="action-btn" title="View on Map"><i class="fas fa-map-marked-alt"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Manly</td>
                                            <td>Northern</td>
                                            <td><span class="zone-badge green">Green</span></td>
                                            <td class="positive">8.9%</td>
                                            <td>67.8%</td>
                                            <td class="positive">2.9%</td>
                                            <td>93%</td>
                                            <td>
                                                <button class="action-btn" title="View Details"><i class="fas fa-eye"></i></button>
                                                <button class="action-btn" title="View on Map"><i class="fas fa-map-marked-alt"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="pagination">
                                <button class="pagination-btn" disabled><i class="fas fa-chevron-left"></i></button>
                                <button class="pagination-btn active">1</button>
                                <button class="pagination-btn">2</button>
                                <button class="pagination-btn">3</button>
                                <span class="pagination-ellipsis">...</span>
                                <button class="pagination-btn">12</button>
                                <button class="pagination-btn"><i class="fas fa-chevron-right"></i></button>
                                <div class="pagination-info">
                                    Showing 1-5 of 120 suburbs
                                </div>
                            </div>
                        </div>

                        <div class="data-table-container">
                            <div class="table-header">
                                <h3><i class="fas fa-history"></i> Historical Data</h3>
                                <div class="table-controls">
                                    <div class="search-container">
                                        <i class="fas fa-search search-icon"></i>
                                        <input type="text" placeholder="Search..." class="data-table-search">
                                    </div>
                                    <div class="filter-container">
                                        <select class="data-table-filter">
                                            <option value="all">All Time Periods</option>
                                            <option value="1m">Last Month</option>
                                            <option value="3m">Last 3 Months</option>
                                            <option value="6m">Last 6 Months</option>
                                            <option value="1y">Last Year</option>
                                        </select>
                                    </div>
                                    <div class="export-container">
                                        <button class="export-btn"><i class="fas fa-download"></i> Export</button>
                                    </div>
                                </div>
                            </div>
                            <div class="data-table-wrapper">
                                <div class="data-unavailable">
                                    <i class="fas fa-database"></i>
                                    <h4>Historical Data Unavailable</h4>
                                    <p>The historical data service is currently offline. Please try again later or contact system administrator.</p>
                                    <button class="retry-btn"><i class="fas fa-sync-alt"></i> Retry Connection</button>
                                </div>
                            </div>
                        </div>

                        <div class="data-table-container">
                            <div class="table-header">
                                <h3><i class="fas fa-chart-line"></i> Prediction Accuracy</h3>
                                <div class="table-controls">
                                    <div class="filter-container">
                                        <select class="data-table-filter">
                                            <option value="all">All Models</option>
                                            <option value="xgboost">XGBoost</option>
                                            <option value="randomforest">Random Forest</option>
                                            <option value="neuralnet">Neural Network</option>
                                        </select>
                                    </div>
                                    <div class="export-container">
                                        <button class="export-btn"><i class="fas fa-download"></i> Export</button>
                                    </div>
                                </div>
                            </div>
                            <div class="data-table-wrapper">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Model</th>
                                            <th>Accuracy</th>
                                            <th>Precision</th>
                                            <th>Recall</th>
                                            <th>F1 Score</th>
                                            <th>Last Trained</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>XGBoost</strong></td>
                                            <td class="positive">92.5%</td>
                                            <td class="positive">91.2%</td>
                                            <td class="positive">93.8%</td>
                                            <td class="positive">92.5%</td>
                                            <td>2023-04-01</td>
                                            <td><span class="status-badge active">Active</span></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Random Forest</strong></td>
                                            <td class="positive">89.7%</td>
                                            <td class="positive">88.3%</td>
                                            <td class="positive">90.1%</td>
                                            <td class="positive">89.2%</td>
                                            <td>2023-03-15</td>
                                            <td><span class="status-badge inactive">Inactive</span></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Neural Network</strong></td>
                                            <td class="neutral">85.3%</td>
                                            <td class="neutral">84.7%</td>
                                            <td class="neutral">86.2%</td>
                                            <td class="neutral">85.4%</td>
                                            <td>2023-02-28</td>
                                            <td><span class="status-badge inactive">Inactive</span></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Gradient Boosting</strong></td>
                                            <td class="neutral">87.9%</td>
                                            <td class="neutral">86.5%</td>
                                            <td class="positive">89.3%</td>
                                            <td class="neutral">87.9%</td>
                                            <td>2023-02-15</td>
                                            <td><span class="status-badge inactive">Inactive</span></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Ensemble (Weighted)</strong></td>
                                            <td class="positive">93.1%</td>
                                            <td class="positive">92.8%</td>
                                            <td class="positive">93.5%</td>
                                            <td class="positive">93.1%</td>
                                            <td>N/A</td>
                                            <td><span class="status-badge pending">Planned</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="data-source-info">
                                <i class="fas fa-info-circle"></i> Data Source: Model Evaluation Pipeline | Last Updated: Today at 09:15 AM
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other pages with placeholder content -->
                <div class="page-content" id="advanced-search">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-search"></i> Advanced Search</h2>
                    </div>
                    <div class="dashboard-content">
                        <p>Advanced search functionality coming soon...</p>
                    </div>
                </div>

                <div class="page-content" id="ml-models">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-brain"></i> ML Models</h2>
                    </div>
                    <div class="dashboard-content">
                        <div class="system-status">
                            <div class="status-indicator">
                                <i class="fas fa-circle status-icon warning"></i>
                                <span class="status-text">ML Engine Status: <strong>Limited</strong></span>
                                <div class="status-details">Using cached prediction data. Real-time predictions unavailable.</div>
                            </div>
                            <div class="status-indicator">
                                <i class="fas fa-circle status-icon active"></i>
                                <span class="status-text">XGBoost Model: <strong>Active</strong></span>
                                <div class="status-details">Version 1.2.3 | Last Trained: 2023-04-01</div>
                            </div>
                            <div class="status-indicator">
                                <i class="fas fa-circle status-icon inactive"></i>
                                <span class="status-text">GPU Acceleration: <strong>Offline</strong></span>
                                <div class="status-details">Using CPU fallback. Check GPU availability.</div>
                            </div>
                        </div>

                        <div class="model-overview-container">
                            <div class="model-card active">
                                <div class="model-card-header">
                                    <h3><i class="fas fa-star"></i> XGBoost</h3>
                                    <span class="model-status active">Active</span>
                                </div>
                                <div class="model-card-body">
                                    <div class="model-metrics">
                                        <div class="model-metric">
                                            <span class="metric-label">Accuracy</span>
                                            <span class="metric-value positive">92.5%</span>
                                        </div>
                                        <div class="model-metric">
                                            <span class="metric-label">F1 Score</span>
                                            <span class="metric-value positive">92.5%</span>
                                        </div>
                                        <div class="model-metric">
                                            <span class="metric-label">Inference Time</span>
                                            <span class="metric-value">45ms</span>
                                        </div>
                                    </div>
                                    <div class="model-description">
                                        <p>Primary model for suburb classification. Trained on 5 years of historical data with 25 features.</p>
                                    </div>
                                </div>
                                <div class="model-card-footer">
                                    <button class="model-btn"><i class="fas fa-cog"></i> Configure</button>
                                    <button class="model-btn"><i class="fas fa-chart-line"></i> Performance</button>
                                    <button class="model-btn"><i class="fas fa-code"></i> API</button>
                                </div>
                            </div>

                            <div class="model-card">
                                <div class="model-card-header">
                                    <h3><i class="fas fa-tree"></i> Random Forest</h3>
                                    <span class="model-status inactive">Inactive</span>
                                </div>
                                <div class="model-card-body">
                                    <div class="model-metrics">
                                        <div class="model-metric">
                                            <span class="metric-label">Accuracy</span>
                                            <span class="metric-value positive">89.7%</span>
                                        </div>
                                        <div class="model-metric">
                                            <span class="metric-label">F1 Score</span>
                                            <span class="metric-value positive">89.2%</span>
                                        </div>
                                        <div class="model-metric">
                                            <span class="metric-label">Inference Time</span>
                                            <span class="metric-value">62ms</span>
                                        </div>
                                    </div>
                                    <div class="model-description">
                                        <p>Secondary model for suburb classification. Used for validation and ensemble methods.</p>
                                    </div>
                                </div>
                                <div class="model-card-footer">
                                    <button class="model-btn"><i class="fas fa-play"></i> Activate</button>
                                    <button class="model-btn"><i class="fas fa-chart-line"></i> Performance</button>
                                    <button class="model-btn"><i class="fas fa-code"></i> API</button>
                                </div>
                            </div>

                            <div class="model-card">
                                <div class="model-card-header">
                                    <h3><i class="fas fa-network-wired"></i> Neural Network</h3>
                                    <span class="model-status inactive">Inactive</span>
                                </div>
                                <div class="model-card-body">
                                    <div class="model-metrics">
                                        <div class="model-metric">
                                            <span class="metric-label">Accuracy</span>
                                            <span class="metric-value neutral">85.3%</span>
                                        </div>
                                        <div class="model-metric">
                                            <span class="metric-label">F1 Score</span>
                                            <span class="metric-value neutral">85.4%</span>
                                        </div>
                                        <div class="model-metric">
                                            <span class="metric-label">Inference Time</span>
                                            <span class="metric-value">120ms</span>
                                        </div>
                                    </div>
                                    <div class="model-description">
                                        <p>Deep learning model for complex pattern recognition. Requires GPU for optimal performance.</p>
                                    </div>
                                </div>
                                <div class="model-card-footer">
                                    <button class="model-btn"><i class="fas fa-play"></i> Activate</button>
                                    <button class="model-btn"><i class="fas fa-chart-line"></i> Performance</button>
                                    <button class="model-btn"><i class="fas fa-code"></i> API</button>
                                </div>
                            </div>

                            <div class="model-card">
                                <div class="model-card-header">
                                    <h3><i class="fas fa-layer-group"></i> Ensemble</h3>
                                    <span class="model-status pending">Planned</span>
                                </div>
                                <div class="model-card-body">
                                    <div class="model-metrics">
                                        <div class="model-metric">
                                            <span class="metric-label">Accuracy</span>
                                            <span class="metric-value positive">93.1%</span>
                                        </div>
                                        <div class="model-metric">
                                            <span class="metric-label">F1 Score</span>
                                            <span class="metric-value positive">93.1%</span>
                                        </div>
                                        <div class="model-metric">
                                            <span class="metric-label">Inference Time</span>
                                            <span class="metric-value">150ms</span>
                                        </div>
                                    </div>
                                    <div class="model-description">
                                        <p>Weighted ensemble of all models. Combines strengths of individual models for optimal performance.</p>
                                    </div>
                                </div>
                                <div class="model-card-footer">
                                    <button class="model-btn disabled"><i class="fas fa-tools"></i> In Development</button>
                                    <button class="model-btn"><i class="fas fa-info-circle"></i> Details</button>
                                </div>
                            </div>
                        </div>

                        <div class="model-details-container">
                            <div class="model-details-header">
                                <h3><i class="fas fa-star"></i> XGBoost Model Details</h3>
                                <div class="model-details-actions">
                                    <button class="model-details-btn"><i class="fas fa-download"></i> Export Model</button>
                                    <button class="model-details-btn"><i class="fas fa-sync-alt"></i> Retrain</button>
                                    <button class="model-details-btn"><i class="fas fa-cog"></i> Settings</button>
                                </div>
                            </div>

                            <div class="model-details-content">
                                <div class="model-details-section">
                                    <h4>Model Configuration</h4>
                                    <div class="model-params">
                                        <div class="model-param">
                                            <span class="param-name">max_depth</span>
                                            <span class="param-value">6</span>
                                        </div>
                                        <div class="model-param">
                                            <span class="param-name">learning_rate</span>
                                            <span class="param-value">0.1</span>
                                        </div>
                                        <div class="model-param">
                                            <span class="param-name">n_estimators</span>
                                            <span class="param-value">100</span>
                                        </div>
                                        <div class="model-param">
                                            <span class="param-name">subsample</span>
                                            <span class="param-value">0.8</span>
                                        </div>
                                        <div class="model-param">
                                            <span class="param-name">colsample_bytree</span>
                                            <span class="param-value">0.8</span>
                                        </div>
                                        <div class="model-param">
                                            <span class="param-name">objective</span>
                                            <span class="param-value">multi:softprob</span>
                                        </div>
                                        <div class="model-param">
                                            <span class="param-name">num_class</span>
                                            <span class="param-value">3</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="model-details-section">
                                    <h4>Feature Importance</h4>
                                    <div class="feature-importance-chart">
                                        <canvas id="feature-importance-chart"></canvas>
                                    </div>
                                </div>

                                <div class="model-details-section">
                                    <h4>Confusion Matrix</h4>
                                    <div class="confusion-matrix">
                                        <table class="confusion-matrix-table">
                                            <thead>
                                                <tr>
                                                    <th></th>
                                                    <th>Predicted Green</th>
                                                    <th>Predicted Orange</th>
                                                    <th>Predicted Red</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><strong>Actual Green</strong></td>
                                                    <td class="matrix-correct">94%</td>
                                                    <td class="matrix-incorrect">5%</td>
                                                    <td class="matrix-incorrect">1%</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Actual Orange</strong></td>
                                                    <td class="matrix-incorrect">6%</td>
                                                    <td class="matrix-correct">91%</td>
                                                    <td class="matrix-incorrect">3%</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Actual Red</strong></td>
                                                    <td class="matrix-incorrect">1%</td>
                                                    <td class="matrix-incorrect">7%</td>
                                                    <td class="matrix-correct">92%</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="model-details-section">
                                    <h4>Training History</h4>
                                    <div class="training-history-chart">
                                        <canvas id="training-history-chart"></canvas>
                                    </div>
                                </div>

                                <div class="model-details-section">
                                    <h4>API Integration</h4>
                                    <div class="api-code-block">
                                        <pre><code>// Example API request
POST /api/v1/predict
Content-Type: application/json

{
  "suburb": "Bondi",
  "metrics": {
    "growth": 9.2,
    "volatility": 2.8,
    "equity": 68.5,
    "liquidity": 18,
    "crimeRate": 2.1,
    "affordability": 72.3,
    "infrastructure": 8.7,
    "schoolsRating": 8.5,
    "employmentRate": 96.2,
    "populationGrowth": 3.1
  }
}</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="model-pipeline-container">
                            <div class="pipeline-header">
                                <h3><i class="fas fa-project-diagram"></i> ML Pipeline</h3>
                            </div>
                            <div class="pipeline-diagram">
                                <div class="pipeline-stage">
                                    <div class="pipeline-stage-icon">
                                        <i class="fas fa-database"></i>
                                    </div>
                                    <div class="pipeline-stage-content">
                                        <h4>Data Collection</h4>
                                        <p>Gathering data from multiple sources</p>
                                        <span class="pipeline-status active">Active</span>
                                    </div>
                                </div>
                                <div class="pipeline-connector"></div>
                                <div class="pipeline-stage">
                                    <div class="pipeline-stage-icon">
                                        <i class="fas fa-broom"></i>
                                    </div>
                                    <div class="pipeline-stage-content">
                                        <h4>Data Preprocessing</h4>
                                        <p>Cleaning and transforming raw data</p>
                                        <span class="pipeline-status active">Active</span>
                                    </div>
                                </div>
                                <div class="pipeline-connector"></div>
                                <div class="pipeline-stage">
                                    <div class="pipeline-stage-icon">
                                        <i class="fas fa-cogs"></i>
                                    </div>
                                    <div class="pipeline-stage-content">
                                        <h4>Feature Engineering</h4>
                                        <p>Creating and selecting relevant features</p>
                                        <span class="pipeline-status active">Active</span>
                                    </div>
                                </div>
                                <div class="pipeline-connector"></div>
                                <div class="pipeline-stage">
                                    <div class="pipeline-stage-icon">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <div class="pipeline-stage-content">
                                        <h4>Model Training</h4>
                                        <p>Training and validating ML models</p>
                                        <span class="pipeline-status warning">Limited</span>
                                    </div>
                                </div>
                                <div class="pipeline-connector"></div>
                                <div class="pipeline-stage">
                                    <div class="pipeline-stage-icon">
                                        <i class="fas fa-robot"></i>
                                    </div>
                                    <div class="pipeline-stage-content">
                                        <h4>AI Refinement</h4>
                                        <p>OpenAI-based decision refinement</p>
                                        <span class="pipeline-status inactive">Offline</span>
                                    </div>
                                </div>
                                <div class="pipeline-connector"></div>
                                <div class="pipeline-stage">
                                    <div class="pipeline-stage-icon">
                                        <i class="fas fa-map-marked-alt"></i>
                                    </div>
                                    <div class="pipeline-stage-content">
                                        <h4>Visualization</h4>
                                        <p>Generating map visualizations</p>
                                        <span class="pipeline-status active">Active</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="page-content" id="ai-layer">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-robot"></i> AI Layer</h2>
                    </div>
                    <div class="dashboard-content">
                        <div class="ai-overview">
                            <div class="ai-status-card">
                                <div class="ai-status-header">
                                    <h3>OpenAI Integration Status</h3>
                                    <div class="health-status-badge warning">Limited</div>
                                </div>
                                <div class="ai-status-body">
                                    <div class="ai-metric">
                                        <div class="ai-metric-label">Model</div>
                                        <div class="ai-metric-value">GPT-4</div>
                                    </div>
                                    <div class="ai-metric">
                                        <div class="ai-metric-label">API Status</div>
                                        <div class="ai-metric-value">Connected</div>
                                    </div>
                                    <div class="ai-metric">
                                        <div class="ai-metric-label">Rate Limit</div>
                                        <div class="ai-metric-value warning">80% Used</div>
                                    </div>
                                    <div class="ai-metric">
                                        <div class="ai-metric-label">Last Sync</div>
                                        <div class="ai-metric-value">2023-04-15 14:30:12</div>
                                    </div>
                                </div>
                                <div class="ai-status-footer">
                                    <button class="ai-action-btn"><i class="fas fa-sync-alt"></i> Refresh Status</button>
                                    <button class="ai-action-btn"><i class="fas fa-cog"></i> Configure</button>
                                </div>
                            </div>

                            <div class="ai-status-card">
                                <div class="ai-status-header">
                                    <h3>Decision Statistics</h3>
                                </div>
                                <div class="ai-status-body">
                                    <div class="ai-metric">
                                        <div class="ai-metric-label">Total Decisions</div>
                                        <div class="ai-metric-value">342</div>
                                    </div>
                                    <div class="ai-metric">
                                        <div class="ai-metric-label">ML Overrides</div>
                                        <div class="ai-metric-value">47 (13.7%)</div>
                                    </div>
                                    <div class="ai-metric">
                                        <div class="ai-metric-label">Confidence Score</div>
                                        <div class="ai-metric-value">
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 92%;"></div>
                                            </div>
                                            <span>92%</span>
                                        </div>
                                    </div>
                                    <div class="ai-metric">
                                        <div class="ai-metric-label">Processing Time</div>
                                        <div class="ai-metric-value">487ms (avg)</div>
                                    </div>
                                </div>
                                <div class="ai-status-footer">
                                    <button class="ai-action-btn"><i class="fas fa-chart-bar"></i> View Details</button>
                                    <button class="ai-action-btn"><i class="fas fa-download"></i> Export Data</button>
                                </div>
                            </div>

                            <div class="ai-status-card">
                                <div class="ai-status-header">
                                    <h3>Zone Distribution</h3>
                                </div>
                                <div class="ai-status-body">
                                    <div class="zone-distribution-chart">
                                        <canvas id="zone-distribution-chart" height="200"></canvas>
                                    </div>
                                </div>
                                <div class="ai-status-footer">
                                    <button class="ai-action-btn"><i class="fas fa-expand"></i> Expand</button>
                                    <button class="ai-action-btn"><i class="fas fa-history"></i> View History</button>
                                </div>
                            </div>
                        </div>

                        <div class="ai-details">
                            <div class="ai-tabs">
                                <button class="ai-tab active" data-tab="decision-making">Decision Making</button>
                                <button class="ai-tab" data-tab="prompts">Prompts</button>
                                <button class="ai-tab" data-tab="parameters">Parameters</button>
                                <button class="ai-tab" data-tab="logs">Logs</button>
                            </div>

                            <div class="ai-tab-content active" id="decision-making-tab">
                                <div class="decision-making-container">
                                    <div class="decision-making-header">
                                        <h3>AI Decision Making Process</h3>
                                        <p>The AI layer refines ML model predictions using business context and domain knowledge.</p>
                                    </div>

                                    <div class="decision-flow">
                                        <div class="decision-step">
                                            <div class="decision-step-number">1</div>
                                            <div class="decision-step-content">
                                                <h4>ML Prediction</h4>
                                                <p>Initial zone prediction from XGBoost model based on quantitative metrics.</p>
                                            </div>
                                        </div>
                                        <div class="decision-flow-arrow"><i class="fas fa-arrow-down"></i></div>
                                        <div class="decision-step">
                                            <div class="decision-step-number">2</div>
                                            <div class="decision-step-content">
                                                <h4>Context Enrichment</h4>
                                                <p>Suburb data is enriched with business context and market insights.</p>
                                            </div>
                                        </div>
                                        <div class="decision-flow-arrow"><i class="fas fa-arrow-down"></i></div>
                                        <div class="decision-step">
                                            <div class="decision-step-number">3</div>
                                            <div class="decision-step-content">
                                                <h4>AI Analysis</h4>
                                                <p>GPT-4 analyzes the enriched data using a specialized prompt template.</p>
                                            </div>
                                        </div>
                                        <div class="decision-flow-arrow"><i class="fas fa-arrow-down"></i></div>
                                        <div class="decision-step">
                                            <div class="decision-step-number">4</div>
                                            <div class="decision-step-content">
                                                <h4>Decision Refinement</h4>
                                                <p>AI confirms or overrides the ML prediction based on holistic analysis.</p>
                                            </div>
                                        </div>
                                        <div class="decision-flow-arrow"><i class="fas fa-arrow-down"></i></div>
                                        <div class="decision-step">
                                            <div class="decision-step-number">5</div>
                                            <div class="decision-step-content">
                                                <h4>Final Zone Assignment</h4>
                                                <p>The refined zone classification is stored in the system.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="decision-example">
                                        <h4>Example Decision</h4>
                                        <div class="decision-example-content">
                                            <div class="decision-example-suburb">
                                                <h5>Suburb: Bondi</h5>
                                                <div class="decision-example-metrics">
                                                    <div class="example-metric">
                                                        <span class="metric-name">Growth:</span>
                                                        <span class="metric-value">12.5%</span>
                                                    </div>
                                                    <div class="example-metric">
                                                        <span class="metric-name">Equity:</span>
                                                        <span class="metric-value">68%</span>
                                                    </div>
                                                    <div class="example-metric">
                                                        <span class="metric-name">Volatility:</span>
                                                        <span class="metric-value">3.2%</span>
                                                    </div>
                                                    <div class="example-metric">
                                                        <span class="metric-name">ML Score:</span>
                                                        <span class="metric-value">78</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="decision-example-process">
                                                <div class="example-step">
                                                    <div class="example-step-label">ML Prediction:</div>
                                                    <div class="example-step-value">Green Zone (78% confidence)</div>
                                                </div>
                                                <div class="example-step">
                                                    <div class="example-step-label">AI Analysis:</div>
                                                    <div class="example-step-value">"Bondi shows strong growth metrics and high equity position. Located in Eastern Suburbs with excellent infrastructure and high demand. Historical performance is consistent with low volatility."</div>
                                                </div>
                                                <div class="example-step">
                                                    <div class="example-step-label">AI Decision:</div>
                                                    <div class="example-step-value">Confirm Green Zone (94% confidence)</div>
                                                </div>
                                                <div class="example-step">
                                                    <div class="example-step-label">Reasoning:</div>
                                                    <div class="example-step-value">"Bondi aligns with Equihome's green zone criteria: high equity, strong market fundamentals, low crime, high infrastructure, high demand, and strong immigration. The quantitative metrics support this classification, and qualitative factors reinforce the decision."</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="ai-tab-content" id="prompts-tab">
                                <div class="prompts-container">
                                    <div class="prompts-header">
                                        <h3>AI Prompt Templates</h3>
                                        <p>These templates guide the AI in making consistent and accurate zoning decisions.</p>
                                    </div>

                                    <div class="prompt-template">
                                        <div class="prompt-template-header">
                                            <h4>Zone Classification Prompt</h4>
                                            <div class="prompt-actions">
                                                <button class="prompt-action-btn"><i class="fas fa-edit"></i></button>
                                                <button class="prompt-action-btn"><i class="fas fa-copy"></i></button>
                                            </div>
                                        </div>
                                        <div class="prompt-template-content">
                                            <pre>You are an expert real estate analyst for Equihome Partners, tasked with classifying Sydney suburbs into Green, Orange, or Red zones based on investment potential.

Green zones: High equity, high prices, strong market fundamentals, low crime, high infrastructure, high demand, strong immigration
Orange zones: Moderate equity, stable prices, average market fundamentals, moderate crime, adequate infrastructure, steady demand
Red zones: Low equity, declining prices, weak market fundamentals, high crime, poor infrastructure, low demand, population decline

Suburb: {{suburb_name}}
Region: {{region}}
Metrics:
- Growth: {{growth}}%
- Equity: {{equity}}%
- Volatility: {{volatility}}%
- Liquidity: {{liquidity}}%
- Crime Rate: {{crime_rate}}/10
- Affordability: {{affordability}}/100
- Infrastructure: {{infrastructure}}/10
- Schools Rating: {{schools_rating}}/10
- Employment Rate: {{employment_rate}}%
- Population Growth: {{population_growth}}%

ML Model Prediction: {{ml_prediction}} (Confidence: {{ml_confidence}}%)

Analyze the suburb based on these metrics and the criteria for each zone. Provide your analysis and final zone classification (Green, Orange, or Red) with confidence level.

Your response should follow this format:
Analysis: [Your detailed analysis]
Decision: [Zone classification]
Confidence: [Confidence percentage]
Reasoning: [Explanation for your decision]</pre>
                                        </div>
                                    </div>

                                    <div class="prompt-template">
                                        <div class="prompt-template-header">
                                            <h4>Market Trend Analysis Prompt</h4>
                                            <div class="prompt-actions">
                                                <button class="prompt-action-btn"><i class="fas fa-edit"></i></button>
                                                <button class="prompt-action-btn"><i class="fas fa-copy"></i></button>
                                            </div>
                                        </div>
                                        <div class="prompt-template-content">
                                            <pre>You are an expert real estate market analyst for Equihome Partners. Analyze the following market trend data for {{suburb_name}} and provide insights on future performance.

Historical Data (Last 5 Years):
- Price Growth: {{historical_growth}}
- Sales Volume: {{historical_volume}}
- Days on Market: {{historical_dom}}
- Inventory Levels: {{historical_inventory}}

Current Market Indicators:
- Median Price: ${{median_price}}
- Auction Clearance Rate: {{clearance_rate}}%
- Rental Yield: {{rental_yield}}%
- Vacancy Rate: {{vacancy_rate}}%

Macroeconomic Factors:
- Interest Rates: {{interest_rates}}%
- Unemployment Rate: {{unemployment_rate}}%
- Inflation Rate: {{inflation_rate}}%
- GDP Growth: {{gdp_growth}}%

Provide a comprehensive analysis of the market trends for this suburb, including:
1. Current market status (buyer's market, seller's market, balanced)
2. 12-month price growth forecast with confidence level
3. Key drivers influencing the market
4. Potential risks or opportunities
5. Recommendation for investment strategy</pre>
                                        </div>
                                    </div>

                                    <div class="prompt-actions-footer">
                                        <button class="ai-action-btn"><i class="fas fa-plus"></i> Add New Template</button>
                                        <button class="ai-action-btn"><i class="fas fa-history"></i> View Version History</button>
                                    </div>
                                </div>
                            </div>

                            <div class="ai-tab-content" id="parameters-tab">
                                <div class="parameters-container">
                                    <div class="parameters-header">
                                        <h3>AI Model Parameters</h3>
                                        <button class="ai-action-btn"><i class="fas fa-save"></i> Save Changes</button>
                                    </div>

                                    <div class="parameters-grid">
                                        <div class="parameter-card">
                                            <h4>Model Configuration</h4>
                                            <div class="parameter-control">
                                                <label for="ai-model">OpenAI Model:</label>
                                                <select id="ai-model" class="parameter-select">
                                                    <option value="gpt-4">GPT-4</option>
                                                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                                </select>
                                            </div>
                                            <div class="parameter-control">
                                                <label for="max-tokens">Max Tokens:</label>
                                                <input type="number" id="max-tokens" value="2048" class="parameter-input">
                                            </div>
                                            <div class="parameter-control">
                                                <label for="temperature">Temperature:</label>
                                                <div class="range-with-value">
                                                    <input type="range" id="temperature" min="0" max="1" step="0.1" value="0.2" class="parameter-range">
                                                    <span class="range-value">0.2</span>
                                                </div>
                                            </div>
                                            <div class="parameter-control">
                                                <label for="top-p">Top P:</label>
                                                <div class="range-with-value">
                                                    <input type="range" id="top-p" min="0" max="1" step="0.1" value="0.9" class="parameter-range">
                                                    <span class="range-value">0.9</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="parameter-card">
                                            <h4>Decision Thresholds</h4>
                                            <div class="parameter-control">
                                                <label for="confidence-threshold">Minimum Confidence:</label>
                                                <div class="range-with-value">
                                                    <input type="range" id="confidence-threshold" min="50" max="95" value="75" class="parameter-range">
                                                    <span class="range-value">75%</span>
                                                </div>
                                            </div>
                                            <div class="parameter-control">
                                                <label for="override-threshold">Override Threshold:</label>
                                                <div class="range-with-value">
                                                    <input type="range" id="override-threshold" min="5" max="30" value="15" class="parameter-range">
                                                    <span class="range-value">15%</span>
                                                </div>
                                            </div>
                                            <div class="parameter-control checkbox-control">
                                                <input type="checkbox" id="allow-overrides" class="parameter-checkbox" checked>
                                                <label for="allow-overrides">Allow ML Overrides</label>
                                            </div>
                                            <div class="parameter-control checkbox-control">
                                                <input type="checkbox" id="require-reasoning" class="parameter-checkbox" checked>
                                                <label for="require-reasoning">Require Reasoning</label>
                                            </div>
                                        </div>

                                        <div class="parameter-card">
                                            <h4>API Configuration</h4>
                                            <div class="parameter-control">
                                                <label for="api-key">API Key:</label>
                                                <div class="password-input">
                                                    <input type="password" id="api-key" value="sk-*************************" class="parameter-input">
                                                    <button class="toggle-password"><i class="fas fa-eye"></i></button>
                                                </div>
                                            </div>
                                            <div class="parameter-control">
                                                <label for="api-org">Organization ID:</label>
                                                <input type="text" id="api-org" value="org-*****************" class="parameter-input">
                                            </div>
                                            <div class="parameter-control">
                                                <label for="request-timeout">Request Timeout (ms):</label>
                                                <input type="number" id="request-timeout" value="30000" class="parameter-input">
                                            </div>
                                            <div class="parameter-control checkbox-control">
                                                <input type="checkbox" id="enable-retry" class="parameter-checkbox" checked>
                                                <label for="enable-retry">Enable Auto-Retry</label>
                                            </div>
                                        </div>

                                        <div class="parameter-card">
                                            <h4>Scheduling</h4>
                                            <div class="parameter-control">
                                                <label for="processing-mode">Processing Mode:</label>
                                                <select id="processing-mode" class="parameter-select">
                                                    <option value="batch">Batch Processing</option>
                                                    <option value="realtime">Real-time</option>
                                                    <option value="hybrid" selected>Hybrid</option>
                                                </select>
                                            </div>
                                            <div class="parameter-control">
                                                <label for="batch-size">Batch Size:</label>
                                                <input type="number" id="batch-size" value="50" class="parameter-input">
                                            </div>
                                            <div class="parameter-control">
                                                <label for="schedule-time">Schedule Time:</label>
                                                <input type="time" id="schedule-time" value="02:00" class="parameter-input">
                                            </div>
                                            <div class="parameter-control checkbox-control">
                                                <input type="checkbox" id="enable-schedule" class="parameter-checkbox" checked>
                                                <label for="enable-schedule">Enable Scheduled Processing</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="ai-tab-content" id="logs-tab">
                                <div class="ai-logs-container">
                                    <div class="logs-header">
                                        <div class="logs-filters">
                                            <select class="logs-filter">
                                                <option value="all">All Logs</option>
                                                <option value="error">Errors</option>
                                                <option value="warning">Warnings</option>
                                                <option value="info">Info</option>
                                            </select>
                                            <select class="logs-filter">
                                                <option value="all">All Operations</option>
                                                <option value="prediction">Predictions</option>
                                                <option value="override">Overrides</option>
                                                <option value="api">API Calls</option>
                                            </select>
                                            <input type="text" placeholder="Search logs..." class="logs-search">
                                        </div>
                                        <div class="logs-actions">
                                            <button class="logs-action-btn"><i class="fas fa-sync-alt"></i> Refresh</button>
                                            <button class="logs-action-btn"><i class="fas fa-download"></i> Export</button>
                                        </div>
                                    </div>

                                    <div class="logs-container">
                                        <div class="log-entry info">
                                            <div class="log-time">2023-04-15 14:32:45</div>
                                            <div class="log-operation">Prediction</div>
                                            <div class="log-level info">INFO</div>
                                            <div class="log-message">Successfully processed prediction for suburb: Bondi (Green Zone, Confidence: 94%)</div>
                                        </div>
                                        <div class="log-entry warning">
                                            <div class="log-time">2023-04-15 14:30:12</div>
                                            <div class="log-operation">API</div>
                                            <div class="log-level warning">WARNING</div>
                                            <div class="log-message">OpenAI API rate limit approaching (80% of quota used)</div>
                                        </div>
                                        <div class="log-entry info">
                                            <div class="log-time">2023-04-15 14:28:56</div>
                                            <div class="log-operation">Override</div>
                                            <div class="log-level info">INFO</div>
                                            <div class="log-message">AI overrode ML prediction for suburb: Marrickville (ML: Orange  AI: Green, Confidence: 87%)</div>
                                        </div>
                                        <div class="log-entry error">
                                            <div class="log-time">2023-04-15 14:25:33</div>
                                            <div class="log-operation">API</div>
                                            <div class="log-level error">ERROR</div>
                                            <div class="log-message">OpenAI API request failed: Request timed out after 30000ms</div>
                                        </div>
                                        <div class="log-entry info">
                                            <div class="log-time">2023-04-15 14:22:18</div>
                                            <div class="log-operation">Prediction</div>
                                            <div class="log-level info">INFO</div>
                                            <div class="log-message">Successfully processed prediction for suburb: Manly (Green Zone, Confidence: 92%)</div>
                                        </div>
                                        <div class="log-entry info">
                                            <div class="log-time">2023-04-15 14:20:05</div>
                                            <div class="log-operation">Override</div>
                                            <div class="log-level info">INFO</div>
                                            <div class="log-message">AI overrode ML prediction for suburb: Liverpool (ML: Orange  AI: Red, Confidence: 89%)</div>
                                        </div>
                                    </div>

                                    <div class="logs-pagination">
                                        <button class="pagination-btn" disabled><i class="fas fa-chevron-left"></i></button>
                                        <span class="pagination-info">Page 1 of 12</span>
                                        <button class="pagination-btn"><i class="fas fa-chevron-right"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="page-content" id="data-sources">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-database"></i> Data Sources</h2>
                    </div>
                    <div class="dashboard-content">
                        <p>Data Sources dashboard coming soon...</p>
                    </div>
                </div>

                <div class="page-content" id="settings">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-cogs"></i> Settings</h2>
                    </div>
                    <div class="dashboard-content settings-dashboard">
                        <div class="settings-section">
                            <div class="settings-header">
                                <h3><i class="fas fa-map"></i> Map Settings</h3>
                                <button class="settings-save-btn"><i class="fas fa-save"></i> Save Changes</button>
                            </div>
                            <div class="settings-grid">
                                <div class="settings-card">
                                    <h4>Map Display</h4>
                                    <div class="settings-control">
                                        <label for="map-style">Map Style:</label>
                                        <select id="map-style" class="settings-select">
                                            <option value="streets" selected>Streets</option>
                                            <option value="satellite">Satellite</option>
                                            <option value="light">Light</option>
                                            <option value="dark">Dark</option>
                                            <option value="outdoors">Outdoors</option>
                                        </select>
                                    </div>
                                    <div class="settings-control">
                                        <label for="default-zoom">Default Zoom Level:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="default-zoom" min="8" max="15" value="10" class="settings-range">
                                            <span class="range-value">10</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="polygon-opacity">Polygon Opacity:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="polygon-opacity" min="0.1" max="1" step="0.1" value="0.7" class="settings-range">
                                            <span class="range-value">0.7</span>
                                        </div>
                                    </div>
                                    <div class="settings-control checkbox-control">
                                        <input type="checkbox" id="show-labels" class="settings-checkbox" checked>
                                        <label for="show-labels">Show Suburb Labels</label>
                                    </div>
                                </div>

                                <div class="settings-card">
                                    <h4>Zone Colors</h4>
                                    <div class="settings-control">
                                        <label for="green-zone-color">Green Zone Color:</label>
                                        <div class="color-picker-container">
                                            <input type="color" id="green-zone-color" value="#4CAF50" class="settings-color">
                                            <input type="text" value="#4CAF50" class="color-text-input">
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="orange-zone-color">Orange Zone Color:</label>
                                        <div class="color-picker-container">
                                            <input type="color" id="orange-zone-color" value="#FF9800" class="settings-color">
                                            <input type="text" value="#FF9800" class="color-text-input">
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="red-zone-color">Red Zone Color:</label>
                                        <div class="color-picker-container">
                                            <input type="color" id="red-zone-color" value="#F44336" class="settings-color">
                                            <input type="text" value="#F44336" class="color-text-input">
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="unclassified-color">Unclassified Color:</label>
                                        <div class="color-picker-container">
                                            <input type="color" id="unclassified-color" value="#9E9E9E" class="settings-color">
                                            <input type="text" value="#9E9E9E" class="color-text-input">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="settings-header">
                                <h3><i class="fas fa-brain"></i> ML Model Settings</h3>
                                <button class="settings-save-btn"><i class="fas fa-save"></i> Save Changes</button>
                            </div>
                            <div class="settings-grid">
                                <div class="settings-card">
                                    <h4>Model Selection</h4>
                                    <div class="settings-control">
                                        <label for="active-model">Active Model:</label>
                                        <select id="active-model" class="settings-select">
                                            <option value="xgboost" selected>XGBoost</option>
                                            <option value="randomforest" disabled>Random Forest (In Development)</option>
                                            <option value="neuralnet" disabled>Neural Network (In Development)</option>
                                            <option value="ensemble" disabled>Ensemble (In Development)</option>
                                        </select>
                                    </div>
                                    <div class="settings-control">
                                        <label for="confidence-threshold">Confidence Threshold:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="confidence-threshold" min="50" max="95" value="75" class="settings-range">
                                            <span class="range-value">75%</span>
                                        </div>
                                    </div>
                                    <div class="settings-control checkbox-control">
                                        <input type="checkbox" id="use-ai-refinement" class="settings-checkbox" checked>
                                        <label for="use-ai-refinement">Use OpenAI Refinement</label>
                                    </div>
                                    <div class="settings-control checkbox-control">
                                        <input type="checkbox" id="enable-gpu" class="settings-checkbox">
                                        <label for="enable-gpu">Enable GPU Acceleration</label>
                                    </div>
                                </div>

                                <div class="settings-card">
                                    <h4>Feature Weights</h4>
                                    <div class="settings-control">
                                        <label for="growth-weight">Growth Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="growth-weight" min="1" max="20" value="20" class="settings-range">
                                            <span class="range-value">20</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="volatility-weight">Volatility Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="volatility-weight" min="1" max="20" value="15" class="settings-range">
                                            <span class="range-value">15</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="equity-weight">Equity Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="equity-weight" min="1" max="20" value="15" class="settings-range">
                                            <span class="range-value">15</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="advanced-weights">Advanced Weights:</label>
                                        <button id="advanced-weights" class="settings-btn">Configure</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="settings-header">
                                <h3><i class="fas fa-database"></i> Data Settings</h3>
                                <button class="settings-save-btn"><i class="fas fa-save"></i> Save Changes</button>
                            </div>
                            <div class="settings-grid">
                                <div class="settings-card">
                                    <h4>Data Sources</h4>
                                    <div class="settings-control">
                                        <label for="property-data-source">Property Data Source:</label>
                                        <select id="property-data-source" class="settings-select">
                                            <option value="api" selected>Live API</option>
                                            <option value="cached">Cached Data</option>
                                            <option value="mock">Mock Data</option>
                                        </select>
                                    </div>
                                    <div class="settings-control">
                                        <label for="demographic-data-source">Demographic Data Source:</label>
                                        <select id="demographic-data-source" class="settings-select">
                                            <option value="api" selected>Live API</option>
                                            <option value="cached">Cached Data</option>
                                            <option value="mock">Mock Data</option>
                                        </select>
                                    </div>
                                    <div class="settings-control">
                                        <label for="api-key">API Key:</label>
                                        <div class="password-input">
                                            <input type="password" id="api-key" value="sk_live_*****************" class="settings-input">
                                            <button class="toggle-password"><i class="fas fa-eye"></i></button>
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-card">
                                    <h4>Update Schedule</h4>
                                    <div class="settings-control">
                                        <label for="update-frequency">Update Frequency:</label>
                                        <select id="update-frequency" class="settings-select">
                                            <option value="daily" selected>Daily</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="monthly">Monthly</option>
                                            <option value="manual">Manual Only</option>
                                        </select>
                                    </div>
                                    <div class="settings-control">
                                        <label for="update-time">Update Time:</label>
                                        <input type="time" id="update-time" value="08:00" class="settings-input">
                                    </div>
                                    <div class="settings-control">
                                        <label for="last-update">Last Update:</label>
                                        <input type="text" id="last-update" value="2023-04-15 08:00:00" class="settings-input" readonly>
                                    </div>
                                    <div class="settings-control">
                                        <label for="force-update">Force Update:</label>
                                        <button id="force-update" class="settings-btn">Update Now</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="settings-header">
                                <h3><i class="fas fa-user-shield"></i> System Settings</h3>
                                <button class="settings-save-btn"><i class="fas fa-save"></i> Save Changes</button>
                            </div>
                            <div class="settings-grid">
                                <div class="settings-card">
                                    <h4>User Interface</h4>
                                    <div class="settings-control">
                                        <label for="theme">Theme:</label>
                                        <select id="theme" class="settings-select">
                                            <option value="light" selected>Light</option>
                                            <option value="dark">Dark</option>
                                            <option value="system">System Default</option>
                                        </select>
                                    </div>
                                    <div class="settings-control">
                                        <label for="accent-color">Accent Color:</label>
                                        <div class="color-picker-container">
                                            <input type="color" id="accent-color" value="#0099CC" class="settings-color">
                                            <input type="text" value="#0099CC" class="color-text-input">
                                        </div>
                                    </div>
                                    <div class="settings-control checkbox-control">
                                        <input type="checkbox" id="enable-animations" class="settings-checkbox" checked>
                                        <label for="enable-animations">Enable Animations</label>
                                    </div>
                                    <div class="settings-control checkbox-control">
                                        <input type="checkbox" id="compact-view" class="settings-checkbox">
                                        <label for="compact-view">Compact View</label>
                                    </div>
                                </div>

                                <div class="settings-card">
                                    <h4>System</h4>
                                    <div class="settings-control">
                                        <label for="log-level">Log Level:</label>
                                        <select id="log-level" class="settings-select">
                                            <option value="error">Error</option>
                                            <option value="warning">Warning</option>
                                            <option value="info" selected>Info</option>
                                            <option value="debug">Debug</option>
                                            <option value="verbose">Verbose</option>
                                        </select>
                                    </div>
                                    <div class="settings-control checkbox-control">
                                        <input type="checkbox" id="enable-telemetry" class="settings-checkbox" checked>
                                        <label for="enable-telemetry">Enable Telemetry</label>
                                    </div>
                                    <div class="settings-control checkbox-control">
                                        <input type="checkbox" id="enable-crash-reports" class="settings-checkbox" checked>
                                        <label for="enable-crash-reports">Enable Crash Reports</label>
                                    </div>
                                    <div class="settings-control">
                                        <label for="export-settings">Export/Import:</label>
                                        <div class="button-group">
                                            <button id="export-settings" class="settings-btn">Export</button>
                                            <button id="import-settings" class="settings-btn">Import</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="settings-header">
                                <h3><i class="fas fa-info-circle"></i> About</h3>
                            </div>
                            <div class="about-container">
                                <div class="about-logo">
                                    <h2>Equihome Traffic Light System</h2>
                                    <div class="version-info">Version 0.1.0 (Alpha)</div>
                                </div>
                                <div class="about-details">
                                    <p>The Equihome Traffic Light System (TLS) is an AI/ML-powered zoning engine that classifies Sydney suburbs into Green/Orange/Red zones based on metrics like growth, volatility, and equity.</p>
                                    <p> 2023 Equihome Partners. All rights reserved.</p>
                                    <div class="about-links">
                                        <a href="#" class="about-link">Terms of Service</a>
                                        <a href="#" class="about-link">Privacy Policy</a>
                                        <a href="#" class="about-link">Documentation</a>
                                        <a href="#" class="about-link">Support</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="page-content" id="system-health">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-heartbeat"></i> System Health</h2>
                    </div>
                    <div class="dashboard-content">
                        <div class="system-health-overview">
                            <div class="health-status-card">
                                <div class="health-status-header">
                                    <h3>System Status</h3>
                                    <div class="health-status-badge healthy">Healthy</div>
                                </div>
                                <div class="health-status-body">
                                    <div class="health-metric">
                                        <div class="health-metric-label">Uptime</div>
                                        <div class="health-metric-value">14 days, 7 hours</div>
                                    </div>
                                    <div class="health-metric">
                                        <div class="health-metric-label">Last Restart</div>
                                        <div class="health-metric-value">2023-04-01 08:30:15</div>
                                    </div>
                                    <div class="health-metric">
                                        <div class="health-metric-label">Version</div>
                                        <div class="health-metric-value">0.1.0 (Alpha)</div>
                                    </div>
                                    <div class="health-metric">
                                        <div class="health-metric-label">Environment</div>
                                        <div class="health-metric-value">Production</div>
                                    </div>
                                </div>
                            </div>

                            <div class="health-status-card">
                                <div class="health-status-header">
                                    <h3>Resource Usage</h3>
                                    <button class="refresh-btn"><i class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="health-status-body">
                                    <div class="health-metric">
                                        <div class="health-metric-label">CPU Usage</div>
                                        <div class="health-metric-value">
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 32%;"></div>
                                            </div>
                                            <span>32%</span>
                                        </div>
                                    </div>
                                    <div class="health-metric">
                                        <div class="health-metric-label">Memory Usage</div>
                                        <div class="health-metric-value">
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 47%;"></div>
                                            </div>
                                            <span>47%</span>
                                        </div>
                                    </div>
                                    <div class="health-metric">
                                        <div class="health-metric-label">Disk Usage</div>
                                        <div class="health-metric-value">
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 28%;"></div>
                                            </div>
                                            <span>28%</span>
                                        </div>
                                    </div>
                                    <div class="health-metric">
                                        <div class="health-metric-label">Network I/O</div>
                                        <div class="health-metric-value">
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 15%;"></div>
                                            </div>
                                            <span>15%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="health-status-card">
                                <div class="health-status-header">
                                    <h3>API Status</h3>
                                    <div class="health-status-badge warning">Partial Outage</div>
                                </div>
                                <div class="health-status-body">
                                    <div class="health-metric">
                                        <div class="health-metric-label">Response Time</div>
                                        <div class="health-metric-value">245ms</div>
                                    </div>
                                    <div class="health-metric">
                                        <div class="health-metric-label">Success Rate</div>
                                        <div class="health-metric-value">98.7%</div>
                                    </div>
                                    <div class="health-metric">
                                        <div class="health-metric-label">Requests/min</div>
                                        <div class="health-metric-value">1,245</div>
                                    </div>
                                    <div class="health-metric">
                                        <div class="health-metric-label">Errors/min</div>
                                        <div class="health-metric-value warning">16</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="system-health-details">
                            <div class="health-tabs">
                                <button class="health-tab active" data-tab="services">Services</button>
                                <button class="health-tab" data-tab="logs">Logs</button>
                                <button class="health-tab" data-tab="performance">Performance</button>
                                <button class="health-tab" data-tab="alerts">Alerts</button>
                            </div>

                            <div class="health-tab-content active" id="services-tab">
                                <div class="health-table-container">
                                    <table class="health-table">
                                        <thead>
                                            <tr>
                                                <th>Service</th>
                                                <th>Status</th>
                                                <th>Uptime</th>
                                                <th>Response Time</th>
                                                <th>Last Check</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <div class="service-name">
                                                        <i class="fas fa-database"></i>
                                                        <span>Database Service</span>
                                                    </div>
                                                </td>
                                                <td><span class="status-badge healthy">Healthy</span></td>
                                                <td>14d 7h 22m</td>
                                                <td>32ms</td>
                                                <td>2 minutes ago</td>
                                                <td>
                                                    <div class="action-buttons">
                                                        <button class="action-btn"><i class="fas fa-sync-alt"></i></button>
                                                        <button class="action-btn"><i class="fas fa-info-circle"></i></button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="service-name">
                                                        <i class="fas fa-brain"></i>
                                                        <span>ML Engine</span>
                                                    </div>
                                                </td>
                                                <td><span class="status-badge healthy">Healthy</span></td>
                                                <td>14d 7h 22m</td>
                                                <td>128ms</td>
                                                <td>2 minutes ago</td>
                                                <td>
                                                    <div class="action-buttons">
                                                        <button class="action-btn"><i class="fas fa-sync-alt"></i></button>
                                                        <button class="action-btn"><i class="fas fa-info-circle"></i></button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="service-name">
                                                        <i class="fas fa-robot"></i>
                                                        <span>OpenAI Integration</span>
                                                    </div>
                                                </td>
                                                <td><span class="status-badge warning">Degraded</span></td>
                                                <td>14d 7h 22m</td>
                                                <td>487ms</td>
                                                <td>2 minutes ago</td>
                                                <td>
                                                    <div class="action-buttons">
                                                        <button class="action-btn"><i class="fas fa-sync-alt"></i></button>
                                                        <button class="action-btn"><i class="fas fa-info-circle"></i></button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="service-name">
                                                        <i class="fas fa-chart-line"></i>
                                                        <span>Analytics Service</span>
                                                    </div>
                                                </td>
                                                <td><span class="status-badge healthy">Healthy</span></td>
                                                <td>14d 7h 22m</td>
                                                <td>76ms</td>
                                                <td>2 minutes ago</td>
                                                <td>
                                                    <div class="action-buttons">
                                                        <button class="action-btn"><i class="fas fa-sync-alt"></i></button>
                                                        <button class="action-btn"><i class="fas fa-info-circle"></i></button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="service-name">
                                                        <i class="fas fa-file-alt"></i>
                                                        <span>Report Generator</span>
                                                    </div>
                                                </td>
                                                <td><span class="status-badge healthy">Healthy</span></td>
                                                <td>14d 7h 22m</td>
                                                <td>112ms</td>
                                                <td>2 minutes ago</td>
                                                <td>
                                                    <div class="action-buttons">
                                                        <button class="action-btn"><i class="fas fa-sync-alt"></i></button>
                                                        <button class="action-btn"><i class="fas fa-info-circle"></i></button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="service-name">
                                                        <i class="fas fa-server"></i>
                                                        <span>API Gateway</span>
                                                    </div>
                                                </td>
                                                <td><span class="status-badge warning">Degraded</span></td>
                                                <td>14d 7h 22m</td>
                                                <td>245ms</td>
                                                <td>2 minutes ago</td>
                                                <td>
                                                    <div class="action-buttons">
                                                        <button class="action-btn"><i class="fas fa-sync-alt"></i></button>
                                                        <button class="action-btn"><i class="fas fa-info-circle"></i></button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="service-name">
                                                        <i class="fas fa-tasks"></i>
                                                        <span>Task Scheduler</span>
                                                    </div>
                                                </td>
                                                <td><span class="status-badge healthy">Healthy</span></td>
                                                <td>14d 7h 22m</td>
                                                <td>45ms</td>
                                                <td>2 minutes ago</td>
                                                <td>
                                                    <div class="action-buttons">
                                                        <button class="action-btn"><i class="fas fa-sync-alt"></i></button>
                                                        <button class="action-btn"><i class="fas fa-info-circle"></i></button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="health-tab-content" id="logs-tab">
                                <div class="logs-header">
                                    <div class="logs-filters">
                                        <select class="logs-filter">
                                            <option value="all">All Logs</option>
                                            <option value="error">Errors</option>
                                            <option value="warning">Warnings</option>
                                            <option value="info">Info</option>
                                            <option value="debug">Debug</option>
                                        </select>
                                        <select class="logs-filter">
                                            <option value="all">All Services</option>
                                            <option value="database">Database</option>
                                            <option value="ml">ML Engine</option>
                                            <option value="openai">OpenAI Integration</option>
                                            <option value="analytics">Analytics</option>
                                            <option value="reports">Report Generator</option>
                                            <option value="api">API Gateway</option>
                                            <option value="scheduler">Task Scheduler</option>
                                        </select>
                                        <input type="text" placeholder="Search logs..." class="logs-search">
                                    </div>
                                    <div class="logs-actions">
                                        <button class="logs-action-btn"><i class="fas fa-sync-alt"></i> Refresh</button>
                                        <button class="logs-action-btn"><i class="fas fa-download"></i> Export</button>
                                        <button class="logs-action-btn"><i class="fas fa-trash-alt"></i> Clear</button>
                                    </div>
                                </div>
                                <div class="logs-container">
                                    <div class="log-entry error">
                                        <div class="log-time">2023-04-15 14:32:45</div>
                                        <div class="log-service">API Gateway</div>
                                        <div class="log-level error">ERROR</div>
                                        <div class="log-message">Connection timeout when connecting to external data provider (timeout: 5000ms)</div>
                                    </div>
                                    <div class="log-entry warning">
                                        <div class="log-time">2023-04-15 14:30:12</div>
                                        <div class="log-service">OpenAI Integration</div>
                                        <div class="log-level warning">WARNING</div>
                                        <div class="log-message">Rate limit approaching (80% of quota used)</div>
                                    </div>
                                    <div class="log-entry info">
                                        <div class="log-time">2023-04-15 14:28:56</div>
                                        <div class="log-service">ML Engine</div>
                                        <div class="log-level info">INFO</div>
                                        <div class="log-message">Model retraining completed successfully (accuracy: 92.7%)</div>
                                    </div>
                                    <div class="log-entry info">
                                        <div class="log-time">2023-04-15 14:25:33</div>
                                        <div class="log-service">Task Scheduler</div>
                                        <div class="log-level info">INFO</div>
                                        <div class="log-message">Scheduled task 'update-cache' started</div>
                                    </div>
                                    <div class="log-entry error">
                                        <div class="log-time">2023-04-15 14:22:18</div>
                                        <div class="log-service">API Gateway</div>
                                        <div class="log-level error">ERROR</div>
                                        <div class="log-message">Invalid authentication token provided (IP: 203.0.113.42)</div>
                                    </div>
                                    <div class="log-entry info">
                                        <div class="log-time">2023-04-15 14:20:05</div>
                                        <div class="log-service">Database Service</div>
                                        <div class="log-level info">INFO</div>
                                        <div class="log-message">Database backup completed successfully (size: 1.2GB)</div>
                                    </div>
                                    <div class="log-entry warning">
                                        <div class="log-time">2023-04-15 14:15:47</div>
                                        <div class="log-service">Analytics Service</div>
                                        <div class="log-level warning">WARNING</div>
                                        <div class="log-message">Slow query detected (execution time: 3.2s, query ID: 8a7b6c5d)</div>
                                    </div>
                                    <div class="log-entry info">
                                        <div class="log-time">2023-04-15 14:10:22</div>
                                        <div class="log-service">Report Generator</div>
                                        <div class="log-level info">INFO</div>
                                        <div class="log-message">Weekly report generated successfully (suburbs: 342, processing time: 8.5s)</div>
                                    </div>
                                </div>
                                <div class="logs-pagination">
                                    <button class="pagination-btn" disabled><i class="fas fa-chevron-left"></i></button>
                                    <span class="pagination-info">Page 1 of 24</span>
                                    <button class="pagination-btn"><i class="fas fa-chevron-right"></i></button>
                                </div>
                            </div>

                            <div class="health-tab-content" id="performance-tab">
                                <div class="performance-charts">
                                    <div class="performance-chart-container">
                                        <div class="chart-header">
                                            <h4>CPU Usage</h4>
                                            <div class="chart-controls">
                                                <select class="chart-timeframe">
                                                    <option value="1h">Last Hour</option>
                                                    <option value="6h">Last 6 Hours</option>
                                                    <option value="24h" selected>Last 24 Hours</option>
                                                    <option value="7d">Last 7 Days</option>
                                                    <option value="30d">Last 30 Days</option>
                                                </select>
                                                <button class="chart-action-btn"><i class="fas fa-expand"></i></button>
                                            </div>
                                        </div>
                                        <div class="chart-placeholder">
                                            <div class="chart-mockup cpu-chart"></div>
                                        </div>
                                    </div>
                                    <div class="performance-chart-container">
                                        <div class="chart-header">
                                            <h4>Memory Usage</h4>
                                            <div class="chart-controls">
                                                <select class="chart-timeframe">
                                                    <option value="1h">Last Hour</option>
                                                    <option value="6h">Last 6 Hours</option>
                                                    <option value="24h" selected>Last 24 Hours</option>
                                                    <option value="7d">Last 7 Days</option>
                                                    <option value="30d">Last 30 Days</option>
                                                </select>
                                                <button class="chart-action-btn"><i class="fas fa-expand"></i></button>
                                            </div>
                                        </div>
                                        <div class="chart-placeholder">
                                            <div class="chart-mockup memory-chart"></div>
                                        </div>
                                    </div>
                                    <div class="performance-chart-container">
                                        <div class="chart-header">
                                            <h4>API Response Time</h4>
                                            <div class="chart-controls">
                                                <select class="chart-timeframe">
                                                    <option value="1h">Last Hour</option>
                                                    <option value="6h">Last 6 Hours</option>
                                                    <option value="24h" selected>Last 24 Hours</option>
                                                    <option value="7d">Last 7 Days</option>
                                                    <option value="30d">Last 30 Days</option>
                                                </select>
                                                <button class="chart-action-btn"><i class="fas fa-expand"></i></button>
                                            </div>
                                        </div>
                                        <div class="chart-placeholder">
                                            <div class="chart-mockup api-chart"></div>
                                        </div>
                                    </div>
                                    <div class="performance-chart-container">
                                        <div class="chart-header">
                                            <h4>Request Volume</h4>
                                            <div class="chart-controls">
                                                <select class="chart-timeframe">
                                                    <option value="1h">Last Hour</option>
                                                    <option value="6h">Last 6 Hours</option>
                                                    <option value="24h" selected>Last 24 Hours</option>
                                                    <option value="7d">Last 7 Days</option>
                                                    <option value="30d">Last 30 Days</option>
                                                </select>
                                                <button class="chart-action-btn"><i class="fas fa-expand"></i></button>
                                            </div>
                                        </div>
                                        <div class="chart-placeholder">
                                            <div class="chart-mockup request-chart"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="health-tab-content" id="alerts-tab">
                                <div class="alerts-header">
                                    <div class="alerts-summary">
                                        <div class="alert-count error">2 Critical</div>
                                        <div class="alert-count warning">3 Warnings</div>
                                        <div class="alert-count info">5 Info</div>
                                    </div>
                                    <div class="alerts-actions">
                                        <button class="alerts-action-btn"><i class="fas fa-bell"></i> Manage Notifications</button>
                                        <button class="alerts-action-btn"><i class="fas fa-check-double"></i> Mark All as Read</button>
                                    </div>
                                </div>
                                <div class="alerts-container">
                                    <div class="alert-entry error">
                                        <div class="alert-icon"><i class="fas fa-exclamation-circle"></i></div>
                                        <div class="alert-content">
                                            <div class="alert-title">API Gateway Connection Timeout</div>
                                            <div class="alert-message">Connection timeout when connecting to external data provider (timeout: 5000ms)</div>
                                            <div class="alert-meta">
                                                <span class="alert-time">2023-04-15 14:32:45</span>
                                                <span class="alert-service">API Gateway</span>
                                            </div>
                                        </div>
                                        <div class="alert-actions">
                                            <button class="alert-action-btn"><i class="fas fa-check"></i></button>
                                            <button class="alert-action-btn"><i class="fas fa-bell-slash"></i></button>
                                        </div>
                                    </div>
                                    <div class="alert-entry warning">
                                        <div class="alert-icon"><i class="fas fa-exclamation-triangle"></i></div>
                                        <div class="alert-content">
                                            <div class="alert-title">OpenAI Rate Limit Warning</div>
                                            <div class="alert-message">Rate limit approaching (80% of quota used)</div>
                                            <div class="alert-meta">
                                                <span class="alert-time">2023-04-15 14:30:12</span>
                                                <span class="alert-service">OpenAI Integration</span>
                                            </div>
                                        </div>
                                        <div class="alert-actions">
                                            <button class="alert-action-btn"><i class="fas fa-check"></i></button>
                                            <button class="alert-action-btn"><i class="fas fa-bell-slash"></i></button>
                                        </div>
                                    </div>
                                    <div class="alert-entry error">
                                        <div class="alert-icon"><i class="fas fa-exclamation-circle"></i></div>
                                        <div class="alert-content">
                                            <div class="alert-title">Authentication Failure</div>
                                            <div class="alert-message">Invalid authentication token provided (IP: 203.0.113.42)</div>
                                            <div class="alert-meta">
                                                <span class="alert-time">2023-04-15 14:22:18</span>
                                                <span class="alert-service">API Gateway</span>
                                            </div>
                                        </div>
                                        <div class="alert-actions">
                                            <button class="alert-action-btn"><i class="fas fa-check"></i></button>
                                            <button class="alert-action-btn"><i class="fas fa-bell-slash"></i></button>
                                        </div>
                                    </div>
                                    <div class="alert-entry warning">
                                        <div class="alert-icon"><i class="fas fa-exclamation-triangle"></i></div>
                                        <div class="alert-content">
                                            <div class="alert-title">Slow Query Detected</div>
                                            <div class="alert-message">Slow query detected (execution time: 3.2s, query ID: 8a7b6c5d)</div>
                                            <div class="alert-meta">
                                                <span class="alert-time">2023-04-15 14:15:47</span>
                                                <span class="alert-service">Analytics Service</span>
                                            </div>
                                        </div>
                                        <div class="alert-actions">
                                            <button class="alert-action-btn"><i class="fas fa-check"></i></button>
                                            <button class="alert-action-btn"><i class="fas fa-bell-slash"></i></button>
                                        </div>
                                    </div>
                                    <div class="alert-entry warning">
                                        <div class="alert-icon"><i class="fas fa-exclamation-triangle"></i></div>
                                        <div class="alert-content">
                                            <div class="alert-title">Disk Space Warning</div>
                                            <div class="alert-message">Disk space usage exceeds 75% threshold (current: 78%)</div>
                                            <div class="alert-meta">
                                                <span class="alert-time">2023-04-15 13:45:22</span>
                                                <span class="alert-service">System</span>
                                            </div>
                                        </div>
                                        <div class="alert-actions">
                                            <button class="alert-action-btn"><i class="fas fa-check"></i></button>
                                            <button class="alert-action-btn"><i class="fas fa-bell-slash"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize the map centered on Sydney
        const map = L.map('map').setView([-33.8688, 151.2093], 10);

        // Add a title to the map
        const mapTitle = L.control({position: 'topright'});
        mapTitle.onAdd = function(map) {
            const div = L.DomUtil.create('div', 'map-title');
            div.innerHTML = '<h3>Sydney & Nearby Suburbs Zoning</h3><p>Click on a suburb to view details</p>';
            div.style.backgroundColor = 'white';
            div.style.padding = '10px';
            div.style.borderRadius = '5px';
            div.style.boxShadow = '0 1px 5px rgba(0,0,0,0.4)';
            return div;
        };
        mapTitle.addTo(map);

        // Add the OpenStreetMap tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Function to check if a suburb is in Sydney or nearby areas
        function isSydneyOrNearbySuburb(suburbName) {
            if (!suburbName) return false;

            // List of Sydney regions and nearby areas to include
            const sydneyRegions = [
                // Sydney City and Inner Suburbs
                'SYDNEY', 'SURRY HILLS', 'DARLINGHURST', 'REDFERN', 'NEWTOWN', 'GLEBE', 'ULTIMO', 'PYRMONT', 'CHIPPENDALE',
                'HAYMARKET', 'THE ROCKS', 'MILLERS POINT', 'BARANGAROO', 'WOOLLOOMOOLOO', 'POTTS POINT', 'ELIZABETH BAY',
                'RUSHCUTTERS BAY', 'DARLINGTON', 'ERSKINEVILLE', 'ALEXANDRIA', 'WATERLOO', 'ZETLAND', 'ROSEBERY',

                // Eastern Suburbs
                'BONDI', 'BONDI JUNCTION', 'BONDI BEACH', 'BRONTE', 'CLOVELLY', 'COOGEE', 'MAROUBRA', 'SOUTH COOGEE',
                'LITTLE BAY', 'MALABAR', 'LA PEROUSE', 'MATRAVILLE', 'EASTLAKES', 'KINGSFORD', 'RANDWICK', 'KENSINGTON',
                'PADDINGTON', 'CENTENNIAL PARK', 'QUEENS PARK', 'WAVERLEY', 'TAMARAMA', 'DOUBLE BAY', 'BELLEVUE HILL',
                'POINT PIPER', 'ROSE BAY', 'VAUCLUSE', 'WATSONS BAY', 'DOVER HEIGHTS', 'NORTH BONDI', 'EDGECLIFF',

                // Inner West
                'ANNANDALE', 'BALMAIN', 'BIRCHGROVE', 'ROZELLE', 'LILYFIELD', 'LEICHHARDT', 'HABERFIELD', 'FIVE DOCK',
                'ABBOTSFORD', 'DRUMMOYNE', 'RUSSELL LEA', 'RODD POINT', 'ASHFIELD', 'SUMMER HILL', 'LEWISHAM', 'PETERSHAM',
                'STANMORE', 'ENMORE', 'MARRICKVILLE', 'DULWICH HILL', 'HURLSTONE PARK', 'CANTERBURY', 'CAMPSIE', 'BELMORE',
                'LAKEMBA', 'PUNCHBOWL', 'CROYDON', 'CROYDON PARK', 'BURWOOD', 'STRATHFIELD', 'CONCORD', 'RHODES',

                // North Shore
                'NORTH SYDNEY', 'KIRRIBILLI', 'LAVENDER BAY', 'MCMAHONS POINT', 'WAVERTON', 'WOLLSTONECRAFT', 'CROWS NEST',
                'ST LEONARDS', 'GREENWICH', 'NAREMBURN', 'CAMMERAY', 'NORTHBRIDGE', 'CREMORNE', 'CREMORNE POINT', 'NEUTRAL BAY',
                'KURRABA POINT', 'MOSMAN', 'CLIFTON GARDENS', 'BALMORAL', 'BEAUTY POINT', 'MIDDLE HARBOUR',

                // Upper North Shore
                'ARTARMON', 'WILLOUGHBY', 'CASTLE COVE', 'MIDDLE COVE', 'CASTLECRAG', 'CHATSWOOD', 'ROSEVILLE', 'LINDFIELD',
                'KILLARA', 'GORDON', 'PYMBLE', 'TURRAMURRA', 'WARRAWEE', 'WAHROONGA', 'WAITARA', 'HORNSBY', 'ASQUITH',
                'MOUNT COLAH', 'MOUNT KURING-GAI', 'BEROWRA', 'BEROWRA HEIGHTS', 'COWAN',

                // Northern Beaches
                'MANLY', 'FAIRLIGHT', 'BALGOWLAH', 'BALGOWLAH HEIGHTS', 'CLONTARF', 'SEAFORTH', 'NORTH BALGOWLAH',
                'MANLY VALE', 'BROOKVALE', 'CURL CURL', 'FRESHWATER', 'QUEENSCLIFF', 'DEE WHY', 'NORTH CURL CURL',
                'NARRAWEENA', 'CROMER', 'COLLAROY', 'WHEELER HEIGHTS', 'NARRABEEN', 'NORTH NARRABEEN', 'ELANORA HEIGHTS',
                'INGLESIDE', 'WARRIEWOOD', 'MONA VALE', 'BAYVIEW', 'CHURCH POINT', 'NEWPORT', 'BILGOLA', 'AVALON',
                'WHALE BEACH', 'PALM BEACH',

                // Western Sydney (Inner)
                'PARRAMATTA', 'NORTH PARRAMATTA', 'HARRIS PARK', 'GRANVILLE', 'CLYDE', 'AUBURN', 'LIDCOMBE', 'BERALA',
                'REGENTS PARK', 'BIRRONG', 'YAGOONA', 'BASS HILL', 'SEFTON', 'CHESTER HILL', 'VILLAWOOD', 'CARRAMAR',
                'GUILDFORD', 'MERRYLANDS', 'MERRYLANDS WEST', 'GREYSTANES', 'PEMULWUY', 'WENTWORTHVILLE', 'WESTMEAD',
                'PENDLE HILL', 'TOONGABBIE', 'SEVEN HILLS', 'BLACKTOWN', 'PROSPECT', 'SMITHFIELD', 'WETHERILL PARK',
                'BOSSLEY PARK', 'PRAIRIEWOOD', 'FAIRFIELD', 'FAIRFIELD HEIGHTS', 'FAIRFIELD WEST', 'YENNORA', 'OLD GUILDFORD',

                // Western Sydney (Outer)
                'MOUNT DRUITT', 'ROOTY HILL', 'DOONSIDE', 'WOODCROFT', 'PLUMPTON', 'OAKHURST', 'HASSALL GROVE',
                'BIDWILL', 'SHALVEY', 'LETHBRIDGE PARK', 'TREGEAR', 'WHALAN', 'ROPES CROSSING', 'MARSDEN PARK',
                'SCHOFIELDS', 'QUAKERS HILL', 'RIVERSTONE', 'VINEYARD', 'WINDSOR', 'RICHMOND', 'NORTH RICHMOND',
                'PENRITH', 'KINGSWOOD', 'JAMISONTOWN', 'SOUTH PENRITH', 'CAMBRIDGE PARK', 'WERRINGTON', 'ST MARYS',
                'COLYTON', 'OXLEY PARK', 'ERSKINE PARK', 'ST CLAIR', 'EMU PLAINS', 'LEONAY', 'GLENMORE PARK',

                // North West
                'BAULKHAM HILLS', 'CASTLE HILL', 'CHERRYBROOK', 'WEST PENNANT HILLS', 'PENNANT HILLS', 'CARLINGFORD',
                'BEECROFT', 'CHELTENHAM', 'EPPING', 'EASTWOOD', 'DENISTONE', 'RYDE', 'WEST RYDE', 'MEADOWBANK', 'MELROSE PARK',
                'ERMINGTON', 'RYDALMERE', 'DUNDAS', 'TELOPEA', 'OATLANDS', 'NORTH ROCKS', 'NORTHMEAD', 'WINSTON HILLS',
                'KELLYVILLE', 'BELLA VISTA', 'NORWEST', 'ROUSE HILL', 'KELLYVILLE RIDGE', 'THE PONDS', 'STANHOPE GARDENS',
                'GLENWOOD', 'THE HILLS DISTRICT',

                // South Sydney
                'MASCOT', 'BOTANY', 'BANKSMEADOW', 'PAGEWOOD', 'HILLSDALE', 'EASTGARDENS', 'MAROUBRA', 'CHIFLEY',
                'MALABAR', 'LITTLE BAY', 'LA PEROUSE', 'PHILLIP BAY', 'PORT BOTANY', 'BANKSMEADOW',

                // St George
                'KOGARAH', 'CARLTON', 'ALLAWAH', 'HURSTVILLE', 'PENSHURST', 'MORTDALE', 'OATLEY', 'LUGARNO',
                'PEAKHURST', 'PEAKHURST HEIGHTS', 'RIVERWOOD', 'NARWEE', 'BEVERLY HILLS', 'KINGSGROVE', 'BEXLEY',
                'BEXLEY NORTH', 'BARDWELL PARK', 'BARDWELL VALLEY', 'ARNCLIFFE', 'TURRELLA', 'WOLLI CREEK', 'TEMPE',
                'KYEEMAGH', 'BRIGHTON-LE-SANDS', 'MONTEREY', 'RAMSGATE', 'RAMSGATE BEACH', 'SANS SOUCI', 'DOLLS POINT',
                'SANDRINGHAM', 'BLAKEHURST', 'CARSS PARK', 'CONNELLS POINT', 'KYLE BAY', 'SOUTH HURSTVILLE',

                // Sutherland Shire
                'CRONULLA', 'WOOLOOWARE', 'BURRANEER', 'CARINGBAH', 'CARINGBAH SOUTH', 'DOLANS BAY', 'LILLI PILLI',
                'PORT HACKING', 'MIRANDA', 'YOWIE BAY', 'GYMEA', 'GYMEA BAY', 'GRAYS POINT', 'KIRRAWEE', 'SYLVANIA',
                'SYLVANIA WATERS', 'TAREN POINT', 'KURNELL', 'BUNDEENA', 'MAIANBAR', 'COMO', 'JANNALI', 'SUTHERLAND',
                'LOFTUS', 'YARRAWARRAH', 'ENGADINE', 'HEATHCOTE', 'WATERFALL', 'WORONORA', 'WORONORA HEIGHTS', 'BANGOR',
                'BARDEN RIDGE', 'ALFORDS POINT', 'ILLAWONG', 'MENAI', 'LUCAS HEIGHTS', 'HOLSWORTHY',

                // South West
                'LIVERPOOL', 'WARWICK FARM', 'CHIPPING NORTON', 'MOOREBANK', 'WATTLE GROVE', 'CASULA', 'PRESTONS',
                'LURNEA', 'SADLEIR', 'ASHCROFT', 'BUSBY', 'HECKENBERG', 'GREEN VALLEY', 'HINCHINBROOK', 'BONNYRIGG',
                'CABRAMATTA', 'CANLEY VALE', 'CANLEY HEIGHTS', 'LANSVALE', 'CARNES HILL', 'HORNINGSEA PARK', 'HOXTON PARK',
                'WEST HOXTON', 'MIDDLETON GRANGE', 'CECIL HILLS', 'ELIZABETH HILLS', 'ABBOTSBURY', 'EDENSOR PARK',
                'ST JOHNS PARK', 'WAKELEY', 'GREENFIELD PARK', 'PRAIRIEWOOD', 'MOUNT PRITCHARD', 'AUSTRAL', 'LEPPINGTON',
                'DENHAM COURT', 'INGLEBURN', 'MACQUARIE FIELDS', 'GLENFIELD', 'CASULA', 'EDMONDSON PARK', 'BARDIA',

                // Macarthur Region
                'CAMPBELLTOWN', 'AMBARVALE', 'ROSEMEADOW', 'BRADBURY', 'CLAYMORE', 'EAGLE VALE', 'ESCHOL PARK',
                'KEARNS', 'RABY', 'ST ANDREWS', 'MINTO', 'LEUMEAH', 'WOODBINE', 'AIRDS', 'RUSE', 'KENTLYN',
                'WEDDERBURN', 'GLEN ALPINE', 'ENGLORIE PARK', 'BLAIR ATHOL', 'BLAIRMOUNT', 'MACQUARIE LINKS',
                'INGLEBURN', 'MINTO HEIGHTS', 'BOW BOWING', 'GREGORY HILLS', 'GLEDSWOOD HILLS', 'CATHERINE FIELD',
                'HARRINGTON PARK', 'KIRKHAM', 'NARELLAN', 'NARELLAN VALE', 'MOUNT ANNAN', 'CURRANS HILL', 'SMEATON GRANGE',
                'CAMDEN', 'ELDERSLIE', 'SPRING FARM', 'COBBITTY', 'ORAN PARK', 'CATHERINE FIELD', 'LEPPINGTON',

                // Wollongong and Illawarra (Northern)
                'HELENSBURGH', 'OTFORD', 'STANWELL PARK', 'STANWELL TOPS', 'COALCLIFF', 'CLIFTON', 'SCARBOROUGH',
                'WOMBARRA', 'COLEDALE', 'AUSTINMER', 'THIRROUL', 'BULLI', 'WOONONA', 'BELLAMBI', 'CORRIMAL', 'TOWRADGI',
                'FAIRY MEADOW', 'BALGOWNIE', 'MOUNT PLEASANT', 'MOUNT OUSLEY', 'MOUNT KEIRA', 'KEIRAVILLE', 'GWYNNEVILLE',
                'NORTH WOLLONGONG', 'WOLLONGONG', 'CONISTON', 'MANGERTON', 'MOUNT ST THOMAS', 'FIGTREE', 'WEST WOLLONGONG',
                'DOMBARTON', 'UNANDERRA', 'BERKELEY', 'LAKE HEIGHTS', 'CRINGILA', 'PRIMBEE', 'WARRAWONG', 'PORT KEMBLA',
                'WINDANG', 'KOONAWARRA', 'DAPTO', 'HORSLEY', 'KANAHOOKA', 'KEMBLA GRANGE', 'CLEVELAND', 'CORDEAUX HEIGHTS',
                'MOUNT KEMBLA', 'FARMBOROUGH HEIGHTS', 'HUNTLEY', 'AVONDALE', 'PENROSE', 'YALLAH', 'HAYWARDS BAY',
                'ALBION PARK RAIL', 'ALBION PARK', 'OAK FLATS', 'BLACKBUTT', 'SHELLHARBOUR', 'BARRACK HEIGHTS',
                'BARRACK POINT', 'WARILLA', 'MOUNT WARRIGAL', 'LAKE ILLAWARRA', 'KOONAWARRA', 'KANAHOOKA', 'BROWNSVILLE',
                'DAPTO', 'HORSLEY', 'KEMBLA GRANGE', 'MARSHALL MOUNT', 'HUNTLEY', 'WONGAWILLI', 'DOMBARTON', 'AVON',

                // Central Coast (Southern)
                'PATONGA', 'PEARL BEACH', 'UMINA BEACH', 'ETTALONG BEACH', 'BOOKER BAY', 'BLACKWALL', 'WOY WOY',
                'PHEGANS BAY', 'HORSFIELD BAY', 'WONDABYNE', 'TASCOTT', 'KOOLEWONG', 'POINT CLARE', 'WEST GOSFORD',
                'GOSFORD', 'EAST GOSFORD', 'POINT FREDERICK', 'SPRINGFIELD', 'ERINA', 'GREEN POINT', 'TERRIGAL',
                'WAMBERAL', 'FORRESTERS BEACH', 'BATEAU BAY', 'KILLARNEY VALE', 'LONG JETTY', 'THE ENTRANCE',
                'BLUE BAY', 'TOOWOON BAY', 'SHELLY BEACH', 'BERKELEY VALE', 'CHITTAWAY BAY', 'TUMBI UMBI',
                'GLENNING VALLEY', 'KILLARNEY VALE', 'BERKELEY VALE', 'CHITTAWAY BAY', 'TUGGERAH', 'MARDI',
                'WYONG', 'WATANOBBI', 'WADALBA', 'HALLORAN', 'JILLIBY', 'DOORALONG', 'WYONG CREEK', 'YARRAMALONG',
                'RAVENSDALE', 'CEDAR BRUSH CREEK', 'KULNURA', 'MANGROVE MOUNTAIN', 'CENTRAL MANGROVE', 'SOMERSBY',
                'MOUNT WHITE', 'CALGA', 'MOONEY MOONEY', 'CHEERO POINT', 'BROOKLYN', 'COGRA BAY', 'GUNDERMAN',
                'WENDOREE PARK', 'SPENCER', 'LOWER MANGROVE', 'GREENGROVE', 'MANGROVE CREEK', 'UPPER MANGROVE',
                'PEATS RIDGE', 'MANGROVE MOUNTAIN', 'CENTRAL MANGROVE', 'HOLGATE', 'MATCHAM', 'ERINA HEIGHTS',
                'PICKETTS VALLEY', 'NORTH AVOCA', 'AVOCA BEACH', 'COPACABANA', 'MACMASTERS BEACH', 'BOUDDI',
                'KILLCARE', 'HARDYS BAY', 'KILLCARE HEIGHTS', 'WAGSTAFFE', 'DALEYS POINT', 'ST HUBERTS ISLAND',
                'SARATOGA', 'DAVISTOWN', 'YATTALUNGA', 'EMPIRE BAY', 'BENSVILLE', 'KINCUMBER', 'KINCUMBER SOUTH',
                'GREEN POINT', 'KARIONG', 'NIAGARA PARK', 'NARARA', 'WYOMING', 'NORTH GOSFORD', 'SOMERSBY',
                'LISAROW', 'OURIMBAH', 'PALM GROVE', 'PALMDALE', 'KANGY ANGY', 'FOUNTAINDALE', 'GLENNING VALLEY'
            ];

            // Check if the suburb is in the Sydney area
            return sydneyRegions.includes(suburbName);
        }

        // Function to determine if a suburb should be a green zone
        function isGreenZoneSuburb(suburbName) {
            if (!suburbName) return false;

            // List of suburbs that should be green zones (Eastern and Northern suburbs)
            const greenZoneSuburbs = [
                // Eastern Suburbs - Premium
                'BONDI', 'BONDI JUNCTION', 'BRONTE', 'CLOVELLY', 'COOGEE', 'DOUBLE BAY', 'PADDINGTON', 'POINT PIPER', 'ROSE BAY', 'VAUCLUSE', 'WAVERLEY', 'WOOLLAHRA', 'BELLEVUE HILL', 'DARLING POINT', 'EDGECLIFF', 'ELIZABETH BAY', 'QUEENS PARK', 'TAMARAMA', 'WATSONS BAY',

                // North Shore - Premium
                'MOSMAN', 'NEUTRAL BAY', 'NORTH SYDNEY', 'KIRRIBILLI', 'CREMORNE', 'CREMORNE POINT', 'CAMMERAY', 'NORTHBRIDGE', 'SEAFORTH', 'BALGOWLAH', 'BALGOWLAH HEIGHTS', 'CLONTARF', 'CLIFTON GARDENS',

                // Northern Beaches - Premium
                'MANLY', 'FRESHWATER', 'CURL CURL', 'DEE WHY', 'COLLAROY', 'NARRABEEN', 'WARRIEWOOD', 'MONA VALE', 'NEWPORT', 'AVALON', 'PALM BEACH',

                // Upper North Shore - Premium
                'KILLARA', 'LINDFIELD', 'ROSEVILLE', 'GORDON', 'PYMBLE', 'ST IVES', 'TURRAMURRA', 'WAHROONGA', 'WARRAWEE',

                // Inner City - Premium
                'SYDNEY', 'SURRY HILLS', 'DARLINGHURST', 'POTTS POINT', 'WOOLLOOMOOLOO', 'RUSHCUTTERS BAY', 'MILLERS POINT', 'BARANGAROO', 'THE ROCKS'
            ];

            return greenZoneSuburbs.includes(suburbName);
        }

        // Function to get color based on zone
        function getZoneColor(zone) {
            switch (zone) {
                case 'green':
                    return '#4CAF50';
                case 'orange':
                    return '#FF9800';
                case 'red':
                    return '#F44336';
                case 'unclassified':
                    return '#E0E0E0'; // Light gray for unclassified zones
                default:
                    return '#CCCCCC';
            }
        }

        // Function to style the GeoJSON features
        function style(feature) {
            // Only show suburbs that have been zoned (not unclassified)
            if (feature.properties.zone === 'unclassified') {
                return {
                    fillColor: 'transparent',
                    weight: 0.5,
                    opacity: 0.3,
                    color: '#ccc',
                    dashArray: '3',
                    fillOpacity: 0
                };
            }

            return {
                fillColor: getZoneColor(feature.properties.zone),
                weight: 1,
                opacity: 1,
                color: 'white',
                dashArray: '3',
                fillOpacity: 0.7
            };
        }

        // Function to format percentage
        function formatPercent(value) {
            return `${value.toFixed(1)}%`;
        }

        // Function to get metric status
        function getMetricStatus(value, threshold, isHigherBetter) {
            if (isHigherBetter) {
                return value >= threshold ? 'positive' : 'negative';
            } else {
                return value <= threshold ? 'positive' : 'negative';
            }
        }

        // Function to update the suburb details panel
        function updateSuburbDetails(suburb) {
            const detailsContainer = document.getElementById('suburb-details');
            const { name, zone, metrics } = suburb;
            const {
                growth, volatility, equity, liquidity, crimeRate,
                affordability, infrastructure, schoolsRating, employmentRate, populationGrowth
            } = metrics;

            // Calculate a score for each category (simulating XGBoost feature importance)
            const growthScore = (growth / 15) * 100;
            const stabilityScore = 100 - (volatility / 10) * 100;
            const equityScore = ((equity - 30) / 50) * 100;
            const liquidityScore = 100 - ((liquidity - 10) / 50) * 100;
            const safetyScore = 100 - (crimeRate / 10) * 100;
            const affordabilityScore = ((affordability - 40) / 60) * 100;
            const infrastructureScore = (infrastructure / 10) * 100;
            const schoolsScore = (schoolsRating / 10) * 100;
            const employmentScore = ((employmentRate - 85) / 15) * 100;
            const populationScore = ((populationGrowth + 2) / 8) * 100;

            // Generate detailed AI reasoning based on the metrics
            let aiReasoning = '';
            let keyStrengths = [];
            let keyWeaknesses = [];

            // Identify key strengths
            if (growthScore > 70) keyStrengths.push('strong growth potential');
            if (stabilityScore > 70) keyStrengths.push('low volatility');
            if (equityScore > 70) keyStrengths.push('high equity levels');
            if (liquidityScore > 70) keyStrengths.push('good liquidity');
            if (safetyScore > 70) keyStrengths.push('low crime rate');
            if (affordabilityScore > 70) keyStrengths.push('high affordability');
            if (infrastructureScore > 70) keyStrengths.push('excellent infrastructure');
            if (schoolsScore > 70) keyStrengths.push('quality schools');
            if (employmentScore > 70) keyStrengths.push('strong employment');
            if (populationScore > 70) keyStrengths.push('positive population growth');

            // Identify key weaknesses
            if (growthScore < 40) keyWeaknesses.push('low growth potential');
            if (stabilityScore < 40) keyWeaknesses.push('high volatility');
            if (equityScore < 40) keyWeaknesses.push('low equity levels');
            if (liquidityScore < 40) keyWeaknesses.push('poor liquidity');
            if (safetyScore < 40) keyWeaknesses.push('high crime rate');
            if (affordabilityScore < 40) keyWeaknesses.push('low affordability');
            if (infrastructureScore < 40) keyWeaknesses.push('poor infrastructure');
            if (schoolsScore < 40) keyWeaknesses.push('underperforming schools');
            if (employmentScore < 40) keyWeaknesses.push('weak employment');
            if (populationScore < 40) keyWeaknesses.push('declining population');

            // Generate reasoning based on zone and key factors
            if (zone === 'green') {
                aiReasoning = `<strong>XGBoost Analysis:</strong> ${name} is classified as a Green Zone due to its ${keyStrengths.slice(0, 3).join(', ')}. `;
                aiReasoning += `Our ML model indicates this suburb has strong investment potential with a favorable risk-reward profile. `;
                if (keyWeaknesses.length > 0) {
                    aiReasoning += `Areas to monitor include ${keyWeaknesses.slice(0, 2).join(' and ')}.`;
                } else {
                    aiReasoning += `No significant weaknesses were identified.`;
                }
            } else if (zone === 'orange') {
                aiReasoning = `<strong>XGBoost Analysis:</strong> ${name} is classified as an Orange Zone with mixed indicators. `;
                aiReasoning += `Strengths include ${keyStrengths.slice(0, 2).join(' and ')}, but caution is advised due to ${keyWeaknesses.slice(0, 2).join(' and ')}. `;
                aiReasoning += `Our ML model suggests moderate investment potential with careful risk management.`;
            } else if (zone === 'red') {
                aiReasoning = `<strong>XGBoost Analysis:</strong> ${name} is classified as a Red Zone primarily due to ${keyWeaknesses.slice(0, 3).join(', ')}. `;
                aiReasoning += `Our ML model indicates elevated risk factors that outweigh potential returns. `;
                if (keyStrengths.length > 0) {
                    aiReasoning += `Positive factors include ${keyStrengths.slice(0, 2).join(' and ')}, but these are insufficient to offset the risks.`;
                } else {
                    aiReasoning += `Few positive indicators were identified in the current analysis.`;
                }
            }

            // Use AI reasoning from the zoning decision if available
            if (suburb.zoningDecision && suburb.zoningDecision.reasoning) {
                const reasoningElement = document.querySelector('.ai-reasoning');
                if (reasoningElement) {
                    reasoningElement.innerHTML = suburb.zoningDecision.reasoning;
                    console.log('Updated AI reasoning from zoning decision');
                }
            } else {
                // Fallback to API if zoning decision is not available
                fetch(`http://localhost:3000/api/ai/reasoning/${encodeURIComponent(name)}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`API error: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        // Update the AI reasoning with the response from the API
                        if (data && data.reasoning && data.reasoning.reasoning) {
                            const reasoningElement = document.querySelector('.ai-reasoning');
                            if (reasoningElement) {
                                reasoningElement.innerHTML = data.reasoning.reasoning;
                                console.log('Updated AI reasoning from API');
                            }
                        }
                    })
                    .catch(error => {
                        console.warn(`Error fetching AI reasoning for ${name}:`, error.message);
                    });
            }

            detailsContainer.innerHTML = `
                <div class="suburb-header">
                    <h2>${name}</h2>
                    <span class="zone-badge ${zone}">
                        ${zone.charAt(0).toUpperCase() + zone.slice(1)} Zone
                    </span>
                </div>

                <div class="metrics-container">
                    <h3><i class="fas fa-chart-line"></i> Primary Metrics</h3>

                    <div class="metric-item">
                        <div class="metric-label">Growth Rate (YoY)</div>
                        <div class="metric-value ${getMetricStatus(growth, 7, true)}">
                            ${formatPercent(growth)}
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Volatility</div>
                        <div class="metric-value ${getMetricStatus(volatility, 5, false)}">
                            ${formatPercent(volatility)}
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Equity</div>
                        <div class="metric-value ${getMetricStatus(equity, 50, true)}">
                            ${formatPercent(equity)}
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Liquidity (Days on Market)</div>
                        <div class="metric-value ${getMetricStatus(liquidity, 30, false)}">
                            ${liquidity} days
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Crime Rate (per 1,000)</div>
                        <div class="metric-value ${getMetricStatus(crimeRate, 5, false)}">
                            ${crimeRate.toFixed(1)}
                        </div>
                    </div>

                    <h3><i class="fas fa-chart-bar"></i> Secondary Metrics</h3>

                    <div class="metric-item">
                        <div class="metric-label">Affordability</div>
                        <div class="metric-value ${getMetricStatus(affordability, 60, true)}">
                            ${formatPercent(affordability)}
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Infrastructure</div>
                        <div class="metric-value ${getMetricStatus(infrastructure, 6, true)}">
                            ${infrastructure.toFixed(1)}/10
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Schools Rating</div>
                        <div class="metric-value ${getMetricStatus(schoolsRating, 6, true)}">
                            ${schoolsRating.toFixed(1)}/10
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Employment Rate</div>
                        <div class="metric-value ${getMetricStatus(employmentRate, 90, true)}">
                            ${formatPercent(employmentRate)}
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Population Growth</div>
                        <div class="metric-value ${getMetricStatus(populationGrowth, 2, true)}">
                            ${formatPercent(populationGrowth)}
                        </div>
                    </div>
                </div>

                <div class="ai-reasoning">
                    <h3>AI Analysis</h3>
                    <p>${aiReasoning}</p>
                </div>

                <div class="investment-recommendation">
                    <h3>Investment Recommendation</h3>
                    <p>${suburb.zoningDecision && suburb.zoningDecision.investmentRecommendation ? suburb.zoningDecision.investmentRecommendation : 'No specific recommendation available for this suburb.'}</p>
                </div>

                <div class="model-info">
                    <h3><i class="fas fa-brain"></i> Model Information</h3>
                    <p>ML Model: <strong>XGBoost</strong> <span class="model-status active">ACTIVE</span></p>
                    <p>ML Prediction: <strong>${suburb.mlPrediction ? suburb.mlPrediction.zone.toUpperCase() : suburb.zone.toUpperCase()}</strong> (${suburb.mlPrediction ? suburb.mlPrediction.confidence : suburb.confidence}% confidence)</p>
                    <p>Final Zone: <strong>${suburb.zone.toUpperCase()}</strong> (${suburb.confidence}% confidence)</p>
                    <p>AI Layer: <strong>OpenAI GPT-4o</strong> <span class="model-status active">ACTIVE</span></p>
                    <p>Business Alignment: <strong class="business-alignment ${suburb.zoningDecision ? suburb.zoningDecision.businessAlignment.toLowerCase() : 'medium'}">${suburb.zoningDecision ? suburb.zoningDecision.businessAlignment.toUpperCase() : 'MEDIUM'}</strong></p>
                    <p>Last updated: <strong>${new Date().toLocaleDateString()}</strong></p>
                    <div class="other-models">
                        <p>Other models (in development):</p>
                        <ul>
                            <li class="disabled">Random Forest <span class="model-status">70% COMPLETE</span></li>
                            <li class="disabled">Gradient Boosting <span class="model-status">55% COMPLETE</span></li>
                            <li class="disabled">Neural Network <span class="model-status">40% COMPLETE</span></li>
                            <li class="disabled">AdaBoost <span class="model-status">30% COMPLETE</span></li>
                            <li class="disabled">Ensemble <span class="model-status">25% COMPLETE</span></li>
                        </ul>
                    </div>
                </div>
            `;
        }

        // Function to generate random metrics for a suburb
        function generateRandomMetrics() {
            // Generate random values for each metric
            const growth = Math.random() * 15; // 0-15%
            const volatility = Math.random() * 10; // 0-10%
            const equity = 30 + Math.random() * 50; // 30-80%
            const liquidity = 10 + Math.floor(Math.random() * 50); // 10-60 days
            const crimeRate = Math.random() * 10; // 0-10 per 1,000

            // Additional metrics for more sophisticated analysis
            const affordability = 40 + Math.random() * 60; // 40-100% (higher is more affordable)
            const infrastructure = Math.random() * 10; // 0-10 rating
            const schoolsRating = Math.random() * 10; // 0-10 rating
            const employmentRate = 85 + Math.random() * 15; // 85-100%
            const populationGrowth = -2 + Math.random() * 8; // -2% to 6%

            return {
                growth,
                volatility,
                equity,
                liquidity,
                crimeRate,
                affordability,
                infrastructure,
                schoolsRating,
                employmentRate,
                populationGrowth
            };
        }

        // Function to generate mock data for a suburb
        async function generateMockData(suburbName) {
            // Generate random metrics
            const metrics = generateRandomMetrics();

            // Generate ML prediction
            const mlPrediction = {
                zone: determineZone(metrics, suburbName),
                confidence: 85 + Math.random() * 10 // 85-95% confidence
            };

            // Generate AI zoning decision
            const zoningDecision = {
                finalZone: mlPrediction.zone,
                confidence: mlPrediction.confidence,
                businessAlignment: Math.random() > 0.7 ? 'HIGH' : (Math.random() > 0.4 ? 'MEDIUM' : 'LOW'),
                investmentRecommendation: generateInvestmentRecommendation(mlPrediction.zone)
            };

            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 10));

            return {
                metrics,
                mlPrediction,
                zoningDecision
            };
        }

        // Function to generate investment recommendation based on zone
        function generateInvestmentRecommendation(zone) {
            const recommendations = {
                green: [
                    "This suburb shows strong investment potential with high growth prospects and stable market conditions. Consider long-term investment strategies.",
                    "Excellent investment opportunity with strong fundamentals. Property in this area is likely to see consistent capital growth.",
                    "High-performing suburb with strong market indicators. Recommended for both owner-occupiers and investors seeking capital growth."
                ],
                orange: [
                    "This suburb shows moderate investment potential. Consider medium-term investment with careful property selection.",
                    "Moderate growth potential with some market volatility. Investors should conduct thorough research before committing.",
                    "Mixed market indicators suggest cautious investment approach. Look for properties with unique value propositions in this area."
                ],
                red: [
                    "This suburb currently shows limited investment potential. Consider alternative areas or wait for market conditions to improve.",
                    "High market volatility and limited growth indicators. Not recommended for investment in the current market cycle.",
                    "Market fundamentals suggest high risk. Investors should exercise extreme caution or consider other suburbs."
                ]
            };

            // Select a random recommendation for the given zone
            const zoneRecommendations = recommendations[zone] || recommendations.orange;
            return zoneRecommendations[Math.floor(Math.random() * zoneRecommendations.length)];
        }

        // Function to determine zone based on metrics using XGBoost-like scoring
        function determineZone(metrics, suburbName) {
            // Check if this is a designated green zone suburb (Eastern and Northern suburbs)
            if (isGreenZoneSuburb(suburbName)) {
                return 'green';
            }

            // Check for regions that should be biased towards orange or red
            const suburbRegion = getSuburbRegion(suburbName);

            const {
                growth, volatility, equity, liquidity, crimeRate,
                affordability, infrastructure, schoolsRating, employmentRate, populationGrowth
            } = metrics;

            // Calculate a score for each metric (simulating XGBoost feature importance)
            let score = 0;

            // Primary metrics (higher weight)
            score += (growth / 15) * 20;                    // Growth: 0-20 points
            score -= (volatility / 10) * 15;                // Volatility: -15-0 points
            score += ((equity - 30) / 50) * 15;             // Equity: 0-15 points
            score -= ((liquidity - 10) / 50) * 10;          // Liquidity: -10-0 points
            score -= (crimeRate / 10) * 10;                 // Crime Rate: -10-0 points

            // Secondary metrics (lower weight)
            score += ((affordability - 40) / 60) * 8;        // Affordability: 0-8 points
            score += (infrastructure / 10) * 7;             // Infrastructure: 0-7 points
            score += (schoolsRating / 10) * 7;              // Schools: 0-7 points
            score += ((employmentRate - 85) / 15) * 5;      // Employment: 0-5 points
            score += ((populationGrowth + 2) / 8) * 8;      // Population Growth: 0-8 points

            // Apply regional bias to make most suburbs orange or red
            // Eastern and Northern suburbs already handled by isGreenZoneSuburb
            if (suburbRegion === 'Western Sydney' || suburbRegion === 'South West') {
                // Western and South Western suburbs are biased towards red
                score -= 20;
            } else if (suburbRegion === 'Inner West' || suburbRegion === 'St George') {
                // Inner West and St George are biased towards orange
                score -= 10;
            } else if (suburbRegion === 'Sutherland Shire' || suburbRegion === 'North West') {
                // Sutherland Shire and North West are slightly biased towards orange
                score -= 5;
            }

            // Normalize score to 0-100 range
            score = Math.max(0, Math.min(100, score + 50));

            // Determine zone based on score with higher threshold for green
            if (score >= 75) { // Increased threshold for green zones
                return 'green';
            } else if (score >= 45) { // Slightly increased threshold for orange
                return 'orange';
            } else {
                return 'red';
            }
        }

        // Function to determine which region a suburb belongs to
        function getSuburbRegion(suburbName) {
            if (!suburbName) return 'Unknown';

            // Eastern Suburbs
            const easternSuburbs = [
                'BONDI', 'BONDI JUNCTION', 'BONDI BEACH', 'BRONTE', 'CLOVELLY', 'COOGEE', 'MAROUBRA', 'SOUTH COOGEE',
                'LITTLE BAY', 'MALABAR', 'LA PEROUSE', 'MATRAVILLE', 'EASTLAKES', 'KINGSFORD', 'RANDWICK', 'KENSINGTON',
                'PADDINGTON', 'CENTENNIAL PARK', 'QUEENS PARK', 'WAVERLEY', 'TAMARAMA', 'DOUBLE BAY', 'BELLEVUE HILL',
                'POINT PIPER', 'ROSE BAY', 'VAUCLUSE', 'WATSONS BAY', 'DOVER HEIGHTS', 'NORTH BONDI', 'EDGECLIFF'
            ];

            // Northern Suburbs (North Shore + Northern Beaches)
            const northernSuburbs = [
                'NORTH SYDNEY', 'KIRRIBILLI', 'LAVENDER BAY', 'MCMAHONS POINT', 'WAVERTON', 'WOLLSTONECRAFT', 'CROWS NEST',
                'ST LEONARDS', 'GREENWICH', 'NAREMBURN', 'CAMMERAY', 'NORTHBRIDGE', 'CREMORNE', 'CREMORNE POINT', 'NEUTRAL BAY',
                'KURRABA POINT', 'MOSMAN', 'CLIFTON GARDENS', 'BALMORAL', 'BEAUTY POINT', 'MIDDLE HARBOUR',
                'MANLY', 'FAIRLIGHT', 'BALGOWLAH', 'BALGOWLAH HEIGHTS', 'CLONTARF', 'SEAFORTH', 'NORTH BALGOWLAH',
                'MANLY VALE', 'BROOKVALE', 'CURL CURL', 'FRESHWATER', 'QUEENSCLIFF', 'DEE WHY', 'NORTH CURL CURL',
                'NARRAWEENA', 'CROMER', 'COLLAROY', 'WHEELER HEIGHTS', 'NARRABEEN', 'NORTH NARRABEEN', 'ELANORA HEIGHTS',
                'INGLESIDE', 'WARRIEWOOD', 'MONA VALE', 'BAYVIEW', 'CHURCH POINT', 'NEWPORT', 'BILGOLA', 'AVALON',
                'WHALE BEACH', 'PALM BEACH',
                'ARTARMON', 'WILLOUGHBY', 'CASTLE COVE', 'MIDDLE COVE', 'CASTLECRAG', 'CHATSWOOD', 'ROSEVILLE', 'LINDFIELD',
                'KILLARA', 'GORDON', 'PYMBLE', 'TURRAMURRA', 'WARRAWEE', 'WAHROONGA', 'WAITARA', 'HORNSBY'
            ];

            // Inner West
            const innerWestSuburbs = [
                'ANNANDALE', 'BALMAIN', 'BIRCHGROVE', 'ROZELLE', 'LILYFIELD', 'LEICHHARDT', 'HABERFIELD', 'FIVE DOCK',
                'ABBOTSFORD', 'DRUMMOYNE', 'RUSSELL LEA', 'RODD POINT', 'ASHFIELD', 'SUMMER HILL', 'LEWISHAM', 'PETERSHAM',
                'STANMORE', 'ENMORE', 'MARRICKVILLE', 'DULWICH HILL', 'HURLSTONE PARK', 'CANTERBURY', 'CAMPSIE', 'BELMORE',
                'LAKEMBA', 'PUNCHBOWL', 'CROYDON', 'CROYDON PARK', 'BURWOOD', 'STRATHFIELD', 'CONCORD', 'RHODES'
            ];

            // Western Sydney
            const westernSydneySuburbs = [
                'PARRAMATTA', 'NORTH PARRAMATTA', 'HARRIS PARK', 'GRANVILLE', 'CLYDE', 'AUBURN', 'LIDCOMBE', 'BERALA',
                'REGENTS PARK', 'BIRRONG', 'YAGOONA', 'BASS HILL', 'SEFTON', 'CHESTER HILL', 'VILLAWOOD', 'CARRAMAR',
                'GUILDFORD', 'MERRYLANDS', 'MERRYLANDS WEST', 'GREYSTANES', 'PEMULWUY', 'WENTWORTHVILLE', 'WESTMEAD',
                'PENDLE HILL', 'TOONGABBIE', 'SEVEN HILLS', 'BLACKTOWN', 'PROSPECT', 'SMITHFIELD', 'WETHERILL PARK',
                'BOSSLEY PARK', 'PRAIRIEWOOD', 'FAIRFIELD', 'FAIRFIELD HEIGHTS', 'FAIRFIELD WEST', 'YENNORA', 'OLD GUILDFORD',
                'MOUNT DRUITT', 'ROOTY HILL', 'DOONSIDE', 'WOODCROFT', 'PLUMPTON', 'OAKHURST', 'HASSALL GROVE',
                'BIDWILL', 'SHALVEY', 'LETHBRIDGE PARK', 'TREGEAR', 'WHALAN', 'ROPES CROSSING', 'MARSDEN PARK',
                'SCHOFIELDS', 'QUAKERS HILL', 'RIVERSTONE', 'VINEYARD', 'WINDSOR', 'RICHMOND', 'NORTH RICHMOND',
                'PENRITH', 'KINGSWOOD', 'JAMISONTOWN', 'SOUTH PENRITH', 'CAMBRIDGE PARK', 'WERRINGTON', 'ST MARYS',
                'COLYTON', 'OXLEY PARK', 'ERSKINE PARK', 'ST CLAIR', 'EMU PLAINS', 'LEONAY', 'GLENMORE PARK'
            ];

            // North West
            const northWestSuburbs = [
                'BAULKHAM HILLS', 'CASTLE HILL', 'CHERRYBROOK', 'WEST PENNANT HILLS', 'PENNANT HILLS', 'CARLINGFORD',
                'BEECROFT', 'CHELTENHAM', 'EPPING', 'EASTWOOD', 'DENISTONE', 'RYDE', 'WEST RYDE', 'MEADOWBANK', 'MELROSE PARK',
                'ERMINGTON', 'RYDALMERE', 'DUNDAS', 'TELOPEA', 'OATLANDS', 'NORTH ROCKS', 'NORTHMEAD', 'WINSTON HILLS',
                'KELLYVILLE', 'BELLA VISTA', 'NORWEST', 'ROUSE HILL', 'KELLYVILLE RIDGE', 'THE PONDS', 'STANHOPE GARDENS',
                'GLENWOOD', 'THE HILLS DISTRICT'
            ];

            // South Sydney
            const southSydneySuburbs = [
                'MASCOT', 'BOTANY', 'BANKSMEADOW', 'PAGEWOOD', 'HILLSDALE', 'EASTGARDENS', 'MAROUBRA', 'CHIFLEY',
                'MALABAR', 'LITTLE BAY', 'LA PEROUSE', 'PHILLIP BAY', 'PORT BOTANY', 'BANKSMEADOW'
            ];

            // St George
            const stGeorgeSuburbs = [
                'KOGARAH', 'CARLTON', 'ALLAWAH', 'HURSTVILLE', 'PENSHURST', 'MORTDALE', 'OATLEY', 'LUGARNO',
                'PEAKHURST', 'PEAKHURST HEIGHTS', 'RIVERWOOD', 'NARWEE', 'BEVERLY HILLS', 'KINGSGROVE', 'BEXLEY',
                'BEXLEY NORTH', 'BARDWELL PARK', 'BARDWELL VALLEY', 'ARNCLIFFE', 'TURRELLA', 'WOLLI CREEK', 'TEMPE',
                'KYEEMAGH', 'BRIGHTON-LE-SANDS', 'MONTEREY', 'RAMSGATE', 'RAMSGATE BEACH', 'SANS SOUCI', 'DOLLS POINT',
                'SANDRINGHAM', 'BLAKEHURST', 'CARSS PARK', 'CONNELLS POINT', 'KYLE BAY', 'SOUTH HURSTVILLE'
            ];

            // Sutherland Shire
            const sutherlandShireSuburbs = [
                'CRONULLA', 'WOOLOOWARE', 'BURRANEER', 'CARINGBAH', 'CARINGBAH SOUTH', 'DOLANS BAY', 'LILLI PILLI',
                'PORT HACKING', 'MIRANDA', 'YOWIE BAY', 'GYMEA', 'GYMEA BAY', 'GRAYS POINT', 'KIRRAWEE', 'SYLVANIA',
                'SYLVANIA WATERS', 'TAREN POINT', 'KURNELL', 'BUNDEENA', 'MAIANBAR', 'COMO', 'JANNALI', 'SUTHERLAND',
                'LOFTUS', 'YARRAWARRAH', 'ENGADINE', 'HEATHCOTE', 'WATERFALL', 'WORONORA', 'WORONORA HEIGHTS', 'BANGOR',
                'BARDEN RIDGE', 'ALFORDS POINT', 'ILLAWONG', 'MENAI', 'LUCAS HEIGHTS', 'HOLSWORTHY'
            ];

            // South West
            const southWestSuburbs = [
                'LIVERPOOL', 'WARWICK FARM', 'CHIPPING NORTON', 'MOOREBANK', 'WATTLE GROVE', 'CASULA', 'PRESTONS',
                'LURNEA', 'SADLEIR', 'ASHCROFT', 'BUSBY', 'HECKENBERG', 'GREEN VALLEY', 'HINCHINBROOK', 'BONNYRIGG',
                'CABRAMATTA', 'CANLEY VALE', 'CANLEY HEIGHTS', 'LANSVALE', 'CARNES HILL', 'HORNINGSEA PARK', 'HOXTON PARK',
                'WEST HOXTON', 'MIDDLETON GRANGE', 'CECIL HILLS', 'ELIZABETH HILLS', 'ABBOTSBURY', 'EDENSOR PARK',
                'ST JOHNS PARK', 'WAKELEY', 'GREENFIELD PARK', 'PRAIRIEWOOD', 'MOUNT PRITCHARD', 'AUSTRAL', 'LEPPINGTON',
                'DENHAM COURT', 'INGLEBURN', 'MACQUARIE FIELDS', 'GLENFIELD', 'CASULA', 'EDMONDSON PARK', 'BARDIA'
            ];

            // Inner City
            const innerCitySuburbs = [
                'SYDNEY', 'SURRY HILLS', 'DARLINGHURST', 'REDFERN', 'NEWTOWN', 'GLEBE', 'ULTIMO', 'PYRMONT', 'CHIPPENDALE',
                'HAYMARKET', 'THE ROCKS', 'MILLERS POINT', 'BARANGAROO', 'WOOLLOOMOOLOO', 'POTTS POINT', 'ELIZABETH BAY',
                'RUSHCUTTERS BAY', 'DARLINGTON', 'ERSKINEVILLE', 'ALEXANDRIA', 'WATERLOO', 'ZETLAND', 'ROSEBERY'
            ];

            // Check which region the suburb belongs to
            if (easternSuburbs.includes(suburbName)) return 'Eastern Suburbs';
            if (northernSuburbs.includes(suburbName)) return 'Northern Suburbs';
            if (innerWestSuburbs.includes(suburbName)) return 'Inner West';
            if (westernSydneySuburbs.includes(suburbName)) return 'Western Sydney';
            if (northWestSuburbs.includes(suburbName)) return 'North West';
            if (southSydneySuburbs.includes(suburbName)) return 'South Sydney';
            if (stGeorgeSuburbs.includes(suburbName)) return 'St George';
            if (sutherlandShireSuburbs.includes(suburbName)) return 'Sutherland Shire';
            if (southWestSuburbs.includes(suburbName)) return 'South West';
            if (innerCitySuburbs.includes(suburbName)) return 'Inner City';

            return 'Other';
        }

        // Load the NSW suburbs GeoJSON file
        console.log('Fetching NSW suburbs GeoJSON file...');

        // Try to fetch from the API first
        fetch('http://localhost:3000/api/suburbs/geojson')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }
                console.log('GeoJSON response status from API:', response.status);
                return response.json();
            })
            .catch(error => {
                console.warn('Error fetching from API, falling back to local file:', error.message);
                // Fallback to local file
                return fetch('nsw_suburbs.geojson')
                    .then(response => {
                        console.log('GeoJSON response status from local file:', response.status);
                        return response.json();
                    });
            })
            .then(data => {
                console.log('GeoJSON data loaded successfully!');
                console.log('Number of features:', data.features.length);
                // Define Sydney region by name pattern instead of coordinates
                const sydneySuburbNames = [
                    'SYDNEY', 'BONDI', 'MANLY', 'PARRAMATTA', 'CHATSWOOD', 'CRONULLA',
                    'PENRITH', 'LIVERPOOL', 'BLACKTOWN', 'HORNSBY', 'RANDWICK', 'STRATHFIELD',
                    'BANKSTOWN', 'HURSTVILLE', 'KOGARAH', 'SUTHERLAND', 'CAMPBELLTOWN',
                    'NORTH SYDNEY', 'RYDE', 'EASTWOOD', 'EPPING', 'AUBURN', 'LIDCOMBE',
                    'BALMAIN', 'NEWTOWN', 'PADDINGTON', 'SURRY HILLS', 'REDFERN', 'GLEBE',
                    'LEICHHARDT', 'ASHFIELD', 'BURWOOD', 'CANTERBURY', 'ROCKDALE', 'MIRANDA',
                    'CARINGBAH', 'MAROUBRA', 'COOGEE', 'KENSINGTON', 'KINGSFORD', 'MASCOT',
                    'BOTANY', 'ALEXANDRIA', 'ERSKINEVILLE', 'MARRICKVILLE', 'DULWICH HILL',
                    'SUMMER HILL', 'HOMEBUSH', 'CONCORD', 'DRUMMOYNE', 'FIVE DOCK', 'CROYDON',
                    'CAMPSIE', 'BELMORE', 'PUNCHBOWL', 'LAKEMBA', 'GREENACRE', 'FAIRFIELD',
                    'CABRAMATTA', 'MERRYLANDS', 'GUILDFORD', 'GRANVILLE', 'AUBURN', 'LIDCOMBE',
                    'HOMEBUSH', 'STRATHFIELD', 'BURWOOD', 'ASHFIELD', 'CROYDON', 'PETERSHAM',
                    'STANMORE', 'ENMORE', 'ST PETERS', 'TEMPE', 'ARNCLIFFE', 'BEXLEY',
                    'BEVERLY HILLS', 'KINGSGROVE', 'RIVERWOOD', 'NARWEE', 'PADSTOW', 'REVESBY',
                    'PANANIA', 'EAST HILLS', 'MILPERRA', 'BASS HILL', 'CHESTER HILL', 'SEFTON',
                    'BIRRONG', 'YAGOONA', 'CONDELL PARK', 'GREENACRE', 'MOUNT LEWIS', 'PUNCHBOWL',
                    'ROSELANDS', 'WILEY PARK', 'LAKEMBA', 'BELMORE', 'CAMPSIE', 'CLEMTON PARK',
                    'EARLWOOD', 'BARDWELL PARK', 'BEXLEY NORTH', 'KINGSGROVE', 'BEVERLY HILLS',
                    'NARWEE', 'RIVERWOOD', 'PEAKHURST', 'LUGARNO', 'OATLEY', 'MORTDALE',
                    'PENSHURST', 'HURSTVILLE', 'ALLAWAH', 'CARLTON', 'KOGARAH', 'BEXLEY',
                    'ARNCLIFFE', 'TURRELLA', 'WOLLI CREEK', 'TEMPE', 'SYDENHAM', 'ST PETERS',
                    'ERSKINEVILLE', 'ALEXANDRIA', 'BEACONSFIELD', 'ZETLAND', 'WATERLOO', 'REDFERN',
                    'CHIPPENDALE', 'ULTIMO', 'PYRMONT', 'GLEBE', 'FOREST LODGE', 'ANNANDALE',
                    'LILYFIELD', 'ROZELLE', 'BALMAIN', 'BIRCHGROVE', 'DRUMMOYNE', 'RUSSELL LEA',
                    'FIVE DOCK', 'ABBOTSFORD', 'CHISWICK', 'WAREEMBA', 'CONCORD', 'NORTH STRATHFIELD',
                    'CONCORD WEST', 'RHODES', 'LIBERTY GROVE', 'NEWINGTON', 'WENTWORTH POINT',
                    'SYDNEY OLYMPIC PARK', 'LIDCOMBE', 'BERALA', 'REGENTS PARK', 'POTTS HILL',
                    'YAGOONA', 'BASS HILL', 'GEORGES HALL', 'LANSDOWNE', 'CARRAMAR', 'VILLAWOOD',
                    'LEIGHTONFIELD', 'CHESTER HILL', 'SEFTON', 'BIRRONG', 'REGENTS PARK', 'BERALA',
                    'LIDCOMBE', 'ROOKWOOD', 'STRATHFIELD SOUTH', 'ENFIELD', 'CROYDON PARK',
                    'BURWOOD HEIGHTS', 'CROYDON', 'ASHFIELD', 'SUMMER HILL', 'LEWISHAM', 'PETERSHAM',
                    'STANMORE', 'NEWTOWN', 'ENMORE', 'MARRICKVILLE', 'DULWICH HILL', 'HURLSTONE PARK',
                    'CANTERBURY', 'CAMPSIE', 'BELMORE', 'LAKEMBA', 'WILEY PARK', 'PUNCHBOWL',
                    'ROSELANDS', 'KINGSGROVE', 'BEVERLY HILLS', 'NARWEE', 'RIVERWOOD', 'PADSTOW',
                    'REVESBY', 'PANANIA', 'EAST HILLS', 'VOYAGER POINT', 'HOLSWORTHY', 'WATTLE GROVE',
                    'MOOREBANK', 'CHIPPING NORTON', 'WARWICK FARM', 'LIVERPOOL', 'CASULA', 'LURNEA',
                    'PRESTONS', 'EDMONDSON PARK', 'INGLEBURN', 'MINTO', 'CAMPBELLTOWN', 'MACQUARIE FIELDS',
                    'GLENFIELD', 'CASULA', 'LIVERPOOL', 'WARWICK FARM', 'CHIPPING NORTON', 'MOOREBANK',
                    'MILPERRA', 'EAST HILLS', 'PANANIA', 'REVESBY', 'PADSTOW', 'RIVERWOOD', 'NARWEE',
                    'BEVERLY HILLS', 'KINGSGROVE', 'BEXLEY', 'ROCKDALE', 'BANKSIA', 'KYEEMAGH', 'BRIGHTON-LE-SANDS',
                    'MONTEREY', 'RAMSGATE', 'SANS SOUCI', 'DOLLS POINT', 'SANDRINGHAM', 'KOGARAH BAY',
                    'CARSS PARK', 'BLAKEHURST', 'SOUTH HURSTVILLE', 'CONNELLS POINT', 'KYLE BAY',
                    'KANGAROO POINT', 'SYLVANIA WATERS', 'SYLVANIA', 'MIRANDA', 'GYMEA', 'KIRRAWEE',
                    'SUTHERLAND', 'JANNALI', 'COMO', 'OYSTER BAY', 'KAREELA', 'YOWIE BAY', 'GYMEA BAY',
                    'GRAYS POINT', 'WOOLOOWARE', 'BURRANEER', 'CRONULLA', 'GREENHILLS BEACH', 'KURNELL'
                ];

                // Process each feature to add metrics and zone
                let nswSuburbsCount = 0;
                data.features.forEach(feature => {
                    // Include all NSW suburbs
                    const isInNSW = true;

                    // Get the suburb name
                    const suburbName = feature.properties.nsw_loca_2;

                    if (suburbName) {
                        nswSuburbsCount++;
                        console.log('NSW suburb found:', suburbName);
                    }

                    if (isInNSW) {
                        // Initialize with unclassified zone
                        feature.properties.zone = 'unclassified';
                        feature.properties.metrics = {};

                        // Check if the suburb is in Sydney or nearby areas
                        const suburbName = feature.properties.nsw_loca_2;
                        const isSydneyArea = isSydneyOrNearbySuburb(suburbName);

                        // Only process Sydney and nearby areas
                        feature.properties.inFocusArea = isSydneyArea;

                        if (isSydneyArea) {
                            console.log(`Found Sydney area suburb: ${suburbName}`);
                        }

                        // We'll batch load the zones after the map is initialized
                        // This provides a better user experience

                        // Add the feature to the map
                        const layer = L.geoJSON(feature, {
                            style: style,
                            onEachFeature: (feature, layer) => {
                                layer.on({
                                    click: () => {
                                        // Create suburb object
                                        const suburb = {
                                            id: feature.id,
                                            name: feature.properties.nsw_loca_2,
                                            zone: feature.properties.zone,
                                            metrics: feature.properties.metrics
                                        };

                                        // Update the details panel with current data
                                        updateSuburbDetails(suburb);

                                        // Get the postcode from the feature properties
                                        const postcode = feature.properties.nsw_loca_3 || '2000'; // Default to Sydney CBD if not available

                                        // Fetch updated data from the integrated API
                                        fetch(`http://localhost:3000/api/integration/zone/${encodeURIComponent(feature.properties.nsw_loca_2)}/${encodeURIComponent(postcode)}`)
                                            .then(response => {
                                                if (!response.ok) {
                                                    throw new Error(`API error: ${response.status}`);
                                                }
                                                return response.json();
                                            })
                                            .then(data => {
                                                // Update the feature properties with real data
                                                feature.properties.metrics = data.metrics;
                                                feature.properties.mlPrediction = data.mlPrediction;
                                                feature.properties.zoningDecision = data.zoningDecision;

                                                // Use our custom zoning logic instead of OpenAI
                                                const suburbName = feature.properties.nsw_loca_2;
                                                const finalZone = determineZone(data.metrics, suburbName);
                                                feature.properties.zone = finalZone;
                                                feature.properties.confidence = 95; // High confidence since we're using our custom logic

                                                // Update the layer style
                                                layer.setStyle({
                                                    fillColor: getZoneColor(finalZone),
                                                    weight: 3,
                                                    opacity: 1,
                                                    color: '#666',
                                                    fillOpacity: 0.8
                                                });

                                                // Update the details panel with new data
                                                const updatedSuburb = {
                                                    id: feature.id,
                                                    name: feature.properties.nsw_loca_2,
                                                    postcode: postcode,
                                                    zone: finalZone,
                                                    metrics: data.metrics,
                                                    confidence: 95, // High confidence since we're using our custom logic
                                                    mlPrediction: data.mlPrediction,
                                                    zoningDecision: data.zoningDecision
                                                };
                                                updateSuburbDetails(updatedSuburb);

                                                // Update statistics
                                                updateZoneStatistics();
                                            })
                                            .catch(error => {
                                                console.warn(`Error fetching data for ${feature.properties.nsw_loca_2}:`, error.message);
                                            });
                                    },
                                    mouseover: (e) => {
                                        const layer = e.target;
                                        layer.setStyle({
                                            weight: 3,
                                            color: '#666',
                                            dashArray: '',
                                            fillOpacity: 0.8
                                        });
                                        layer.bringToFront();
                                    },
                                    mouseout: (e) => {
                                        const layer = e.target;
                                        layer.setStyle(style(feature));
                                    }
                                });
                            }
                        }).addTo(map);

                        // Add tooltip
                        layer.bindTooltip(feature.properties.nsw_loca_2, { sticky: true });
                    }
                });

                console.log('Total NSW suburbs found:', nswSuburbsCount);

                // Update statistics
                updateZoneStatistics();

                // Start loading zones from cache
                setTimeout(() => {
                    // Hide initial loading overlay
                    document.getElementById('loading-overlay').style.display = 'none';

                    // Then load zones from cache
                    loadZonesFromCache();
                }, 1000);

                // Initialize search and filter functionality
                initializeSearchAndFilter();
            })
            .catch(error => {
                console.error('Error loading GeoJSON:', error);
                document.getElementById('loading-overlay').innerHTML = `
                    <p>Error loading suburb data: ${error.message}</p>
                    <p>Please refresh the page to try again.</p>
                `;
            });

        // Function to update zone statistics
        function updateZoneStatistics() {
            let greenCount = 0;
            let orangeCount = 0;
            let redCount = 0;
            let totalCount = 0;

            // Count suburbs by zone
            map.eachLayer(layer => {
                if (layer.feature && layer.feature.properties.zone) {
                    const zone = layer.feature.properties.zone;

                    // Only count classified zones in the total
                    if (zone !== 'unclassified') {
                        totalCount++;
                    }

                    if (zone === 'green') {
                        greenCount++;
                    } else if (zone === 'orange') {
                        orangeCount++;
                    } else if (zone === 'red') {
                        redCount++;
                    }
                }
            });

            // Update the statistics display
            document.getElementById('green-count').textContent = greenCount;
            document.getElementById('orange-count').textContent = orangeCount;
            document.getElementById('red-count').textContent = redCount;
            document.getElementById('total-count').textContent = totalCount;
        }

        // Simulated cache for zone data
        const zoneDataCache = {
            lastUpdated: '2023-04-15 08:00:00',
            updateFrequency: 'Daily at 08:00 AM',
            data: {}
        };

        // Function to check if cache needs updating
        function isCacheValid() {
            // In a real system, this would check if the cache is still valid based on the update frequency
            // For this demo, we'll simulate that the cache is always valid
            return true;
        }

        // Function to load zones from cache or update if needed
        async function loadZonesFromCache() {
            console.log('Loading zones from cache...');
            document.getElementById('loading-overlay').style.display = 'flex';
            document.getElementById('loading-message').textContent = 'Loading cached zone data...';

            // Check if we need to update the cache
            if (!isCacheValid()) {
                document.getElementById('loading-message').textContent = 'Updating zone data cache...';
                await updateZoneCache();
            } else {
                console.log('Using existing zone cache from ' + zoneDataCache.lastUpdated);
            }

            // Apply cached zone data to the map
            await applyZoneDataToMap();

            // Update statistics
            updateZoneStatistics();

            // Update cache timestamp display
            document.getElementById('cache-timestamp').textContent = zoneDataCache.lastUpdated;

            // Hide loading overlay
            document.getElementById('loading-overlay').style.display = 'none';
            console.log('Loading zones from cache completed!');
        }

        // Function to update the zone cache (simulated)
        async function updateZoneCache() {
            console.log('Updating zone cache...');

            // Get all suburb layers
            const suburbLayers = {};
            const suburbsToProcess = [];

            map.eachLayer(layer => {
                if (layer.feature && layer.feature.properties.nsw_loca_2) {
                    const suburbName = layer.feature.properties.nsw_loca_2;
                    const postcode = layer.feature.properties.nsw_loca_3 || '2000';
                    suburbLayers[suburbName] = layer;

                    // Add to processing queue
                    suburbsToProcess.push({
                        name: suburbName,
                        postcode: postcode,
                        layer: layer
                    });
                }
            });

            // Process all suburbs
            const batchSize = 10;
            const totalSuburbs = suburbsToProcess.length;
            let processedCount = 0;

            for (let i = 0; i < suburbsToProcess.length; i += batchSize) {
                const batch = suburbsToProcess.slice(i, i + batchSize);

                // Process batch in parallel
                await Promise.all(batch.map(async (item) => {
                    try {
                        // In a real system, this would call the API
                        // For this demo, we'll use our mock data generator
                        const data = await generateMockData(item.name);

                        // Use our custom zoning logic
                        const suburbName = item.name;
                        const finalZone = determineZone(data.metrics, suburbName);

                        // Store in cache
                        zoneDataCache.data[suburbName] = {
                            metrics: data.metrics,
                            mlPrediction: data.mlPrediction,
                            zoningDecision: data.zoningDecision,
                            zone: finalZone,
                            confidence: 95, // High confidence since we're using our custom logic
                            postcode: item.postcode
                        };
                    } catch (error) {
                        console.warn(`Error processing suburb ${item.name}:`, error.message);
                        // Set a default zone for error cases
                        zoneDataCache.data[item.name] = {
                            zone: 'unclassified'
                        };
                    }

                    // Update progress
                    processedCount++;
                    const progress = Math.round((processedCount / totalSuburbs) * 100);
                    document.getElementById('loading-message').textContent = `Updating zone data cache: ${progress}% complete`;
                }));

                // Small delay between batches
                await new Promise(resolve => setTimeout(resolve, 100));
            }

            // Update the cache timestamp
            zoneDataCache.lastUpdated = new Date().toLocaleString();
            console.log('Zone cache updated at ' + zoneDataCache.lastUpdated);
        }

        // Function to apply cached zone data to the map
        async function applyZoneDataToMap() {
            console.log('Applying cached zone data to map...');

            // Get all suburb features
            map.eachLayer(layer => {
                if (layer.feature && layer.feature.properties.nsw_loca_2) {
                    const name = layer.feature.properties.nsw_loca_2;

                    // Mark all Sydney suburbs as in focus area
                    if (isSydneyOrNearbySuburb(name)) {
                        layer.feature.properties.inFocusArea = true;
                    }

                    // Skip if not in focus area
                    if (!layer.feature.properties.inFocusArea) {
                        return;
                    }

                    // Check if we have cached data for this suburb
                    if (zoneDataCache.data[name]) {
                        const cachedData = zoneDataCache.data[name];

                        // Apply cached data to the feature
                        layer.feature.properties.metrics = cachedData.metrics;
                        layer.feature.properties.mlPrediction = cachedData.mlPrediction;
                        layer.feature.properties.zoningDecision = cachedData.zoningDecision;
                        layer.feature.properties.zone = cachedData.zone;
                        layer.feature.properties.confidence = cachedData.confidence;

                        // Update the layer style
                        layer.setStyle({
                            fillColor: getZoneColor(cachedData.zone),
                            weight: 1,
                            opacity: 1,
                            color: '#666',
                            fillOpacity: 0.7
                        });
                    } else {
                        // No cached data, set as unclassified
                        layer.feature.properties.zone = 'unclassified';
                    }
                }
            });

            console.log('Applied cached zone data to map');
        }

        // Function to batch load zones for all suburbs (legacy function, now uses cache)
        async function batchLoadZones() {
            // Now just calls the cached version
            await loadZonesFromCache();
        }

        // Function to initialize search and filter functionality
        function initializeSearchAndFilter() {
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            const zoneFilter = document.getElementById('zone-filter');

            // Store all suburb layers for filtering
            const suburbLayers = {};

            // Get all suburb layers from the map
            map.eachLayer(layer => {
                if (layer.feature && layer.feature.properties.nsw_loca_2) {
                    const suburbName = layer.feature.properties.nsw_loca_2;
                    suburbLayers[suburbName] = layer;
                }
            });

            // Search functionality
            searchButton.addEventListener('click', () => {
                const searchTerm = searchInput.value.trim().toUpperCase();
                if (searchTerm === '') return;

                // Find the suburb
                let found = false;
                for (const suburbName in suburbLayers) {
                    if (suburbName.toUpperCase().includes(searchTerm)) {
                        const layer = suburbLayers[suburbName];
                        const bounds = layer.getBounds();
                        map.fitBounds(bounds);
                        layer.fire('click');
                        found = true;
                        break;
                    }
                }

                if (!found) {
                    alert(`Suburb "${searchInput.value}" not found.`);
                }
            });

            // Allow search on Enter key
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchButton.click();
                }
            });

            // Filter functionality
            zoneFilter.addEventListener('change', () => {
                const selectedZone = zoneFilter.value;

                for (const suburbName in suburbLayers) {
                    const layer = suburbLayers[suburbName];
                    const zone = layer.feature.properties.zone;

                    if (selectedZone === 'all' || zone === selectedZone) {
                        layer.addTo(map);
                    } else {
                        map.removeLayer(layer);
                    }
                }

                // Update statistics after filtering
                updateZoneStatistics();
            });

            // Navigation functionality
            const navLinks = document.querySelectorAll('.nav-link');
            const pageContents = document.querySelectorAll('.page-content');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();

                    // Remove active class from all links
                    navLinks.forEach(l => l.classList.remove('active'));

                    // Add active class to clicked link
                    link.classList.add('active');

                    // Get the page ID from data attribute
                    const pageId = link.getAttribute('data-page');

                    // Hide all pages
                    pageContents.forEach(page => {
                        page.classList.remove('active');
                    });

                    // Show the selected page
                    document.getElementById(pageId).classList.add('active');

                    // If it's the map view, trigger a resize event to fix the map
                    if (pageId === 'map-view') {
                        setTimeout(() => {
                            window.dispatchEvent(new Event('resize'));
                        }, 100);
                    }

                    // If it's the analytics page, initialize charts
                    if (pageId === 'analytics') {
                        initializeCharts();
                    }
                });
            });

            // Initialize charts for analytics page
            function initializeCharts() {
                // Zone Distribution Chart
                const zoneDistributionCtx = document.getElementById('zone-distribution-chart').getContext('2d');
                new Chart(zoneDistributionCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Green Zone', 'Orange Zone', 'Red Zone'],
                        datasets: [{
                            data: [greenCount, orangeCount, redCount],
                            backgroundColor: ['#00cc66', '#ff9900', '#ff3333'],
                            borderColor: ['#00aa55', '#ff6600', '#cc0000'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                            },
                            title: {
                                display: true,
                                text: 'Zone Distribution'
                            }
                        }
                    }
                });

                // Metrics by Zone Chart
                const metricsByZoneCtx = document.getElementById('metrics-by-zone-chart').getContext('2d');
                new Chart(metricsByZoneCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Growth', 'Equity', 'Volatility', 'Affordability', 'Infrastructure'],
                        datasets: [
                            {
                                label: 'Green Zone',
                                data: [8.5, 65, 3.2, 75, 8.5],
                                backgroundColor: 'rgba(0, 204, 102, 0.5)',
                                borderColor: '#00cc66',
                                borderWidth: 1
                            },
                            {
                                label: 'Orange Zone',
                                data: [6.2, 52, 5.5, 62, 6.8],
                                backgroundColor: 'rgba(255, 153, 0, 0.5)',
                                borderColor: '#ff9900',
                                borderWidth: 1
                            },
                            {
                                label: 'Red Zone',
                                data: [3.8, 38, 7.8, 48, 4.5],
                                backgroundColor: 'rgba(255, 51, 51, 0.5)',
                                borderColor: '#ff3333',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

                // Trend Analysis Chart
                const trendAnalysisCtx = document.getElementById('trend-analysis-chart').getContext('2d');
                new Chart(trendAnalysisCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [
                            {
                                label: 'Green Zone Growth',
                                data: [7.2, 7.5, 7.8, 8.0, 8.2, 8.5, 8.7, 8.9, 9.1, 9.3, 9.5, 9.8],
                                borderColor: '#00cc66',
                                backgroundColor: 'rgba(0, 204, 102, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Orange Zone Growth',
                                data: [5.8, 5.9, 6.0, 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8, 6.9],
                                borderColor: '#ff9900',
                                backgroundColor: 'rgba(255, 153, 0, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Red Zone Growth',
                                data: [3.5, 3.6, 3.7, 3.7, 3.8, 3.8, 3.9, 3.9, 4.0, 4.0, 4.1, 4.1],
                                borderColor: '#ff3333',
                                backgroundColor: 'rgba(255, 51, 51, 0.1)',
                                tension: 0.4,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false
                            }
                        }
                    }
                });

                // Geographic Distribution Chart (placeholder)
                const geoDistributionCtx = document.getElementById('geographic-distribution-chart').getContext('2d');
                new Chart(geoDistributionCtx, {
                    type: 'polarArea',
                    data: {
                        labels: ['North Sydney', 'Eastern Suburbs', 'Inner West', 'South Sydney', 'Western Sydney'],
                        datasets: [{
                            data: [65, 72, 58, 45, 38],
                            backgroundColor: [
                                'rgba(0, 204, 102, 0.5)',
                                'rgba(0, 153, 204, 0.5)',
                                'rgba(255, 153, 0, 0.5)',
                                'rgba(255, 102, 0, 0.5)',
                                'rgba(255, 51, 51, 0.5)'
                            ],
                            borderColor: [
                                '#00cc66',
                                '#0099cc',
                                '#ff9900',
                                '#ff6600',
                                '#ff3333'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }

            // Map control buttons functionality
            document.getElementById('zoom-sydney').addEventListener('click', () => {
                map.setView([-33.8688, 151.2093], 10);
            });

            // Cache refresh button functionality
            document.getElementById('refresh-cache-btn').addEventListener('click', async () => {
                // Show loading overlay
                document.getElementById('loading-overlay').style.display = 'flex';
                document.getElementById('loading-message').textContent = 'Refreshing zone data cache...';

                // Force cache update
                await updateZoneCache();

                // Apply updated cache to map
                await applyZoneDataToMap();

                // Update statistics
                updateZoneStatistics();

                // Update cache timestamp display
                document.getElementById('cache-timestamp').textContent = zoneDataCache.lastUpdated;
                document.getElementById('last-update').value = zoneDataCache.lastUpdated;

                // Hide loading overlay
                document.getElementById('loading-overlay').style.display = 'none';

                console.log('Cache refreshed manually at ' + zoneDataCache.lastUpdated);
            });

            // Settings page functionality
            function initializeSettingsPage() {
                // Range sliders with value display
                document.querySelectorAll('.settings-range').forEach(range => {
                    const valueDisplay = range.parentElement.querySelector('.range-value');
                    if (valueDisplay) {
                        // Update value display on input
                        range.addEventListener('input', () => {
                            let value = range.value;
                            // Add % sign for percentage values
                            if (range.id === 'confidence-threshold') {
                                value += '%';
                            }
                            valueDisplay.textContent = value;
                        });
                    }
                });

                // Color picker sync with text input
                document.querySelectorAll('.settings-color').forEach(colorPicker => {
                    const textInput = colorPicker.parentElement.querySelector('.color-text-input');
                    if (textInput) {
                        // Update text input when color changes
                        colorPicker.addEventListener('input', () => {
                            textInput.value = colorPicker.value.toUpperCase();
                        });

                        // Update color picker when text changes
                        textInput.addEventListener('input', () => {
                            // Validate hex color format
                            if (/^#[0-9A-F]{6}$/i.test(textInput.value)) {
                                colorPicker.value = textInput.value;
                            }
                        });
                    }
                });

                // Password toggle visibility
                document.querySelectorAll('.toggle-password').forEach(toggleBtn => {
                    const passwordInput = toggleBtn.parentElement.querySelector('input');
                    if (passwordInput) {
                        toggleBtn.addEventListener('click', () => {
                            // Toggle between password and text type
                            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                            passwordInput.setAttribute('type', type);

                            // Toggle icon
                            const icon = toggleBtn.querySelector('i');
                            if (icon) {
                                icon.classList.toggle('fa-eye');
                                icon.classList.toggle('fa-eye-slash');
                            }
                        });
                    }
                });

                // Save buttons functionality
                document.querySelectorAll('.settings-save-btn').forEach(saveBtn => {
                    saveBtn.addEventListener('click', () => {
                        // Get the section this button belongs to
                        const section = saveBtn.closest('.settings-section');
                        if (section) {
                            const sectionTitle = section.querySelector('h3').textContent;

                            // Show success message
                            showNotification(`${sectionTitle} saved successfully!`, 'success');

                            // In a real app, we would save the settings to a database or local storage here
                            console.log(`Saving settings for section: ${sectionTitle}`);
                        }
                    });
                });

                // Force update button
                const forceUpdateBtn = document.getElementById('force-update');
                if (forceUpdateBtn) {
                    forceUpdateBtn.addEventListener('click', async () => {
                        // Show confirmation dialog
                        if (confirm('Are you sure you want to force an update now? This may take a few minutes.')) {
                            // Show loading state
                            forceUpdateBtn.disabled = true;
                            forceUpdateBtn.textContent = 'Updating...';

                            // Simulate update process
                            setTimeout(async () => {
                                // Refresh cache
                                await updateZoneCache();
                                await applyZoneDataToMap();
                                updateZoneStatistics();

                                // Update timestamp displays
                                document.getElementById('cache-timestamp').textContent = zoneDataCache.lastUpdated;
                                document.getElementById('last-update').value = zoneDataCache.lastUpdated;

                                // Reset button
                                forceUpdateBtn.disabled = false;
                                forceUpdateBtn.textContent = 'Update Now';

                                // Show success message
                                showNotification('Data updated successfully!', 'success');
                            }, 3000);
                        }
                    });
                }

                // Map style selector
                const mapStyleSelect = document.getElementById('map-style');
                if (mapStyleSelect) {
                    mapStyleSelect.addEventListener('change', () => {
                        const style = mapStyleSelect.value;
                        // In a real app, we would change the map style here
                        console.log(`Changing map style to: ${style}`);
                    });
                }

                // Polygon opacity slider
                const opacitySlider = document.getElementById('polygon-opacity');
                if (opacitySlider) {
                    opacitySlider.addEventListener('change', () => {
                        const opacity = parseFloat(opacitySlider.value);
                        // Update all polygon opacities
                        map.eachLayer(layer => {
                            if (layer.feature && layer.feature.properties.zone) {
                                layer.setStyle({ fillOpacity: opacity });
                            }
                        });
                    });
                }

                // Export settings button
                const exportBtn = document.getElementById('export-settings');
                if (exportBtn) {
                    exportBtn.addEventListener('click', () => {
                        // In a real app, we would export the settings to a JSON file here
                        const settings = {
                            map: {
                                style: document.getElementById('map-style').value,
                                defaultZoom: document.getElementById('default-zoom').value,
                                polygonOpacity: document.getElementById('polygon-opacity').value,
                                showLabels: document.getElementById('show-labels').checked
                            },
                            zoneColors: {
                                green: document.getElementById('green-zone-color').value,
                                orange: document.getElementById('orange-zone-color').value,
                                red: document.getElementById('red-zone-color').value,
                                unclassified: document.getElementById('unclassified-color').value
                            },
                            model: {
                                activeModel: document.getElementById('active-model').value,
                                confidenceThreshold: document.getElementById('confidence-threshold').value,
                                useAIRefinement: document.getElementById('use-ai-refinement').checked,
                                enableGPU: document.getElementById('enable-gpu').checked
                            },
                            featureWeights: {
                                growth: document.getElementById('growth-weight').value,
                                volatility: document.getElementById('volatility-weight').value,
                                equity: document.getElementById('equity-weight').value
                            },
                            dataSources: {
                                propertyData: document.getElementById('property-data-source').value,
                                demographicData: document.getElementById('demographic-data-source').value
                            },
                            updateSchedule: {
                                frequency: document.getElementById('update-frequency').value,
                                time: document.getElementById('update-time').value
                            },
                            ui: {
                                theme: document.getElementById('theme').value,
                                accentColor: document.getElementById('accent-color').value,
                                enableAnimations: document.getElementById('enable-animations').checked,
                                compactView: document.getElementById('compact-view').checked
                            },
                            system: {
                                logLevel: document.getElementById('log-level').value,
                                enableTelemetry: document.getElementById('enable-telemetry').checked,
                                enableCrashReports: document.getElementById('enable-crash-reports').checked
                            }
                        };

                        // Create a download link for the settings JSON
                        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(settings, null, 2));
                        const downloadAnchorNode = document.createElement('a');
                        downloadAnchorNode.setAttribute("href", dataStr);
                        downloadAnchorNode.setAttribute("download", "equihome-tls-settings.json");
                        document.body.appendChild(downloadAnchorNode);
                        downloadAnchorNode.click();
                        downloadAnchorNode.remove();

                        showNotification('Settings exported successfully!', 'success');
                    });
                }

                // Import settings button
                const importBtn = document.getElementById('import-settings');
                if (importBtn) {
                    importBtn.addEventListener('click', () => {
                        // Create a file input element
                        const fileInput = document.createElement('input');
                        fileInput.type = 'file';
                        fileInput.accept = '.json';
                        fileInput.style.display = 'none';
                        document.body.appendChild(fileInput);

                        fileInput.addEventListener('change', (event) => {
                            const file = event.target.files[0];
                            if (file) {
                                const reader = new FileReader();
                                reader.onload = (e) => {
                                    try {
                                        const settings = JSON.parse(e.target.result);
                                        // In a real app, we would apply the imported settings here
                                        console.log('Imported settings:', settings);
                                        showNotification('Settings imported successfully!', 'success');
                                    } catch (error) {
                                        console.error('Error parsing settings file:', error);
                                        showNotification('Error importing settings. Invalid file format.', 'error');
                                    }
                                };
                                reader.readAsText(file);
                            }
                            fileInput.remove();
                        });

                        fileInput.click();
                    });
                }

                // Theme selector
                const themeSelect = document.getElementById('theme');
                if (themeSelect) {
                    themeSelect.addEventListener('change', () => {
                        const theme = themeSelect.value;
                        // In a real app, we would change the theme here
                        console.log(`Changing theme to: ${theme}`);

                        // Simulate theme change
                        if (theme === 'dark') {
                            document.body.classList.add('dark-theme');
                        } else {
                            document.body.classList.remove('dark-theme');
                        }
                    });
                }

                // Advanced weights button
                const advancedWeightsBtn = document.getElementById('advanced-weights');
                if (advancedWeightsBtn) {
                    advancedWeightsBtn.addEventListener('click', () => {
                        // In a real app, we would show a modal with advanced weight settings
                        showModal('Advanced Feature Weights', `
                            <div class="advanced-weights-modal">
                                <div class="modal-section">
                                    <h4>Primary Metrics</h4>
                                    <div class="settings-control">
                                        <label for="modal-growth-weight">Growth Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-growth-weight" min="1" max="20" value="20" class="settings-range">
                                            <span class="range-value">20</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="modal-volatility-weight">Volatility Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-volatility-weight" min="1" max="20" value="15" class="settings-range">
                                            <span class="range-value">15</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="modal-equity-weight">Equity Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-equity-weight" min="1" max="20" value="15" class="settings-range">
                                            <span class="range-value">15</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="modal-liquidity-weight">Liquidity Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-liquidity-weight" min="1" max="20" value="10" class="settings-range">
                                            <span class="range-value">10</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="modal-crime-weight">Crime Rate Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-crime-weight" min="1" max="20" value="10" class="settings-range">
                                            <span class="range-value">10</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-section">
                                    <h4>Secondary Metrics</h4>
                                    <div class="settings-control">
                                        <label for="modal-affordability-weight">Affordability Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-affordability-weight" min="1" max="10" value="8" class="settings-range">
                                            <span class="range-value">8</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="modal-infrastructure-weight">Infrastructure Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-infrastructure-weight" min="1" max="10" value="7" class="settings-range">
                                            <span class="range-value">7</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="modal-schools-weight">Schools Rating Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-schools-weight" min="1" max="10" value="7" class="settings-range">
                                            <span class="range-value">7</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="modal-employment-weight">Employment Rate Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-employment-weight" min="1" max="10" value="5" class="settings-range">
                                            <span class="range-value">5</span>
                                        </div>
                                    </div>
                                    <div class="settings-control">
                                        <label for="modal-population-weight">Population Growth Weight:</label>
                                        <div class="range-with-value">
                                            <input type="range" id="modal-population-weight" min="1" max="10" value="8" class="settings-range">
                                            <span class="range-value">8</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `);

                        // Initialize range sliders in the modal
                        document.querySelectorAll('.modal-content .settings-range').forEach(range => {
                            const valueDisplay = range.parentElement.querySelector('.range-value');
                            if (valueDisplay) {
                                range.addEventListener('input', () => {
                                    valueDisplay.textContent = range.value;
                                });
                            }
                        });
                    });
                }
            }

            // Notification system
            function showNotification(message, type = 'info') {
                // Create notification element if it doesn't exist
                let notificationContainer = document.getElementById('notification-container');
                if (!notificationContainer) {
                    notificationContainer = document.createElement('div');
                    notificationContainer.id = 'notification-container';
                    document.body.appendChild(notificationContainer);
                }

                // Create notification
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;

                // Add icon based on type
                let icon = 'info-circle';
                if (type === 'success') icon = 'check-circle';
                if (type === 'error') icon = 'exclamation-circle';
                if (type === 'warning') icon = 'exclamation-triangle';

                notification.innerHTML = `
                    <i class="fas fa-${icon}"></i>
                    <span>${message}</span>
                    <button class="close-notification"><i class="fas fa-times"></i></button>
                `;

                // Add to container
                notificationContainer.appendChild(notification);

                // Add close button functionality
                notification.querySelector('.close-notification').addEventListener('click', () => {
                    notification.classList.add('notification-hiding');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                });

                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.classList.add('notification-hiding');
                        setTimeout(() => {
                            if (notification.parentNode) {
                                notification.remove();
                            }
                        }, 300);
                    }
                }, 5000);
            }

            // Modal system
            function showModal(title, content) {
                // Create modal container if it doesn't exist
                let modalContainer = document.getElementById('modal-container');
                if (!modalContainer) {
                    modalContainer = document.createElement('div');
                    modalContainer.id = 'modal-container';
                    document.body.appendChild(modalContainer);
                }

                // Create modal
                const modal = document.createElement('div');
                modal.className = 'modal';
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>${title}</h3>
                            <button class="close-modal"><i class="fas fa-times"></i></button>
                        </div>
                        <div class="modal-body">
                            ${content}
                        </div>
                        <div class="modal-footer">
                            <button class="modal-btn cancel-btn">Cancel</button>
                            <button class="modal-btn save-btn">Save Changes</button>
                        </div>
                    </div>
                `;

                // Add to container
                modalContainer.appendChild(modal);

                // Show modal with animation
                setTimeout(() => {
                    modal.classList.add('modal-visible');
                }, 10);

                // Add close functionality
                const closeModal = () => {
                    modal.classList.remove('modal-visible');
                    setTimeout(() => {
                        modal.remove();
                    }, 300);
                };

                modal.querySelector('.close-modal').addEventListener('click', closeModal);
                modal.querySelector('.cancel-btn').addEventListener('click', closeModal);

                // Add save functionality
                modal.querySelector('.save-btn').addEventListener('click', () => {
                    // In a real app, we would save the modal settings here
                    console.log('Saving modal settings');
                    showNotification('Settings saved successfully!', 'success');
                    closeModal();
                });

                // Close when clicking outside
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        closeModal();
                    }
                });
            }

            // Initialize settings page when it's shown
            document.querySelector('a[data-page="settings"]').addEventListener('click', () => {
                setTimeout(() => {
                    initializeSettingsPage();
                }, 100);
            });

            // System Health tab functionality
            function initializeSystemHealthPage() {
                // Tab switching functionality
                document.querySelectorAll('.health-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        // Remove active class from all tabs
                        document.querySelectorAll('.health-tab').forEach(t => {
                            t.classList.remove('active');
                        });

                        // Add active class to clicked tab
                        tab.classList.add('active');

                        // Hide all tab content
                        document.querySelectorAll('.health-tab-content').forEach(content => {
                            content.classList.remove('active');
                        });

                        // Show corresponding tab content
                        const tabId = tab.getAttribute('data-tab');
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                    });
                });

                // Resource usage refresh button
                document.querySelector('.refresh-btn').addEventListener('click', () => {
                    // Simulate refreshing resource usage data
                    const cpuUsage = Math.floor(Math.random() * 60) + 10; // 10-70%
                    const memoryUsage = Math.floor(Math.random() * 50) + 30; // 30-80%
                    const diskUsage = Math.floor(Math.random() * 40) + 10; // 10-50%
                    const networkIO = Math.floor(Math.random() * 30) + 5; // 5-35%

                    // Update progress bars
                    document.querySelector('.health-metric:nth-child(1) .progress-fill').style.width = `${cpuUsage}%`;
                    document.querySelector('.health-metric:nth-child(1) .health-metric-value span').textContent = `${cpuUsage}%`;

                    document.querySelector('.health-metric:nth-child(2) .progress-fill').style.width = `${memoryUsage}%`;
                    document.querySelector('.health-metric:nth-child(2) .health-metric-value span').textContent = `${memoryUsage}%`;

                    document.querySelector('.health-metric:nth-child(3) .progress-fill').style.width = `${diskUsage}%`;
                    document.querySelector('.health-metric:nth-child(3) .health-metric-value span').textContent = `${diskUsage}%`;

                    document.querySelector('.health-metric:nth-child(4) .progress-fill').style.width = `${networkIO}%`;
                    document.querySelector('.health-metric:nth-child(4) .health-metric-value span').textContent = `${networkIO}%`;

                    // Add rotation animation to refresh button
                    const refreshBtn = document.querySelector('.refresh-btn i');
                    refreshBtn.classList.add('fa-spin');
                    setTimeout(() => {
                        refreshBtn.classList.remove('fa-spin');
                    }, 1000);

                    // Show notification
                    showNotification('Resource usage data refreshed', 'success');
                });

                // Service action buttons
                document.querySelectorAll('.action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = e.currentTarget.querySelector('i').classList.contains('fa-sync-alt') ? 'refresh' : 'info';
                        const serviceName = e.currentTarget.closest('tr').querySelector('.service-name span').textContent;

                        if (action === 'refresh') {
                            // Simulate refreshing service status
                            const statusBadge = e.currentTarget.closest('tr').querySelector('.status-badge');
                            const statuses = ['healthy', 'warning', 'error'];
                            const weights = [0.7, 0.2, 0.1]; // 70% chance of healthy, 20% warning, 10% error

                            // Weighted random selection
                            let random = Math.random();
                            let statusIndex = 0;
                            let sum = weights[0];

                            while (random > sum && statusIndex < weights.length - 1) {
                                statusIndex++;
                                sum += weights[statusIndex];
                            }

                            const newStatus = statuses[statusIndex];

                            // Remove all status classes
                            statusBadge.classList.remove('healthy', 'warning', 'error');

                            // Add new status class
                            statusBadge.classList.add(newStatus);

                            // Update text
                            statusBadge.textContent = newStatus.charAt(0).toUpperCase() + newStatus.slice(1);

                            // Update response time
                            const responseTime = Math.floor(Math.random() * 400) + 30; // 30-430ms
                            e.currentTarget.closest('tr').querySelector('td:nth-child(4)').textContent = `${responseTime}ms`;

                            // Update last check time
                            e.currentTarget.closest('tr').querySelector('td:nth-child(5)').textContent = 'Just now';

                            // Add rotation animation to refresh button
                            const refreshIcon = e.currentTarget.querySelector('i');
                            refreshIcon.classList.add('fa-spin');
                            setTimeout(() => {
                                refreshIcon.classList.remove('fa-spin');
                            }, 1000);

                            // Show notification
                            showNotification(`${serviceName} status refreshed`, 'success');
                        } else {
                            // Show service info modal
                            showModal(`${serviceName} Details`, `
                                <div class="service-details">
                                    <div class="service-detail-item">
                                        <div class="detail-label">Service ID:</div>
                                        <div class="detail-value">svc-${Math.random().toString(36).substring(2, 10)}</div>
                                    </div>
                                    <div class="service-detail-item">
                                        <div class="detail-label">Version:</div>
                                        <div class="detail-value">1.2.5</div>
                                    </div>
                                    <div class="service-detail-item">
                                        <div class="detail-label">Instances:</div>
                                        <div class="detail-value">3</div>
                                    </div>
                                    <div class="service-detail-item">
                                        <div class="detail-label">Last Deployment:</div>
                                        <div class="detail-value">2023-04-01 08:30:15</div>
                                    </div>
                                    <div class="service-detail-item">
                                        <div class="detail-label">Health Checks:</div>
                                        <div class="detail-value">Passed 3/3</div>
                                    </div>
                                    <div class="service-detail-item">
                                        <div class="detail-label">Endpoints:</div>
                                        <div class="detail-value">/api/v1/${serviceName.toLowerCase().replace(' ', '-')}</div>
                                    </div>
                                    <div class="service-detail-item">
                                        <div class="detail-label">Dependencies:</div>
                                        <div class="detail-value">Database Service, API Gateway</div>
                                    </div>
                                    <div class="service-detail-item">
                                        <div class="detail-label">Description:</div>
                                        <div class="detail-value">This service provides ${serviceName.toLowerCase()} functionality for the Traffic Light System.</div>
                                    </div>
                                </div>
                            `);
                        }
                    });
                });

                // Logs filter functionality
                document.querySelectorAll('.logs-filter').forEach(filter => {
                    filter.addEventListener('change', () => {
                        // In a real app, we would filter the logs based on the selected values
                        console.log('Filtering logs with:', filter.value);
                    });
                });

                // Logs search functionality
                const logsSearch = document.querySelector('.logs-search');
                if (logsSearch) {
                    logsSearch.addEventListener('input', (e) => {
                        const searchTerm = e.target.value.toLowerCase();

                        // Filter log entries based on search term
                        document.querySelectorAll('.log-entry').forEach(entry => {
                            const message = entry.querySelector('.log-message').textContent.toLowerCase();
                            const service = entry.querySelector('.log-service').textContent.toLowerCase();

                            if (message.includes(searchTerm) || service.includes(searchTerm)) {
                                entry.style.display = 'grid';
                            } else {
                                entry.style.display = 'none';
                            }
                        });
                    });
                }

                // Logs action buttons
                document.querySelectorAll('.logs-action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = e.currentTarget.querySelector('i').className;

                        if (action.includes('sync-alt')) {
                            // Refresh logs
                            showNotification('Logs refreshed', 'success');
                        } else if (action.includes('download')) {
                            // Export logs
                            showNotification('Logs exported to logs.json', 'success');
                        } else if (action.includes('trash-alt')) {
                            // Clear logs
                            if (confirm('Are you sure you want to clear all logs?')) {
                                showNotification('Logs cleared', 'success');
                            }
                        }
                    });
                });

                // Pagination buttons
                document.querySelectorAll('.pagination-btn').forEach(btn => {
                    if (!btn.disabled) {
                        btn.addEventListener('click', () => {
                            // In a real app, we would load the next/previous page of logs
                            showNotification('Loading more logs...', 'info');
                        });
                    }
                });

                // Chart timeframe selectors
                document.querySelectorAll('.chart-timeframe').forEach(select => {
                    select.addEventListener('change', (e) => {
                        // In a real app, we would update the chart with data for the selected timeframe
                        const timeframe = e.target.value;
                        const chartTitle = e.target.closest('.chart-header').querySelector('h4').textContent;
                        console.log(`Updating ${chartTitle} chart with timeframe: ${timeframe}`);
                    });
                });

                // Chart expand buttons
                document.querySelectorAll('.chart-action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const chartTitle = e.currentTarget.closest('.chart-header').querySelector('h4').textContent;
                        const chartContainer = e.currentTarget.closest('.performance-chart-container');
                        const chartClass = chartContainer.querySelector('.chart-mockup').className.split(' ')[1];

                        // Show expanded chart in modal
                        showModal(`${chartTitle} - Expanded View`, `
                            <div class="expanded-chart-container">
                                <div class="chart-mockup ${chartClass}" style="height: 400px;"></div>
                            </div>
                        `);
                    });
                });

                // Alert action buttons
                document.querySelectorAll('.alert-action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = e.currentTarget.querySelector('i').className;
                        const alertEntry = e.currentTarget.closest('.alert-entry');
                        const alertTitle = alertEntry.querySelector('.alert-title').textContent;

                        if (action.includes('check')) {
                            // Mark as read
                            alertEntry.style.opacity = '0.6';
                            showNotification(`Alert "${alertTitle}" marked as read`, 'success');
                        } else if (action.includes('bell-slash')) {
                            // Mute alerts
                            showNotification(`Alerts for "${alertTitle}" muted`, 'info');
                        }
                    });
                });

                // Alerts action buttons
                document.querySelectorAll('.alerts-action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = e.currentTarget.querySelector('i').className;

                        if (action.includes('bell')) {
                            // Manage notifications
                            showModal('Manage Notifications', `
                                <div class="notification-settings">
                                    <div class="notification-setting">
                                        <div class="setting-header">
                                            <h4>Email Notifications</h4>
                                            <label class="switch">
                                                <input type="checkbox" checked>
                                                <span class="slider round"></span>
                                            </label>
                                        </div>
                                        <div class="setting-options">
                                            <div class="setting-option">
                                                <input type="checkbox" id="email-critical" checked>
                                                <label for="email-critical">Critical Alerts</label>
                                            </div>
                                            <div class="setting-option">
                                                <input type="checkbox" id="email-warnings" checked>
                                                <label for="email-warnings">Warnings</label>
                                            </div>
                                            <div class="setting-option">
                                                <input type="checkbox" id="email-info">
                                                <label for="email-info">Info</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="notification-setting">
                                        <div class="setting-header">
                                            <h4>SMS Notifications</h4>
                                            <label class="switch">
                                                <input type="checkbox">
                                                <span class="slider round"></span>
                                            </label>
                                        </div>
                                        <div class="setting-options">
                                            <div class="setting-option">
                                                <input type="checkbox" id="sms-critical" checked>
                                                <label for="sms-critical">Critical Alerts Only</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="notification-setting">
                                        <div class="setting-header">
                                            <h4>Dashboard Notifications</h4>
                                            <label class="switch">
                                                <input type="checkbox" checked>
                                                <span class="slider round"></span>
                                            </label>
                                        </div>
                                        <div class="setting-options">
                                            <div class="setting-option">
                                                <input type="checkbox" id="dashboard-critical" checked>
                                                <label for="dashboard-critical">Critical Alerts</label>
                                            </div>
                                            <div class="setting-option">
                                                <input type="checkbox" id="dashboard-warnings" checked>
                                                <label for="dashboard-warnings">Warnings</label>
                                            </div>
                                            <div class="setting-option">
                                                <input type="checkbox" id="dashboard-info" checked>
                                                <label for="dashboard-info">Info</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `);
                        } else if (action.includes('check-double')) {
                            // Mark all as read
                            document.querySelectorAll('.alert-entry').forEach(alert => {
                                alert.style.opacity = '0.6';
                            });
                            showNotification('All alerts marked as read', 'success');
                        }
                    });
                });
            }

            // Initialize system health page when it's shown
            document.querySelector('a[data-page="system-health"]').addEventListener('click', () => {
                setTimeout(() => {
                    initializeSystemHealthPage();
                }, 100);
            });

            // ML Models tab functionality
            function initializeMLModelsPage() {
                // Initialize feature importance chart
                const featureImportanceCtx = document.getElementById('feature-importance-chart');
                if (featureImportanceCtx) {
                    new Chart(featureImportanceCtx, {
                        type: 'horizontalBar',
                        data: {
                            labels: ['Growth', 'Equity', 'Volatility', 'Liquidity', 'Crime Rate', 'Affordability', 'Infrastructure', 'Schools Rating', 'Employment Rate', 'Population Growth'],
                            datasets: [{
                                label: 'Feature Importance',
                                data: [20, 15, 15, 10, 10, 8, 7, 7, 5, 8],
                                backgroundColor: 'rgba(0, 153, 204, 0.7)',
                                borderColor: 'rgba(0, 153, 204, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                xAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    }
                                }]
                            },
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: 'XGBoost Feature Importance'
                            }
                        }
                    });
                }

                // Initialize training history chart
                const trainingHistoryCtx = document.getElementById('training-history-chart');
                if (trainingHistoryCtx) {
                    new Chart(trainingHistoryCtx, {
                        type: 'line',
                        data: {
                            labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
                            datasets: [{
                                label: 'Training Loss',
                                data: [0.42, 0.38, 0.32, 0.28, 0.25, 0.22, 0.19, 0.18, 0.17, 0.16],
                                borderColor: 'rgba(255, 99, 132, 1)',
                                backgroundColor: 'rgba(255, 99, 132, 0.1)',
                                borderWidth: 2,
                                fill: true
                            }, {
                                label: 'Validation Loss',
                                data: [0.45, 0.42, 0.38, 0.35, 0.33, 0.31, 0.30, 0.29, 0.29, 0.28],
                                borderColor: 'rgba(54, 162, 235, 1)',
                                backgroundColor: 'rgba(54, 162, 235, 0.1)',
                                borderWidth: 2,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    }
                                }]
                            },
                            title: {
                                display: true,
                                text: 'Training and Validation Loss'
                            }
                        }
                    });
                }

                // Model selection functionality
                document.querySelectorAll('.model-selector-item').forEach(item => {
                    item.addEventListener('click', () => {
                        // Remove active class from all items
                        document.querySelectorAll('.model-selector-item').forEach(i => {
                            i.classList.remove('active');
                        });

                        // Add active class to clicked item
                        item.classList.add('active');

                        // Update model details (in a real app, we would load the details for the selected model)
                        const modelName = item.querySelector('.model-name').textContent;
                        document.querySelector('.model-details-header h3').textContent = modelName + ' Details';

                        // Show notification
                        showNotification(`Loaded details for ${modelName}`, 'info');
                    });
                });

                // Pipeline stage info functionality
                document.querySelectorAll('.pipeline-stage').forEach(stage => {
                    stage.addEventListener('click', () => {
                        const stageName = stage.querySelector('h4').textContent;
                        const stageStatus = stage.querySelector('.pipeline-status').textContent;

                        // Show stage details in modal
                        showModal(`${stageName} Stage Details`, `
                            <div class="pipeline-stage-details">
                                <div class="stage-detail-item">
                                    <div class="detail-label">Status:</div>
                                    <div class="detail-value">${stageStatus}</div>
                                </div>
                                <div class="stage-detail-item">
                                    <div class="detail-label">Last Updated:</div>
                                    <div class="detail-value">2023-04-15 08:00:00</div>
                                </div>
                                <div class="stage-detail-item">
                                    <div class="detail-label">Processing Time:</div>
                                    <div class="detail-value">12.5 seconds</div>
                                </div>
                                <div class="stage-detail-item">
                                    <div class="detail-label">Input Records:</div>
                                    <div class="detail-value">342</div>
                                </div>
                                <div class="stage-detail-item">
                                    <div class="detail-label">Output Records:</div>
                                    <div class="detail-value">342</div>
                                </div>
                                <div class="stage-detail-item">
                                    <div class="detail-label">Description:</div>
                                    <div class="detail-value">
                                        ${getStageDescription(stageName)}
                                    </div>
                                </div>
                                <div class="stage-actions">
                                    <button class="stage-action-btn"><i class="fas fa-play"></i> Run Stage</button>
                                    <button class="stage-action-btn"><i class="fas fa-sync-alt"></i> Refresh Status</button>
                                    <button class="stage-action-btn"><i class="fas fa-cog"></i> Configure</button>
                                </div>
                            </div>
                        `);

                        // Add functionality to stage action buttons
                        document.querySelectorAll('.stage-action-btn').forEach(btn => {
                            btn.addEventListener('click', (e) => {
                                const action = e.currentTarget.querySelector('i').className;

                                if (action.includes('play')) {
                                    showNotification(`Running ${stageName} stage...`, 'info');
                                } else if (action.includes('sync-alt')) {
                                    showNotification(`Refreshing ${stageName} status...`, 'info');
                                } else if (action.includes('cog')) {
                                    showNotification(`Opening configuration for ${stageName}...`, 'info');
                                }
                            });
                        });
                    });
                });
            }

            // Helper function to get stage descriptions
            function getStageDescription(stageName) {
                const descriptions = {
                    'Data Collection': 'This stage collects data from multiple sources including property databases, demographic data, economic indicators, and geographic information. Data is collected via APIs and scheduled imports.',
                    'Data Preprocessing': 'Raw data is cleaned, normalized, and transformed into a consistent format. Missing values are imputed, outliers are handled, and data is prepared for feature engineering.',
                    'Feature Engineering': 'This stage creates meaningful features from the preprocessed data. It includes scaling numerical features, encoding categorical variables, and creating derived features that capture important relationships.',
                    'Model Training': 'Multiple machine learning models are trained on the engineered features. Models are evaluated using cross-validation, and hyperparameters are tuned to optimize performance.',
                    'AI Refinement': 'OpenAI models are used to refine the predictions from the ML models. This stage incorporates business context and domain knowledge to improve the final zoning decisions.',
                    'Visualization': 'The final zoning decisions are visualized on an interactive map. This stage generates the color-coded polygons and prepares the data for the user interface.'
                };

                return descriptions[stageName] || 'No description available.';
            }

            // Initialize ML models page when it's shown
            document.querySelector('a[data-page="ml-models"]').addEventListener('click', () => {
                // Load Chart.js if not already loaded
                if (typeof Chart === 'undefined') {
                    const script = document.createElement('script');
                    script.src = 'https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js';
                    script.onload = () => {
                        setTimeout(() => {
                            initializeMLModelsPage();
                        }, 100);
                    };
                    document.head.appendChild(script);
                } else {
                    setTimeout(() => {
                        initializeMLModelsPage();
                    }, 100);
                }
            });

            // AI Layer tab functionality
            function initializeAILayerPage() {
                // Initialize zone distribution chart
                const zoneDistributionCtx = document.getElementById('zone-distribution-chart');
                if (zoneDistributionCtx && typeof Chart !== 'undefined') {
                    new Chart(zoneDistributionCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Green Zones', 'Orange Zones', 'Red Zones'],
                            datasets: [{
                                data: [25, 45, 30],
                                backgroundColor: ['#4CAF50', '#FF9800', '#F44336'],
                                borderColor: ['#388E3C', '#F57C00', '#D32F2F'],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            legend: {
                                position: 'right'
                            },
                            title: {
                                display: true,
                                text: 'Zone Distribution'
                            },
                            animation: {
                                animateScale: true,
                                animateRotate: true
                            }
                        }
                    });
                }

                // Tab switching functionality
                document.querySelectorAll('.ai-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        // Remove active class from all tabs
                        document.querySelectorAll('.ai-tab').forEach(t => {
                            t.classList.remove('active');
                        });

                        // Add active class to clicked tab
                        tab.classList.add('active');

                        // Hide all tab content
                        document.querySelectorAll('.ai-tab-content').forEach(content => {
                            content.classList.remove('active');
                        });

                        // Show corresponding tab content
                        const tabId = tab.getAttribute('data-tab');
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                    });
                });

                // AI Status refresh button
                document.querySelectorAll('.ai-action-btn').forEach(btn => {
                    if (btn.querySelector('i.fa-sync-alt')) {
                        btn.addEventListener('click', () => {
                            // Add rotation animation to refresh button
                            const refreshIcon = btn.querySelector('i');
                            refreshIcon.classList.add('fa-spin');

                            // Simulate refreshing AI status
                            setTimeout(() => {
                                refreshIcon.classList.remove('fa-spin');

                                // Update rate limit randomly
                                const rateLimit = Math.floor(Math.random() * 30) + 60; // 60-90%
                                const rateLimitElement = document.querySelector('.ai-metric-value.warning');
                                if (rateLimitElement) {
                                    rateLimitElement.textContent = `${rateLimit}% Used`;
                                }

                                // Update last sync time
                                const now = new Date();
                                const timeString = now.toISOString().replace('T', ' ').substring(0, 19);
                                const lastSyncElement = document.querySelector('.ai-metric:nth-child(4) .ai-metric-value');
                                if (lastSyncElement) {
                                    lastSyncElement.textContent = timeString;
                                }

                                // Show notification
                                showNotification('AI status refreshed', 'success');
                            }, 1500);
                        });
                    }
                });

                // Prompt action buttons
                document.querySelectorAll('.prompt-action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = e.currentTarget.querySelector('i').className;
                        const promptTitle = e.currentTarget.closest('.prompt-template-header').querySelector('h4').textContent;

                        if (action.includes('edit')) {
                            // Show edit prompt modal
                            const promptContent = e.currentTarget.closest('.prompt-template').querySelector('pre').textContent;

                            showModal(`Edit ${promptTitle}`, `
                                <div class="prompt-edit-container">
                                    <textarea class="prompt-edit-textarea" rows="15">${promptContent}</textarea>
                                </div>
                            `);

                            // Add save functionality to modal
                            document.querySelector('.save-btn').addEventListener('click', () => {
                                showNotification(`${promptTitle} updated successfully`, 'success');
                            });
                        } else if (action.includes('copy')) {
                            // Simulate copying to clipboard
                            showNotification(`${promptTitle} copied to clipboard`, 'success');
                        }
                    });
                });

                // Parameter range sliders with value display
                document.querySelectorAll('.parameter-range').forEach(range => {
                    const valueDisplay = range.parentElement.querySelector('.range-value');
                    if (valueDisplay) {
                        // Update value display on input
                        range.addEventListener('input', () => {
                            let value = range.value;
                            // Add % sign for percentage values
                            if (range.id === 'confidence-threshold' || range.id === 'override-threshold') {
                                value += '%';
                            }
                            valueDisplay.textContent = value;
                        });
                    }
                });

                // Save parameters button
                const saveParamsBtn = document.querySelector('.parameters-header .ai-action-btn');
                if (saveParamsBtn) {
                    saveParamsBtn.addEventListener('click', () => {
                        showNotification('AI model parameters saved successfully', 'success');
                    });
                }

                // Logs filter functionality
                document.querySelectorAll('#logs-tab .logs-filter').forEach(filter => {
                    filter.addEventListener('change', () => {
                        // In a real app, we would filter the logs based on the selected values
                        console.log('Filtering AI logs with:', filter.value);
                    });
                });

                // Logs search functionality
                const logsSearch = document.querySelector('#logs-tab .logs-search');
                if (logsSearch) {
                    logsSearch.addEventListener('input', (e) => {
                        const searchTerm = e.target.value.toLowerCase();

                        // Filter log entries based on search term
                        document.querySelectorAll('#logs-tab .log-entry').forEach(entry => {
                            const message = entry.querySelector('.log-message').textContent.toLowerCase();
                            const operation = entry.querySelector('.log-operation').textContent.toLowerCase();

                            if (message.includes(searchTerm) || operation.includes(searchTerm)) {
                                entry.style.display = 'grid';
                            } else {
                                entry.style.display = 'none';
                            }
                        });
                    });
                }

                // Logs action buttons
                document.querySelectorAll('#logs-tab .logs-action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = e.currentTarget.querySelector('i').className;

                        if (action.includes('sync-alt')) {
                            // Refresh logs
                            showNotification('AI logs refreshed', 'success');
                        } else if (action.includes('download')) {
                            // Export logs
                            showNotification('AI logs exported to ai-logs.json', 'success');
                        }
                    });
                });

                // Add new template button
                const addTemplateBtn = document.querySelector('.prompt-actions-footer .ai-action-btn:first-child');
                if (addTemplateBtn) {
                    addTemplateBtn.addEventListener('click', () => {
                        showModal('Add New Prompt Template', `
                            <div class="new-prompt-form">
                                <div class="form-group">
                                    <label for="prompt-name">Template Name:</label>
                                    <input type="text" id="prompt-name" class="parameter-input" placeholder="Enter template name...">
                                </div>
                                <div class="form-group">
                                    <label for="prompt-content">Template Content:</label>
                                    <textarea id="prompt-content" class="prompt-edit-textarea" rows="12" placeholder="Enter prompt template..."></textarea>
                                </div>
                            </div>
                        `);

                        // Add save functionality to modal
                        document.querySelector('.save-btn').addEventListener('click', () => {
                            const name = document.getElementById('prompt-name').value;
                            if (name) {
                                showNotification(`New template "${name}" added successfully`, 'success');
                            } else {
                                showNotification('Please enter a template name', 'warning');
                            }
                        });
                    });
                }

                // View history button
                const viewHistoryBtn = document.querySelector('.prompt-actions-footer .ai-action-btn:last-child');
                if (viewHistoryBtn) {
                    viewHistoryBtn.addEventListener('click', () => {
                        showModal('Prompt Template Version History', `
                            <div class="version-history">
                                <div class="version-entry">
                                    <div class="version-header">
                                        <div class="version-info">
                                            <span class="version-number">v1.3</span>
                                            <span class="version-date">2023-04-15 10:22:45</span>
                                        </div>
                                        <div class="version-author">John Smith</div>
                                    </div>
                                    <div class="version-changes">
                                        <p>Added additional context for green zone criteria and improved formatting.</p>
                                    </div>
                                    <div class="version-actions">
                                        <button class="version-action-btn">View</button>
                                        <button class="version-action-btn">Restore</button>
                                    </div>
                                </div>
                                <div class="version-entry">
                                    <div class="version-header">
                                        <div class="version-info">
                                            <span class="version-number">v1.2</span>
                                            <span class="version-date">2023-04-10 14:35:12</span>
                                        </div>
                                        <div class="version-author">Sarah Johnson</div>
                                    </div>
                                    <div class="version-changes">
                                        <p>Updated response format to include confidence level.</p>
                                    </div>
                                    <div class="version-actions">
                                        <button class="version-action-btn">View</button>
                                        <button class="version-action-btn">Restore</button>
                                    </div>
                                </div>
                                <div class="version-entry">
                                    <div class="version-header">
                                        <div class="version-info">
                                            <span class="version-number">v1.1</span>
                                            <span class="version-date">2023-04-05 09:18:33</span>
                                        </div>
                                        <div class="version-author">John Smith</div>
                                    </div>
                                    <div class="version-changes">
                                        <p>Added detailed criteria for each zone classification.</p>
                                    </div>
                                    <div class="version-actions">
                                        <button class="version-action-btn">View</button>
                                        <button class="version-action-btn">Restore</button>
                                    </div>
                                </div>
                                <div class="version-entry">
                                    <div class="version-header">
                                        <div class="version-info">
                                            <span class="version-number">v1.0</span>
                                            <span class="version-date">2023-04-01 11:45:22</span>
                                        </div>
                                        <div class="version-author">Sarah Johnson</div>
                                    </div>
                                    <div class="version-changes">
                                        <p>Initial template creation.</p>
                                    </div>
                                    <div class="version-actions">
                                        <button class="version-action-btn">View</button>
                                        <button class="version-action-btn">Restore</button>
                                    </div>
                                </div>
                            </div>
                        `);
                    });
                }
            }

            // Initialize AI layer page when it's shown
            document.querySelector('a[data-page="ai-layer"]').addEventListener('click', () => {
                // Load Chart.js if not already loaded
                if (typeof Chart === 'undefined') {
                    const script = document.createElement('script');
                    script.src = 'https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js';
                    script.onload = () => {
                        setTimeout(() => {
                            initializeAILayerPage();
                        }, 100);
                    };
                    document.head.appendChild(script);
                } else {
                    setTimeout(() => {
                        initializeAILayerPage();
                    }, 100);
                }
            });

            let heatmapActive = false;
            document.getElementById('toggle-heatmap').addEventListener('click', () => {
                heatmapActive = !heatmapActive;
                if (heatmapActive) {
                    // Apply heatmap style
                    document.getElementById('toggle-heatmap').style.backgroundColor = '#ff9900';
                    document.getElementById('toggle-heatmap').style.color = 'white';
                } else {
                    // Remove heatmap style
                    document.getElementById('toggle-heatmap').style.backgroundColor = 'white';
                    document.getElementById('toggle-heatmap').style.color = 'var(--primary-color)';
                }
            });

            let satelliteActive = false;
            document.getElementById('toggle-satellite').addEventListener('click', () => {
                satelliteActive = !satelliteActive;
                if (satelliteActive) {
                    // Switch to satellite view
                    document.getElementById('toggle-satellite').style.backgroundColor = '#ff9900';
                    document.getElementById('toggle-satellite').style.color = 'white';
                    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                        attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
                    }).addTo(map);
                } else {
                    // Switch back to default view
                    document.getElementById('toggle-satellite').style.backgroundColor = 'white';
                    document.getElementById('toggle-satellite').style.color = 'var(--primary-color)';
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                    }).addTo(map);
                }
            });
        }
    </script>
</body>
</html>
